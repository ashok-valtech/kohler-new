/*
 * Copyright Â© 2000-2017 Kohler Company. All Rights Reserved.
 */
"use strict";function getCookie(name){for(var nameEQ=name+"=",ca=document.cookie.split(";"),i=ca.length-1;i>=0;--i){for(var c=ca[i];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null}function deleteCookie(name){document.cookie=name+"=; expires=Thu, 01-Jan-70 00:00:01 GMT;"}$(window).on("load",function(){function show_popup(){var contextBase=$("#compare-cookie-info").data("cookie-name"),addToCompareLink=$("#addToCompareLink").val(),productDetailslink=$("#productDetailslink").val(),gridImageProductUrl=$("#gridImageProductUrl").val(),gridImageNewProductUrl=$("#gridImageNewProductUrl").val(),cookie=getCookie(contextBase),comparePanelProducts=$("#comparePanelProducts").val(),compareButtonLable=$("#compareButtonLable").val(),compareClearResults=$("#compareClearResult").val(),defaultCategoryKey=$("#defaultCategoryKey").val();if(null!==cookie&&""!==cookie){var values=cookie.split("."),category=values[0];$.ajax({url:addToCompareLink,cache:!1,data:{itemNumber:values[1]},success:function(data){if(1==data.success)for(var i=0;i<data.items.length;i++){var itemno="",itemNumbers="";isNaN(data.items[i].itemNumber)&&(itemNumbers=data.items[i].itemNumber.split("!_"));var defaultCategory="",multiAncestorefaultCategoryData="";itemNumbers.length>1?(itemno=itemNumbers[0],defaultCategory="&defaultCategory="+itemNumbers[1],multiAncestorefaultCategoryData=' data-product-itemno-multianscestors="'+itemno+"!_"+itemNumbers[1]+'"'):(itemno=data.items[i].itemNumber,multiAncestorefaultCategoryData=' data-product-itemno-multianscestors="'+itemno+'"'),(category===defaultCategoryKey||""===defaultCategoryKey)&&($($(".add_"+itemno)[0]).closest(".koh-product-tile").addClass("product-added"),$($(".add_"+itemno)).closest(".koh-product-tools").addClass("product-added"));var productImageUrl;productImageUrl=data.items[i].isNew?gridImageNewProductUrl.replace("{0}",data.items[i].src):gridImageProductUrl.replace("{0}",data.items[i].src);var htmlData='<div class="koh-compare-item" id="'+itemno+'"><a href="'+productDetailslink+"/"+itemno+"/?skuid="+data.items[i].defaultSku+defaultCategory+"\" ><img class='koh-compare-image' src='"+productImageUrl+"' alt='' height='100' width='68'>";if(htmlData+='</br><span class="koh-compare-name"><span class="koh-product-family">'+data.items[i].family+"</span>"+data.items[i].description+"</span>",htmlData+='</br><span class="koh-compare-sku">K-'+data.items[i].defaultSku+"</span></a>",htmlData+='</br><button class="koh-compare-remove" href="" data-product-itemno="'+itemno+'"'+multiAncestorefaultCategoryData+">Remove Product</button></div>",0==i){var compareLink=$("#compareLink").val(),htmlMainData='<input id="compare-cookie-info" type="hidden" data-cookie-name="'+contextBase+'" data-cookie-duration="5" data-cookie-max-items-number="3" data-cookie-max-items-message="Only three comparison products are allowed. Please remove one in order to allow adding this new compare to the list." data-cookie-diff-category-message="You can only compare products from the same category. Adding this product will clear your current comparison." data-cookie-category="'+category+'">';htmlMainData+='<div class="c-koh-compare-panel"><div class="koh-compare-header"><span class="koh-compare-title">'+comparePanelProducts+"</span>",htmlMainData+="<button type=\"button\" class=\"koh-compare-toggle\" onclick=\"$('.koh-compare-toggle').toggleClass('open');$('.koh-compare-items').toggleClass('open');\">Show/Hide</button>",htmlMainData+='<a href="" data-listing-page-url = "'+window.location.href+'" data-compare-link = "'+compareLink+'" class="koh-compare-link btn--primary full-width-sm marg-b-10-sm active">'+compareButtonLable+"</a>",htmlMainData+='<button type="button" class="koh-compare-clear">'+compareClearResults+'</button></div><div class="koh-compare-items"></div></div>',$("#comparePanel").html(htmlMainData),htmlData+='<div class="koh-compare-item"><span class="koh-compare-add-blank compare-add-demo">2</span></div><div class="koh-compare-item"><span class="koh-compare-add-blank">3</span></div>',$(".koh-compare-items").html(htmlData)}else 1==i?($(".koh-compare-items").children().last().remove(),$(".koh-compare-items").children().last().remove(),htmlData+='<div class="koh-compare-item"><span class="koh-compare-add-blank compare-add-demo">3</span></div>',$(".koh-compare-items").append(htmlData)):2==i&&($(".koh-compare-items").children().last().remove(),$(".koh-compare-items").append(htmlData))}}}).done(function(){}).fail(function(){})}}window.setTimeout(show_popup,1400),10===document.documentMode&&sessionStorage.setItem("Page2Visited","True")});