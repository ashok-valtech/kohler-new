function onAjaxError(customMsg){customMsg.length>0&&$("#submit-error-message").html(customMsg),grecaptcha.reset(),$("#brand-submit-btn").removeClass("koh-form-btn-loader"),$("html, body").animate({scrollTop:0},"fast"),$("form").find("input[type=text], select").val(""),$("#submit-error-message").removeClass("hide").fadeIn("fast"),setTimeout(function(){$("#submit-error-message").fadeOut(messageFadingTimingLink,function(){$(this).addClass("hide")})},messageTimingLink)}function validateRegistrationForm(contactEmailLink){var customerEmail=$("#koh-brand-customer-email").val(),customerName=$("#koh-brand-customer-name").val(),phoneNumber=$("#koh-brand-phone-number").val(),location=$("#koh-brand-project-location").val(),budgetRange=$("#koh-brand-budget-range").val(),timelineProject=$("#koh-brand-timeline-project").val(),projectAs=$("#koh-brand-project-as").val(),recaptchaResponse=grecaptcha.getResponse(),privacyPolicy=$("#kohler-warranty-privacy-policy").val(),contactInfoCheckbox=$("#kohler-contact-info").val(),isValid=!0;if((""==location||null==location)&&(isValid=!1,showError("#koh-brand-project-location",projectLocationErrorMessage)),(""==customerName||null==customerName)&&(isValid=!1,showError("#koh-brand-customer-name",customerNameErrorMessage)),""==customerEmail||null==customerEmail)isValid=!1,showError("#koh-brand-customer-email",emailErrorMessage1Id);else{var reg=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;0==reg.test(customerEmail)&&(isValid=!1,showError("#koh-brand-customer-email",emailErrorMessage2Id))}if((""==phoneNumber||null==phoneNumber)&&(isValid=!1,showError("#koh-brand-phone-number",phoneNumberErrorMessage)),""==budgetRange&&(isValid=!1,showError("#koh-brand-budget-range",budgetRangeErrorMessage)),""==timelineProject&&(isValid=!1,showError("#koh-brand-timeline-project",timelineProjectErrorMessage)),""==projectAs&&(isValid=!1,showError("#koh-brand-project-as",projectAsErrorMessage)),0===$(".checkbox-round:checked").length&&showError("#multi-checkbox-wrapper",projectTypeErrorMessage),0==document.getElementById("kohler-warranty-privacy-policy").checked&&(isValid=!1,showError("#privacy-checkbox",privacyErrorMessage)),0===recaptchaResponse.length?(isValid=!1,showError(".g-recaptcha",captchaErrorMessageId),$(".g-recaptcha > div").css({border:"1px solid #e7102e"})):(removeError("#g-recaptcha"),$(".g-recaptcha > div").css({border:"none"})),1==isValid){var projectType=$(".checkbox-round:checked").map(function(){return $(this).val()}).get().join(", "),fdata=new FormData;fdata.append("koh-brand-customer-email",customerEmail),fdata.append("koh-brand-customer-name",customerName),fdata.append("koh-brand-phone-number",phoneNumber),fdata.append("koh-brand-project-location",location),fdata.append("koh-brand-budget-range",budgetRange),fdata.append("koh-brand-timeline-project",timelineProject),fdata.append("koh-brand-project-as",projectAs),fdata.append("koh-brand-project-type",projectType),fdata.append("kohler-warranty-privacy-policy",privacyPolicy),fdata.append("kohler-contact-info",contactInfoCheckbox),$.ajax({url:contactEmailLink,cache:!1,contentType:!1,processData:!1,data:fdata,type:"POST",beforeSend:function(){$("#brand-submit-btn").addClass("koh-form-btn-loader")},success:function(data){if("true"==data.success)window.open(thankYouPageURL,"_self");else if(data.sfmcAPIError)onAjaxError(data.sfmcAPIError);else{var errorMessage=$("#submit-error-message").val();onAjaxError(errorMessage)}},error:function(error){var errorMessage=$("#submit-error-message").val();onAjaxError(errorMessage)}})}}function recaptchaCallback(){var captchaRes=grecaptcha.getResponse();0!==captchaRes.length&&(removeError("#g-recaptcha"),$("#g-recaptcha").css("border","none"),$("#g-recaptcha").children("div:first-child").css("border","none"))}var emailErrorMessage1Id=$("#emailErrorMessage1Id").val(),emailErrorMessage2Id=$("#emailErrorMessage2Id").val(),projectTypeErrorMessage=$("#projectTypeErrorMessage").val(),projectAsErrorMessage=$("#projectAsErrorMessage").val(),budgetRangeErrorMessage=$("#budgetRangeErrorMessage").val(),timelineProjectErrorMessage=$("#timelineProjectErrorMessage").val(),projectLocationErrorMessage=$("#projectLocationErrorMessage").val(),customerNameErrorMessage=$("#customerNameErrorMessage").val(),phoneNumberErrorMessage=$("#phoneNumberErrorMessage").val(),privacyErrorMessage=$("#privacyErrorMessage").val(),messageFadingTimingLink=$("#messageFadingTimingLink").val(),messageTimingLink=$("#messageTimingLink").val(),captchaErrorMessageId=$("#captchaErrorMessageId").val(),thankYouPageURL=$("#koh-brand-registration-thankyouPage").val(),head=document.getElementsByTagName("head")[0],script=document.createElement("script");script.type="text/javascript",script.onload=function(){scaleCaptcha()};var scaleCaptcha=function(){var reCaptchaWidth=304,containerWidth=$(".captcha-container").width(),captchaElements=$(".g-recaptcha");if(reCaptchaWidth>=containerWidth){var scale=.82;captchaElements.css("transform","scale("+scale+")").css("-webkit-transform","scale("+scale+")").css("-ms-transform","scale("+scale+")").css("-o-transform","scale("+scale+")").css("transform-origin","0 0").css("-webkit-transform-origin","0 0").css("-ms-transform-origin","0 0").css("-o-transform-origin","0 0"),$(".captcha-container").height(68)}};script.src="https://www.google.com/recaptcha/api.js",head.appendChild(script);var disableSubmit=function(errorCount){errorCount>0?$("#brand-submit-btn").attr("disabled",!0):$("#brand-submit-btn").removeAttr("disabled")};$(document).ready(function(){$("#idBrandRegistratationForm").submit(function(e){e.preventDefault();var contactEmailLink=$(this).attr("action");validateRegistrationForm(contactEmailLink)})});var showError=function(ele,errorMessage){$(ele).parent().find(".error-message").remove(),$(ele).after("<div class='error-message'>"+errorMessage+"</div>"),$(ele).css({"border-color":"#e7102e"}),$(ele).closest(".brand-form-group").css({"margin-bottom":"6px"}),disableSubmit(1)},showCheckboxError=function(ele,errorMessage){$(ele).find(".error-message").remove(),$(ele).append("<div class='error-message'>"+errorMessage+"</div>"),disableSubmit(1)},removeCheckboxError=function(ele){$(ele).find(".error-message").remove();var sfmcErrorCount=$(document).find(".error-message").size();disableSubmit(sfmcErrorCount)},removeError=function(ele){$(ele).parent().find(".error-message").remove(),$(ele).css({"border-color":"#cccccc"}),$(ele).closest(".brand-form-group").css({"margin-bottom":"15px"});var sfmcErrorCount=$(document).find(".error-message").size();disableSubmit(sfmcErrorCount)},validateEmail=function(ele){var reg=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,currentVal=$(ele).val();return 0==reg.test(currentVal)?!1:!0};$("#koh-brand-phone-number").on("input",function(event){var start=this.selectionStart-1,end=this.selectionEnd-1;$(this).val().match(/[^0-9-+()]/gi)&&($(this).val($(this).val().replace(/[^0-9-+()]/gi,"")),this.setSelectionRange(start,end))}),$("#multi-checkbox-wrapper .multi-checkbox-label").on("click",function(event){0===$(".checkbox-round:checked").length?(isValid=!1,showError("#multi-checkbox-wrapper",projectTypeErrorMessage)):(isValid=!0,removeError("#multi-checkbox-wrapper"))}),$(document).on("keyup change","#idBrandRegistratationForm input, #idBrandRegistratationForm select",function(e){var currentIdName=$(this).attr("id"),currentId="#"+currentIdName;if("koh-brand-customer-name"==currentIdName){var currentVal=$(this).val();""==currentVal?(isValid=!1,showError(currentId,customerNameErrorMessage)):(isValid=!0,removeError(currentId))}if("koh-brand-customer-email"==currentIdName){var currentVal=$(this).val();""==currentVal?(isValid=!1,showError(currentId,emailErrorMessage1Id)):validateEmail(currentId)?(isValid=!0,removeError(currentId)):(isValid=!1,showError(currentId,emailErrorMessage2Id))}if("koh-brand-project-location"==currentIdName){var currentVal=$(this).val();""==currentVal?(isValid=!1,showError(currentId,projectLocationErrorMessage)):(isValid=!0,removeError(currentId))}if("koh-brand-phone-number"==currentIdName){var currentVal=$(this).val();""==currentVal?(isValid=!1,showError(currentId,phoneNumberErrorMessage)):(isValid=!0,removeError(currentId))}if("koh-brand-budget-range"==currentIdName){var currentVal=$(this).val();""==currentVal?(isValid=!1,showError(currentId,budgetRangeErrorMessage)):(isValid=!0,removeError(currentId))}if("koh-brand-timeline-project"==currentIdName){var currentVal=$(this).val();""==currentVal?(isValid=!1,showError(currentId,timelineProjectErrorMessage)):(isValid=!0,removeError(currentId))}if("koh-brand-project-as"==currentIdName){var currentVal=$(this).val();""==currentVal?(isValid=!1,showError(currentId,projectAsErrorMessage)):(isValid=!0,removeError(currentId))}"kohler-warranty-privacy-policy"==currentIdName&&(0==document.getElementById("kohler-warranty-privacy-policy").checked?(isValid=!1,showError("#privacy-checkbox",privacyErrorMessage)):(isValid=!0,removeError("#privacy-checkbox")))});