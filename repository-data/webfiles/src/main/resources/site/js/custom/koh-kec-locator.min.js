/*
 * Copyright Â© 2000-2017 Kohler Company. All Rights Reserved.
 */
function GetMap(){var dataSource=$(".koh-bingdatasource").data("bingdatasource"),masterKey=$(".koh-bingdatasourcekeys").data("bingdatasourcekeys"),languageCode=$(".koh-bingdatasourcelanguage").data("bingdatasourcelanguage"),lat=$(".koh-latitude").data("latitude"),lon=$(".koh-longitude").data("longitude"),map=new Microsoft.Maps.Map(document.getElementById("myMap"),{credentials:masterKey,center:new Microsoft.Maps.Location(lat,lon),disableScrollWheelZoom:!0,zoom:15}),sdsDataSourceUrl=dataSource;Microsoft.Maps.loadModule("Microsoft.Maps.SpatialDataService",function(){var queryOptions={queryUrl:sdsDataSourceUrl,spatialFilter:{spatialFilterType:"nearby",location:map.getCenter(),radius:20}},base64Image="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0cHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxwYXRoIGQ9Ik0xMS41MTMsMTIuMzhjLTIuMTE3LDAtMy44MzUtMS43MjktMy44MzUtMy44NjJjMC0yLjEzNSwxLjcxOC0zLjg2MywzLjgzNS0zLjg2M3MzLjgzNSwxLjcyOSwzLjgzNSwzLjg2MyAgQzE1LjM0OCwxMC42NSwxMy42MywxMi4zOCwxMS41MTMsMTIuMzggTTExLjUxMywwQzYuODI1LDAsMy4wMjUsMy44MjcsMy4wMjUsOC41NDljMCw0LjQ2LDMuODQ0LDEwLjIxMyw2LjQxMSwxMy4wMTQgIGMwLjk1OSwxLjA0NSwyLjA3NiwyLjQ1NCwyLjA3NiwyLjQ1NHMxLjItMS40MTcsMi4yMjktMi40OTNDMTYuMzA2LDE4Ljg0LDIwLDEzLjQ1MSwyMCw4LjU0OUMyMCwzLjgyNywxNi4yLDAsMTEuNTEzLDAiLz48L3N2Zz4=";Microsoft.Maps.SpatialDataService.QueryAPIManager.search(queryOptions,map,function(data){function displayInfobox_EnglishSite(obj){var addressTable="<table>",displayName="",addressLine="";void 0!=obj&&(void 0!=obj.metadata.LocationName&&""!=obj.metadata.LocationName&&(displayName+="<tr><td>"+obj.metadata.LocationName+"</td></tr>"),void 0!=obj.metadata.AddressLine&&""!=obj.metadata.AddressLine&&(addressLine+=obj.metadata.AddressLine+", "),void 0!=obj.metadata.Locality&&""!=obj.metadata.Locality&&(addressLine+=obj.metadata.Locality+", "),void 0!=obj.metadata.AdminDistrict&&""!=obj.metadata.AdminDistrict&&obj.metadata.Locality!=obj.metadata.AdminDistrict&&(addressLine+=obj.metadata.AdminDistrict+", "),void 0!=obj.metadata.PostalCode&&""!=obj.metadata.PostalCode&&(addressLine+=obj.metadata.PostalCode+", "),addressTable+=displayName,addressTable+="<tr><td>"+addressLine.slice(0,addressLine.length-2)+"</td></tr>"),addressTable+="</table>",infobox.setOptions({visible:!0,description:addressTable})}function displayInfobox_LanguageSite(obj){var addressTable="<table>",displayName="",addressLine="";void 0!=obj&&(void 0!=obj.metadata.LocationNameAlternate&&""!=obj.metadata.LocationNameAlternate&&(displayName+="<tr><td>"+obj.metadata.LocationNameAlternate+"</td></tr>"),void 0!=obj.metadata.AddressLineAlternate&&""!=obj.metadata.AddressLineAlternate&&(addressLine+=obj.metadata.AddressLineAlternate+", "),void 0!=obj.metadata.LocalityAlternate&&""!=obj.metadata.LocalityAlternate&&(addressLine+=obj.metadata.LocalityAlternate+", "),void 0!=obj.metadata.AdminDistrictAlternate&&""!=obj.metadata.AdminDistrictAlternate&&obj.metadata.LocalityAlternate!=obj.metadata.AdminDistrictAlternate&&(addressLine+=obj.metadata.AdminDistrictAlternate+", "),void 0!=obj.metadata.PostalCode&&""!=obj.metadata.PostalCode&&(addressLine+=obj.metadata.PostalCode+", "),addressTable+=displayName,addressTable+="<tr><td>"+addressLine.slice(0,addressLine.length-2)+"</td></tr>"),addressTable+="</table>",infobox.setOptions({visible:!0,description:addressTable})}var obj=data[0],pushpin=new Microsoft.Maps.Pushpin(map.getCenter(),{icon:base64Image});map.entities.push(pushpin);var offset=new Microsoft.Maps.Point(0,-25),p=map.tryLocationToPixel(map.getCenter());p.x-=offset.x,p.y+=offset.y,map.setView({center:map.tryPixelToLocation(p)});var infobox=new Microsoft.Maps.Infobox(map.getCenter(),{visible:!1});infobox.setMap(map),Microsoft.Maps.Events.addHandler(pushpin,"click",function(e){if("en"==languageCode){for(var key in obj.metadata)console.log("key: "+key+" :-  Value: "+obj.metadata[key]);displayInfobox_EnglishSite(obj)}else{displayInfobox_LanguageSite(obj);for(var key in obj.metadata)console.log("key: "+key+" :-  Value: "+obj.metadata[key])}})},null,!1,function(status,message){document.getElementById("printoutPanel").innerHTML="Search failure. NetworkStatus: "+status})})}