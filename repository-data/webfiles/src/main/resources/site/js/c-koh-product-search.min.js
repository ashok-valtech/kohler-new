/*
 * Copyright Â© 2000-2017 Kohler Company. All Rights Reserved.
 */
var axKOH=axKOH||{};axKOH.main=axKOH.main||{};var noUiSlider=noUiSlider||null;axKOH.main.productSearch=function(){var componentClass="c-koh-product-search",initSearchNav=function(){var $searchControls=$(".koh-search-controls").first(),$searchSet=$searchControls.children(".koh-search-set").first(),$menuButton=$searchControls.children(".koh-search-select").first();$menuButton.click({list:$searchSet},function(e){var $button=$(this),$list=e.data.list;$button.hasClass("open")?($button.removeClass("open"),$list.removeClass("open")):($button.addClass("open"),$list.addClass("open"))}),$(document).click({target:$menuButton,list:$searchSet},function(e){var $button=e.data.target,$list=e.data.list;$(e.target).closest($button).length||$(e.target).is($button)||$button.hasClass("open")&&($button.removeClass("open"),$list.removeClass("open"))})},initFilterExpandCollapse=function($components){$components&&$components.each(function(){var $component=$(this),filterGroupClass=".koh-filter-group.koh-filters",filterClass=".koh-filter",$filters=$component.find(filterGroupClass).children(filterClass);$filters.each(function(){var $filterName=$(this).children(".koh-filter-name").first(),$filterContent=$(this).children(".koh-filter-content").first();$filterName.click({target:$filterContent},function(e){var $target=e.data.target;$target.hasClass("open")?($(this).removeClass("open"),$target.removeClass("open")):($(this).addClass("open"),$target.addClass("open"))})});var $filterButton=$component.find(".koh-search-filters-title"),$filterContent=$component.find(".koh-search-filters-content");$filterButton.click({target:$filterContent},function(e){var $target=e.data.target;$target.hasClass("open")?$target.removeClass("open"):$target.addClass("open")})})},initRangeSliders=function($components){$components&&$components.each(function(){var $component=$(this),$rangeFilters=$component.find(".koh-filter.koh-filter-type-range");$rangeFilters.each(function(){var $rangeFilter=$(this),$sliderContainer=$rangeFilter.find(".koh-range-filter").first(),$rangeLabels=$sliderContainer.find(".koh-range-slider-labels"),$rangeMinLabel=$sliderContainer.find(".koh-range-slider-labels > .koh-range-slider-min"),$rangeMaxLabel=$sliderContainer.find(".koh-range-slider-labels > .koh-range-slider-max"),$slider=$sliderContainer.find(".koh-range-slider").first(),sliderElement=$slider[0],rangeLabelPrefix=$rangeLabels.data("label-prefix"),rangeLabelSuffix=$rangeLabels.data("label-suffix"),rangeCurrentMin=$rangeMinLabel.data("min-value"),rangeCurrentMax=$rangeMaxLabel.data("max-value"),rangeMin=$slider.data("range-min"),rangeMax=$slider.data("range-max");noUiSlider&&!isNaN(rangeMin)&&!isNaN(rangeMax)&&rangeMax>rangeMin?(noUiSlider.create(sliderElement,{start:[rangeCurrentMin,rangeCurrentMax],connect:!0,range:{min:rangeMin,max:rangeMax},format:{to:function(value){return Math.round(value)},from:function(value){return value}}}),sliderElement.noUiSlider.on("update",function(values,handleIndex){0===handleIndex?($rangeMinLabel.data("min-value",values[handleIndex]),$rangeMinLabel.text(rangeLabelPrefix+values[handleIndex]+rangeLabelSuffix)):1===handleIndex&&($rangeMaxLabel.data("max-value",values[handleIndex]),$rangeMaxLabel.text(rangeLabelPrefix+values[handleIndex]+rangeLabelSuffix))})):sliderElement.hide()})})},initQuickView=function($components){$components&&$components.each(function(componentIndex){var $component=$(this),$quickViewContainers=$component.find(".koh-product-quick-view");$quickViewContainers.each(function(quickViewIndex){var $button=$(this).children(".koh-product-quick-view-button"),$panel=$(this).children(".koh-product-quick-view-panel"),remodalID="QuickView"+componentIndex+quickViewIndex;initAsModal($button,$panel,remodalID),$panel.each(function(){initQuickViewData($(this))})})})},initTooltips=function($components){if($components){var $componentModals=$('.remodal-wrapper > div[data-koh-component="'+componentClass+'"]'),$targets=$components.add($componentModals);$targets.each(function(componentIndex){var $component=$(this),$abbreviations=$component.find("abbr[title]");$abbreviations.each(function(abbrIndex){var $abbr=$(this);$abbr.qtip({id:"abbr"+componentIndex+abbrIndex,content:{attr:"title"},position:{my:"bottom center",at:"top center"},style:{classes:"koh-qtip-tooltip koh-product-search-tooltip qtip-bootstrap",tip:{mimic:"center",width:30,height:15}}})});var $colorSwatches=$component.find("button.koh-product-color, .koh-available-filters.v-koh-colors > li > a");$colorSwatches.each(function(swatchIndex){var $colorSwatch=$(this),$colorLabel=$colorSwatch.children(".label");$colorSwatch.qtip({id:"swatch"+componentIndex+swatchIndex,content:{text:$colorLabel.clone()},position:{my:"top left",at:"bottom left",adjust:{y:6}},style:{classes:"koh-qtip-tooltip koh-product-search-tooltip qtip-bootstrap",tip:!1}})});var $facetsWithTooltips=$component.find(".koh-filter").has(".koh-filter-tooltips");$facetsWithTooltips.each(function(facetIndex){var $facet=$(this),$facetName=$facet.find(".koh-filter-name"),$facetTooltip=$facet.find(".koh-filter-tooltips");$facetName.append('<span class="koh-tooltip"></span>');var $tooltipIcon=$facetName.children(".koh-tooltip");$tooltipIcon.qtip({id:"facetTooltip"+componentIndex+facetIndex,content:{text:$facetTooltip},show:"click",hide:{event:"click unfocus"},position:{my:"center left",at:"center right",adjust:{x:6}},style:{classes:"koh-qtip-tooltip koh-product-search-facet-tooltip qtip-bootstrap",tip:{mimic:"center",width:30,height:15}}}),$tooltipIcon.click(function(e){e.stopPropagation(),e.preventDefault()})})})}},initDropdowns=function($components){$components&&$components.each(function(){var $component=$(this),$options=$component.find(".koh-search-sorting");$options.each(function(){var $optionsButton=$(this).children(".koh-sort-by"),$optionsList=$(this).children(".koh-sort-options");$optionsButton.click({list:$optionsList},function(e){var $button=$(this),$list=e.data.list;$button.hasClass("open")?($button.removeClass("open"),$list.removeClass("open")):($button.addClass("open"),$list.addClass("open"))})})})},initSimilarProducts=function($components){$components&&$components.each(function(){var $component=$(this),$productTiles=$component.find(".koh-product-tile");$productTiles.each(function(){var $productLink=$(this).find(".koh-product-tile-content > a");$productLink.on("click",function(){var similarProducts=$(this).data("similar");if(similarProducts){var minutes=5,expires=new Date;expires.setTime(expires.getTime()+60*minutes*1e3),document.cookie="kohsimprod="+similarProducts+";expires="+expires.toUTCString()+";path=/"}})})})},initSearchFacets=function($components){$components.each(function(){var $component=$(this),$sortButton=$component.find(".koh-search-sorting > .koh-sort-by"),$sortOptions=$component.find(".koh-search-sorting > .koh-sort-options"),$sortOptionItems=$sortOptions.children("li");$sortOptionItems.each(function(){var $sortOptionItem=$(this);$sortOptionItem.click({button:$sortButton,collection:$sortOptions,choices:$sortOptionItems},function(e){setActiveSorting(e.data.button,e.data.choices,$(this)),e.data.button.removeClass("open"),e.data.collection.removeClass("open"),displayNewResults($component)})});var $categories=$component.find(".koh-search-filters .koh-filter-group.koh-category");$categories.each(function(){var $selectedFilters=($categories.find(".koh-available-filters > li > a"),$categories.find(".koh-selected-filters")),$selectedFilterItems=$selectedFilters.children("li");$selectedFilterItems.each(function(){var $filterItem=$(this),$filterItemButton=$filterItem.children("button.koh-selected-filter");$filterItemButton.click({filterCount:$selectedFilterItems.length,filterSet:$selectedFilters,filterItem:$filterItem},function(e){e.data.filterCount<=1?e.data.filterSet.remove():e.data.filterItem.remove(),displayNewResults($component)})})});var $showAllCats=$component.find(".koh-search-filters .koh-filter-group.koh-category .koh-filter-group-all-link");$showAllCats.click(function(e){e.stopPropagation(),e.preventDefault(),displayNewResults($component)});var $filters=$component.find(".koh-search-filters .koh-filter-group.koh-filters .koh-filter");$filters.each(function(){var $filter=$(this),$selectedFilters=null,$selectedFilterItems=null,$availableFilters=null;if($filter.hasClass("koh-filter-type-checkbox")){var $checkbox=$filter.find(".koh-checkbox-filter > a");$checkbox.click(function(e){e.stopPropagation(),e.preventDefault(),$(this).hasClass("koh-checkbox-checked")?$(this).removeClass("koh-checkbox-checked").addClass("koh-checkbox-unchecked"):$(this).removeClass("koh-checkbox-unchecked").addClass("koh-checkbox-checked"),displayNewResults($component)})}else if($filter.hasClass("koh-filter-type-range")){var $sliderContainer=$filter.find(".koh-range-filter").first(),$rangeMinLabel=$sliderContainer.find(".koh-range-slider-labels > .koh-range-slider-min"),$rangeMaxLabel=$sliderContainer.find(".koh-range-slider-labels > .koh-range-slider-max"),$slider=$sliderContainer.find(".koh-range-slider"),sliderElement=$slider[0];sliderElement.noUiSlider&&sliderElement.noUiSlider.on("change",function(){var facetName=$sliderContainer.data("facet-name"),minValue=$rangeMinLabel.data("min-value"),maxValue=$rangeMaxLabel.data("max-value"),facetValue=minValue&&maxValue?minValue+"-"+maxValue:"";addActiveFilter($filter,facetName,facetValue,facetValue,"0"),displayNewResults($component)}),$selectedFilters=$filter.find(".koh-selected-filters"),$selectedFilterItems=$selectedFilters.children("li"),$selectedFilterItems.each(function(){var $filterItem=$(this),$filterItemButton=$filterItem.children("button.koh-selected-filter");$filterItemButton.click({filterCount:$selectedFilterItems.length,filterSet:$selectedFilters,filterItem:$filterItem},function(e){e.data.filterCount<=1?e.data.filterSet.remove():e.data.filterItem.remove(),displayNewResults($component)})})}else $filter.hasClass("koh-filter-type-colors")?($availableFilters=$filter.find(".koh-available-filters > li > a"),$selectedFilters=$filter.find(".koh-selected-filters"),$availableFilters.each(function(){var $filterLink=$(this);$($filterLink).on("click touchend",function(e){e.stopPropagation(),e.preventDefault();var facetName=$filterLink.data("facet-name"),facetValue=$filterLink.data("facet-value"),facetLabel=$filterLink.children("span.label").text(),facetCount="0";addActiveFilter($filter,facetName,facetValue,facetLabel,facetCount),displayNewResults($component)})}),$selectedFilters=$filter.find(".koh-selected-filters"),$selectedFilterItems=$selectedFilters.children("li"),$selectedFilterItems.each(function(){var $filterItem=$(this),$filterItemButton=$filterItem.children("button.koh-selected-filter");$filterItemButton.click({filterCount:$selectedFilterItems.length,filterSet:$selectedFilters,filterItem:$filterItem},function(e){e.data.filterCount<=1?e.data.filterSet.remove():e.data.filterItem.remove(),displayNewResults($component)})})):($availableFilters=$filter.find(".koh-available-filters > li > a"),$selectedFilters=$filter.find(".koh-selected-filters"),$availableFilters.each(function(){var $filterLink=$(this);$filterLink.click(function(e){e.stopPropagation(),e.preventDefault();var facetName=$filterLink.data("facet-name"),facetValue=$filterLink.data("facet-value"),facetLabel=$filterLink.children("span.name").first().text(),facetCount=$filterLink.children("span.count").first().text();addActiveFilter($filter,facetName,facetValue,facetLabel,facetCount),displayNewResults($component)})}),$selectedFilterItems=$selectedFilters.children("li"),$selectedFilterItems.each(function(){var $filterItem=$(this),$filterItemButton=$filterItem.children("button.koh-selected-filter");$filterItemButton.click({filterCount:$selectedFilterItems.length,filterSet:$selectedFilters,filterItem:$filterItem},function(e){e.data.filterCount<=1?e.data.filterSet.remove():e.data.filterItem.remove(),displayNewResults($component)})}))});var $clearAllFilters=$component.find(".koh-search-filters .koh-filter-group.koh-filters .koh-filter-group-all-link");$clearAllFilters.click(function(e){e.stopPropagation(),e.preventDefault(),displayNewResults($component,!1,!0)})})},getType=function($component){var type="";return type=$component.find(".koh-data-attributes").data("koh-type")||""},getSearchTerm=function($component){var searchTerm="";return searchTerm=$component.find(".koh-data-attributes").data("koh-searchterm")||""},getCurrentPage=function($component){var currentPage="";return currentPage=$component.find(".koh-data-attributes").data("koh-currentpage")||""},getActiveCategory=function($component){var categoryName="",$activeCategory=$component.find(".koh-search-filters .koh-filter-group.koh-category .koh-selected-filter").first();return categoryName=$activeCategory.data("facet-value")||""},getActiveFilters=function($component){var facetNameField="facet-name",facetValueField="facet-value",activeFilters={},$filters=$component.find(".koh-search-filters .koh-filter-group.koh-filters .koh-filter");return $filters.each(function(){var $filter=$(this),$selectedFilters=null,facetName="",facetValue="";if($filter.hasClass("koh-filter-type-checkbox")){var $checkbox=$filter.find(".koh-checkbox-filter > a");$checkbox.hasClass("koh-checkbox-checked")&&(facetName=$checkbox.data(facetNameField),facetValue=$checkbox.data(facetValueField),facetName&&facetValue&&(activeFilters[facetName]=facetValue))}else $filter.hasClass("koh-filter-type-range")?($selectedFilters=$filter.find(".koh-selected-filter"),$selectedFilters.each(function(){if(facetName=$(this).data(facetNameField),facetValue=$(this).data(facetValueField),facetName&&facetValue){var values=facetValue.split(/-/);activeFilters[facetName]=activeFilters[facetName]||{},activeFilters[facetName].Min=values[0],activeFilters[facetName].Max=values[1]}})):$filter.hasClass("koh-filter-type-colors")?($selectedFilters=$filter.find(".koh-selected-filter"),$selectedFilters.each(function(index){facetName=$(this).data(facetNameField),facetValue=$(this).data(facetValueField),facetName&&facetValue&&(activeFilters[facetName]=activeFilters[facetName]||{},activeFilters[facetName][index]=facetValue)})):($selectedFilters=$filter.find(".koh-selected-filter"),$selectedFilters.each(function(index){facetName=$(this).data(facetNameField),facetValue=$(this).data(facetValueField),facetName&&facetValue&&(activeFilters[facetName]=activeFilters[facetName]||{},activeFilters[facetName][index]=facetValue)}))}),activeFilters},getUrlfromActiveFilters=function($component){var url="",activeFilters=getActiveFilters($component);return $.each(activeFilters,function(facetName,facetValues){facetName&&facetValues&&("object"==typeof facetValues?$.each(facetValues,function(index,facetValue){if("Min"===index||"Max"===index){var paramName=facetName+index;queryParams[paramName]=facetValue,queryParamCount+=1}else url=url+"/"+facetName+"/"+facetValue}):url=url+"/"+facetName+"/"+facetValues)}),url},getActiveSorting=function($component){var sortOptions={orderBy:"",direction:"",labels:{orderBy:"orderBy",direction:"sort"}},$sortOptions=$component.find(".koh-search-sorting > .koh-sort-options");sortOptions.labels.orderBy=$sortOptions.data("sort-orderby-label")||sortOptions.labels.orderBy,sortOptions.labels.direction=$sortOptions.data("sort-direction-label")||sortOptions.labels.direction;var $activeSort=$sortOptions.find(".koh-sort-selected > span").first();return sortOptions.orderBy=$activeSort.data("sort-orderby"),sortOptions.direction=$activeSort.data("sort-direction"),sortOptions},setActiveSorting=function($sortButton,$sortOptions,$targetOption){$sortButton.text($targetOption.children("span").text()),$sortOptions.removeClass("koh-sort-selected"),$targetOption.addClass("koh-sort-selected")},addActiveFilter=function($filter,facetName,facetValue,facetLabel,facetCount){var $filterList=$filter.children(".koh-selected-filters"),$filterItemButton=$('<button class="koh-selected-filter"></button>');$filter.hasClass("koh-filter-type-checkbox")?$(this).removeClass("koh-checkbox-unchecked").addClass("koh-checkbox-checked"):$filter.hasClass("koh-filter-type-range")?($filterList&&$filterList.length||($filterList=$('<ul class="koh-selected-filters"></ul>'),$filterList.insertBefore($filter.find(".koh-range-filter"))),$filterItemButton.data("facet-name",facetName),$filterItemButton.data("facet-value",facetValue),$filterItemButton.append($('<span class="remove">Remove Filter</span>')),$filterItemButton.append($('<span class="name">'+facetLabel+"</span>")),$filterItemButton.append($('<span class="count">'+facetCount+"</span>")),$filterList.append($("<li></li>").wrapInner($filterItemButton))):($filterList&&$filterList.length||($filterList=$('<ul class="koh-selected-filters"></ul>'),$filterList.insertBefore($filter.find(".koh-available-filters"))),$filterItemButton.data("facet-name",facetName),$filterItemButton.data("facet-value",facetValue),$filterItemButton.append($('<span class="remove">Remove Filter</span>')),$filterItemButton.append($('<span class="name">'+facetLabel+"</span>")),$filterItemButton.append($('<span class="count">'+facetCount+"</span>")),$filterList.append($("<li></li>").wrapInner($filterItemButton)))},getURL=function($component,excludeCategory,excludeFilters){var url="",queryParams={},queryParamCount=0,urlRoot=$component.find(".koh-data-attributes").data("koh-url-root");if(url=urlRoot,!excludeCategory){var categoryName=getActiveCategory($component);if(categoryName&&(url=url+"/Category/"+categoryName),!excludeFilters){var urlFilters=getUrlfromActiveFilters($component);url+=urlFilters}var sortOptions=getActiveSorting($component);sortOptions&&sortOptions.orderBy&&sortOptions.direction&&(queryParams[sortOptions.labels.orderBy]=sortOptions.orderBy,queryParamCount+=1,queryParams[sortOptions.labels.direction]=sortOptions.direction,queryParamCount+=1)}var type=getType($component);type&&(url=url+"?type="+type);var searchTerm=getSearchTerm($component);searchTerm&&(url=url+"&search="+searchTerm);var currentPage=getCurrentPage($component);return currentPage&&(url=url+"&currentpage="+currentPage),queryParamCount>0&&(url+="&",$.each(queryParams,function(key,value){url=url+key+"="+value+"&"}),url=url.replace(/&$/,"")),url},displayNewResults=function($component,excludeCategory,excludeFilters){var currentUrl=window.location.href,targetUrl=getURL($component,excludeCategory,excludeFilters);targetUrl!==currentUrl&&(saveScrollPosition(),window.location.href=targetUrl)},initAsModal=function($button,$panel,remodalID){$panel.data("remodal-id",remodalID),$panel.prepend('<button data-remodal-action="close" class="remodal-close"></button>'),$panel.attr("data-koh-component",componentClass),$panel.addClass(componentClass+"-modal");var $remodalPanel=$panel.remodal({hashTracking:!0,closeOnCancel:!0,closeOnEscape:!0,closeOnOutsideClick:!0,modifier:""});$button.data("remodal-target",remodalID),$button.click({target:$remodalPanel},function(e){e.preventDefault(),e.stopPropagation();var $target=e.data.target;$target.open()})},initQuickViewData=function($panel){var $primaryBanner=$panel.children(".koh-product-image"),$productContent=$panel.children(".koh-product-content"),$productSKU=$productContent.children(".koh-product-sku"),$productPrices=$productContent.children(".koh-product-prices"),$colorCollections=$productContent.children(".koh-product-colors");$colorCollections.each(function(){var $colorCollection=$(this),$selectedColorLabel=$colorCollection.children(".koh-selected-color").find(".value"),$colorVariants=$colorCollection.find(".koh-product-variant");$colorVariants.each(function(){var $colorVariant=$(this),productData={imageURL:$colorVariant.data("koh-image"),sku:$colorVariant.data("koh-sku"),prices:$colorVariant.data("koh-price"),colorName:$colorVariant.data("koh-color")},productFields={banner:$primaryBanner,sku:$productSKU,prices:$productPrices,color:$selectedColorLabel};$colorVariant.children(".koh-product-color").click({variantSet:$colorVariants,variant:$colorVariant,product:productData,fields:productFields},function(e){var $variant=e.data.variant,$variantSet=e.data.variantSet,productData=e.data.product,productFields=e.data.fields;productFields.banner.find("img").attr("src",productData.imageURL),productFields.sku.text(productData.sku),productFields.prices.find(".koh-current-price > .value").text(productData.prices.current),productFields.prices.find(".koh-previous-price > .value").text(productData.prices.previous),productFields.prices.find(".koh-discounted-price > .value").text(productData.prices.discounted),productFields.color.text(productData.colorName),$variantSet.removeClass("koh-selected-variant"),$variant.addClass("koh-selected-variant")})})})},loadScrollPosition=function(){var scrollPosition=sessionStorage.getItem("kohPageScroll");axKOH.utils.debugLog("Scroll set to "+scrollPosition),$(window).scrollTop(scrollPosition),sessionStorage.removeItem("kohPageScroll")},saveScrollPosition=function(){var scrollPosition=$(window).scrollTop();sessionStorage.setItem("kohPageScroll",scrollPosition)},initBackTopButton=function(){var topButton=$(".koh-search-top button");if($(topButton).length){var topTarget=$(".c-koh-product-search:first");$(topButton).click(function(e){e.preventDefault,$(topTarget).length&&$("html, body").animate({scrollTop:$(topTarget).offset().top-80},250)})}},initBackTopDistance=function(){var topButton=$(".koh-search-top button");if($(topButton).length){var topDistance=$(".c-koh-product-search:first").offset().top;$(document).scroll(function(){var y=$(this).scrollTop();y>topDistance?$(topButton).fadeIn():$(topButton).fadeOut()})}},initCatgoryLinks=function($components){var $searchTerm=window.location.search.slice(1),$categoryLinks=$(".koh-category .koh-available-filters li a"),$component=$($components[0]),urlFilters=getUrlfromActiveFilters($component);$categoryLinks.each(function(){var $categoryName=$(this).data("facet-name"),$categoryValue=$(this).data("facet-value"),$categoryURL="/results/"+$categoryName+"/"+$categoryValue+urlFilters+"?"+$searchTerm;$(this).attr("href",$categoryURL)})},initSpecToggle=function(){var specToggle=$(".koh-spec-toggle");$(specToggle).length&&specToggle.each(function(){$(this).click(function(e){return e.preventDefault,$(this).next().toggle(),$(this).toggleClass("active"),!1})})},initArticleVideos=function($components){$components&&$components.each(function(componentIndex){var $component=$(this),$videoLinks=$component.find(".koh-product-article.v-koh-video a");$videoLinks.each(function(videoIndex){var $videoLink=$(this),videoURL=$videoLink.attr("href"),apiURL=$videoLink.data("api");if(videoURL){var $videoPanel=$('<div class="koh-video-panel"><iframe width="560" height="315" src="'+videoURL+'" frameborder="0" allowfullscreen></iframe></div>');$videoPanel.insertAfter($videoLink);var remodalID="Video"+componentIndex+videoIndex,$videoPanel=$component.find(".koh-video-panel");initAsModal($videoLink,$videoPanel,remodalID),$videoPanel.on("opened",function(){var $embeddedVideo=$(this).find("iframe");resizeResponsiveVideo($embeddedVideo)})}else $videoLink.click(function(e){e.preventDefault(),e.stopPropagation()});apiURL&&$.get(apiURL,function(data){if(data&&data.items&&data.items[0]&&data.items[0].snippet){var videoTitle=data.items[0].snippet.title;videoTitle&&$videoLink.children(".koh-video-title").text(videoTitle)}})})})},resizeResponsiveVideo=function($videoElement){var embedTags="iframe, object, embed",aspectRatio=$videoElement.data("aspectratio"),maxWidth=$videoElement.data("maxwidth");aspectRatio&&maxWidth||(makeVideoResponsive($videoElement),aspectRatio=$videoElement.data("aspectratio"),maxWidth=$videoElement.data("maxwidth"));var $parent=$videoElement.closest(":not("+embedTags+")"),responsiveWidth=320;$parent&&(responsiveWidth=$parent.width()),responsiveWidth=Math.min(responsiveWidth,maxWidth),$videoElement.width(responsiveWidth),$videoElement.height(responsiveWidth*aspectRatio)};return{initialize:function(){var $components=$("."+componentClass);initSearchNav($components),initFilterExpandCollapse($components),initRangeSliders($components),initQuickView($components),initTooltips($components),initDropdowns($components),initSearchFacets($components),initSimilarProducts($components),initBackTopButton($components),initBackTopDistance($components),initCatgoryLinks($components),initSpecToggle($components),initArticleVideos($components)},onLoad:function(){loadScrollPosition()}}}(),$(function(){$(document).ready(function(){axKOH.main.productSearch.initialize()}),$(window).on("load",function(){axKOH.main.productSearch.onLoad()})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImMta29oLXByb2R1Y3Qtc2VhcmNoLmpzIl0sIm5hbWVzIjpbImF4S09IIiwibWFpbiIsIm5vVWlTbGlkZXIiLCJwcm9kdWN0U2VhcmNoIiwiY29tcG9uZW50Q2xhc3MiLCJpbml0U2VhcmNoTmF2IiwiJHNlYXJjaENvbnRyb2xzIiwiJCIsImZpcnN0IiwiJHNlYXJjaFNldCIsImNoaWxkcmVuIiwiJG1lbnVCdXR0b24iLCJjbGljayIsImxpc3QiLCJlIiwiJGJ1dHRvbiIsInRoaXMiLCIkbGlzdCIsImRhdGEiLCJoYXNDbGFzcyIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJkb2N1bWVudCIsInRhcmdldCIsImNsb3Nlc3QiLCJsZW5ndGgiLCJpcyIsImluaXRGaWx0ZXJFeHBhbmRDb2xsYXBzZSIsIiRjb21wb25lbnRzIiwiZWFjaCIsIiRjb21wb25lbnQiLCJmaWx0ZXJHcm91cENsYXNzIiwiZmlsdGVyQ2xhc3MiLCIkZmlsdGVycyIsImZpbmQiLCIkZmlsdGVyTmFtZSIsIiRmaWx0ZXJDb250ZW50IiwiJHRhcmdldCIsIiRmaWx0ZXJCdXR0b24iLCJpbml0UmFuZ2VTbGlkZXJzIiwiJHJhbmdlRmlsdGVycyIsIiRyYW5nZUZpbHRlciIsIiRzbGlkZXJDb250YWluZXIiLCIkcmFuZ2VMYWJlbHMiLCIkcmFuZ2VNaW5MYWJlbCIsIiRyYW5nZU1heExhYmVsIiwiJHNsaWRlciIsInNsaWRlckVsZW1lbnQiLCJyYW5nZUxhYmVsUHJlZml4IiwicmFuZ2VMYWJlbFN1ZmZpeCIsInJhbmdlQ3VycmVudE1pbiIsInJhbmdlQ3VycmVudE1heCIsInJhbmdlTWluIiwicmFuZ2VNYXgiLCJpc05hTiIsImNyZWF0ZSIsInN0YXJ0IiwiY29ubmVjdCIsInJhbmdlIiwibWluIiwibWF4IiwiZm9ybWF0IiwidG8iLCJ2YWx1ZSIsIk1hdGgiLCJyb3VuZCIsImZyb20iLCJvbiIsInZhbHVlcyIsImhhbmRsZUluZGV4IiwidGV4dCIsImhpZGUiLCJpbml0UXVpY2tWaWV3IiwiY29tcG9uZW50SW5kZXgiLCIkcXVpY2tWaWV3Q29udGFpbmVycyIsInF1aWNrVmlld0luZGV4IiwiJHBhbmVsIiwicmVtb2RhbElEIiwiaW5pdEFzTW9kYWwiLCJpbml0UXVpY2tWaWV3RGF0YSIsImluaXRUb29sdGlwcyIsIiRjb21wb25lbnRNb2RhbHMiLCIkdGFyZ2V0cyIsImFkZCIsIiRhYmJyZXZpYXRpb25zIiwiYWJickluZGV4IiwiJGFiYnIiLCJxdGlwIiwiaWQiLCJjb250ZW50IiwiYXR0ciIsInBvc2l0aW9uIiwibXkiLCJhdCIsInN0eWxlIiwiY2xhc3NlcyIsInRpcCIsIm1pbWljIiwid2lkdGgiLCJoZWlnaHQiLCIkY29sb3JTd2F0Y2hlcyIsInN3YXRjaEluZGV4IiwiJGNvbG9yU3dhdGNoIiwiJGNvbG9yTGFiZWwiLCJjbG9uZSIsImFkanVzdCIsInkiLCIkZmFjZXRzV2l0aFRvb2x0aXBzIiwiaGFzIiwiZmFjZXRJbmRleCIsIiRmYWNldCIsIiRmYWNldE5hbWUiLCIkZmFjZXRUb29sdGlwIiwiYXBwZW5kIiwiJHRvb2x0aXBJY29uIiwic2hvdyIsImV2ZW50IiwieCIsInN0b3BQcm9wYWdhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiaW5pdERyb3Bkb3ducyIsIiRvcHRpb25zIiwiJG9wdGlvbnNCdXR0b24iLCIkb3B0aW9uc0xpc3QiLCJpbml0U2ltaWxhclByb2R1Y3RzIiwiJHByb2R1Y3RUaWxlcyIsIiRwcm9kdWN0TGluayIsInNpbWlsYXJQcm9kdWN0cyIsIm1pbnV0ZXMiLCJleHBpcmVzIiwiRGF0ZSIsInNldFRpbWUiLCJnZXRUaW1lIiwiY29va2llIiwidG9VVENTdHJpbmciLCJpbml0U2VhcmNoRmFjZXRzIiwiJHNvcnRCdXR0b24iLCIkc29ydE9wdGlvbnMiLCIkc29ydE9wdGlvbkl0ZW1zIiwiJHNvcnRPcHRpb25JdGVtIiwiYnV0dG9uIiwiY29sbGVjdGlvbiIsImNob2ljZXMiLCJzZXRBY3RpdmVTb3J0aW5nIiwiZGlzcGxheU5ld1Jlc3VsdHMiLCIkY2F0ZWdvcmllcyIsIiRzZWxlY3RlZEZpbHRlcnMiLCIkc2VsZWN0ZWRGaWx0ZXJJdGVtcyIsIiRmaWx0ZXJJdGVtIiwiJGZpbHRlckl0ZW1CdXR0b24iLCJmaWx0ZXJDb3VudCIsImZpbHRlclNldCIsImZpbHRlckl0ZW0iLCJyZW1vdmUiLCIkc2hvd0FsbENhdHMiLCIkZmlsdGVyIiwiJGF2YWlsYWJsZUZpbHRlcnMiLCIkY2hlY2tib3giLCJmYWNldE5hbWUiLCJtaW5WYWx1ZSIsIm1heFZhbHVlIiwiZmFjZXRWYWx1ZSIsImFkZEFjdGl2ZUZpbHRlciIsIiRmaWx0ZXJMaW5rIiwiZmFjZXRMYWJlbCIsImZhY2V0Q291bnQiLCIkY2xlYXJBbGxGaWx0ZXJzIiwiZ2V0VHlwZSIsInR5cGUiLCJnZXRTZWFyY2hUZXJtIiwic2VhcmNoVGVybSIsImdldEN1cnJlbnRQYWdlIiwiY3VycmVudFBhZ2UiLCJnZXRBY3RpdmVDYXRlZ29yeSIsImNhdGVnb3J5TmFtZSIsIiRhY3RpdmVDYXRlZ29yeSIsImdldEFjdGl2ZUZpbHRlcnMiLCJmYWNldE5hbWVGaWVsZCIsImZhY2V0VmFsdWVGaWVsZCIsImFjdGl2ZUZpbHRlcnMiLCJzcGxpdCIsIk1pbiIsIk1heCIsImluZGV4IiwiZ2V0VXJsZnJvbUFjdGl2ZUZpbHRlcnMiLCJ1cmwiLCJmYWNldFZhbHVlcyIsInBhcmFtTmFtZSIsInF1ZXJ5UGFyYW1zIiwicXVlcnlQYXJhbUNvdW50IiwiZ2V0QWN0aXZlU29ydGluZyIsInNvcnRPcHRpb25zIiwib3JkZXJCeSIsImRpcmVjdGlvbiIsImxhYmVscyIsIiRhY3RpdmVTb3J0IiwiJHRhcmdldE9wdGlvbiIsIiRmaWx0ZXJMaXN0IiwiaW5zZXJ0QmVmb3JlIiwid3JhcElubmVyIiwiZ2V0VVJMIiwiZXhjbHVkZUNhdGVnb3J5IiwiZXhjbHVkZUZpbHRlcnMiLCJ1cmxSb290IiwidXJsRmlsdGVycyIsImtleSIsInJlcGxhY2UiLCJjdXJyZW50VXJsIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwidGFyZ2V0VXJsIiwic2F2ZVNjcm9sbFBvc2l0aW9uIiwicHJlcGVuZCIsIiRyZW1vZGFsUGFuZWwiLCJyZW1vZGFsIiwiaGFzaFRyYWNraW5nIiwiY2xvc2VPbkNhbmNlbCIsImNsb3NlT25Fc2NhcGUiLCJjbG9zZU9uT3V0c2lkZUNsaWNrIiwibW9kaWZpZXIiLCJvcGVuIiwiJHByaW1hcnlCYW5uZXIiLCIkcHJvZHVjdENvbnRlbnQiLCIkcHJvZHVjdFNLVSIsIiRwcm9kdWN0UHJpY2VzIiwiJGNvbG9yQ29sbGVjdGlvbnMiLCIkY29sb3JDb2xsZWN0aW9uIiwiJHNlbGVjdGVkQ29sb3JMYWJlbCIsIiRjb2xvclZhcmlhbnRzIiwiJGNvbG9yVmFyaWFudCIsInByb2R1Y3REYXRhIiwiaW1hZ2VVUkwiLCJza3UiLCJwcmljZXMiLCJjb2xvck5hbWUiLCJwcm9kdWN0RmllbGRzIiwiYmFubmVyIiwiY29sb3IiLCJ2YXJpYW50U2V0IiwidmFyaWFudCIsInByb2R1Y3QiLCJmaWVsZHMiLCIkdmFyaWFudCIsIiR2YXJpYW50U2V0IiwiY3VycmVudCIsInByZXZpb3VzIiwiZGlzY291bnRlZCIsImxvYWRTY3JvbGxQb3NpdGlvbiIsInNjcm9sbFBvc2l0aW9uIiwic2Vzc2lvblN0b3JhZ2UiLCJnZXRJdGVtIiwidXRpbHMiLCJkZWJ1Z0xvZyIsInNjcm9sbFRvcCIsInJlbW92ZUl0ZW0iLCJzZXRJdGVtIiwiaW5pdEJhY2tUb3BCdXR0b24iLCJ0b3BCdXR0b24iLCJ0b3BUYXJnZXQiLCJhbmltYXRlIiwib2Zmc2V0IiwidG9wIiwiaW5pdEJhY2tUb3BEaXN0YW5jZSIsInRvcERpc3RhbmNlIiwic2Nyb2xsIiwiZmFkZUluIiwiZmFkZU91dCIsImluaXRDYXRnb3J5TGlua3MiLCIkc2VhcmNoVGVybSIsInNlYXJjaCIsInNsaWNlIiwiJGNhdGVnb3J5TGlua3MiLCIkY2F0ZWdvcnlOYW1lIiwiJGNhdGVnb3J5VmFsdWUiLCIkY2F0ZWdvcnlVUkwiLCJpbml0U3BlY1RvZ2dsZSIsInNwZWNUb2dnbGUiLCJuZXh0IiwidG9nZ2xlIiwidG9nZ2xlQ2xhc3MiLCJpbml0QXJ0aWNsZVZpZGVvcyIsIiR2aWRlb0xpbmtzIiwidmlkZW9JbmRleCIsIiR2aWRlb0xpbmsiLCJ2aWRlb1VSTCIsImFwaVVSTCIsIiR2aWRlb1BhbmVsIiwiaW5zZXJ0QWZ0ZXIiLCIkZW1iZWRkZWRWaWRlbyIsInJlc2l6ZVJlc3BvbnNpdmVWaWRlbyIsImdldCIsIml0ZW1zIiwic25pcHBldCIsInZpZGVvVGl0bGUiLCJ0aXRsZSIsIiR2aWRlb0VsZW1lbnQiLCJlbWJlZFRhZ3MiLCJhc3BlY3RSYXRpbyIsIm1heFdpZHRoIiwibWFrZVZpZGVvUmVzcG9uc2l2ZSIsIiRwYXJlbnQiLCJyZXNwb25zaXZlV2lkdGgiLCJpbml0aWFsaXplIiwib25Mb2FkIiwicmVhZHkiXSwibWFwcGluZ3MiOiI7OztBQUlBLEdBQUlBLE9BQVFBLFNBQ1pBLE9BQU1DLEtBQU9ELE1BQU1DLFFBRW5CLElBQUlDLFlBQWFBLFlBQWMsSUFFL0JGLE9BQU1DLEtBQUtFLGNBQWdCLFdBQzFCLEdBQUlDLGdCQUFpQix1QkFHakJDLGNBQWdCLFdBRW5CLEdBQUlDLGlCQUFrQkMsRUFBRSx3QkFBd0JDLFFBQzVDQyxXQUFhSCxnQkFBZ0JJLFNBQVMsbUJBQW1CRixRQUV6REcsWUFBY0wsZ0JBQWdCSSxTQUFTLHNCQUFzQkYsT0FDakVHLGFBQVlDLE9BQVNDLEtBQU1KLFlBQWMsU0FBU0ssR0FDakQsR0FBSUMsU0FBVVIsRUFBRVMsTUFDWkMsTUFBUUgsRUFBRUksS0FBS0wsSUFFZEUsU0FBUUksU0FBUyxTQUNyQkosUUFBUUssWUFBWSxRQUNwQkgsTUFBTUcsWUFBWSxVQUdsQkwsUUFBUU0sU0FBUyxRQUNqQkosTUFBTUksU0FBUyxXQUlqQmQsRUFBRWUsVUFBVVYsT0FBU1csT0FBUVosWUFBYUUsS0FBTUosWUFBYyxTQUFTSyxHQUN0RSxHQUFJQyxTQUFVRCxFQUFFSSxLQUFLSyxPQUNqQk4sTUFBUUgsRUFBRUksS0FBS0wsSUFFZE4sR0FBRU8sRUFBRVMsUUFBUUMsUUFBUVQsU0FB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QndSLGNBQWdCQyxXQUNyQkMsb0JBQXFCSixlQUNyQkUsWUFBY0YsY0FBY3RSLEtBQUssZUFDakN5UixTQUFXSCxjQUFjdFIsS0FBSyxZQUcvQixJQUFJMlIsU0FBVUwsY0FBY2hSLFFBQVEsUUFBUWlSLFVBQVUsS0FFbERLLGdCQUFrQixHQUNqQkQsV0FDSkMsZ0JBQWtCRCxRQUFRM00sU0FHM0I0TSxnQkFBa0I5TyxLQUFLTCxJQUFJbVAsZ0JBQWlCSCxVQUU1Q0gsY0FBY3RNLE1BQU80TSxpQkFDckJOLGNBQWNyTSxPQUFRMk0sZ0JBQWtCSixhQUl6QyxRQUNDSyxXQUFZLFdBQ1gsR0FBSW5SLGFBQWNyQixFQUFFLElBQUlILGVBR3hCQyxlQUFjdUIsYUFHZEQseUJBQXlCQyxhQUd6QlcsaUJBQWlCWCxhQUdqQjRDLGNBQWM1QyxhQUdkb0QsYUFBYXBELGFBR2I0RixjQUFjNUYsYUFHZDJHLGlCQUFpQjNHLGFBR2pCZ0csb0JBQW9CaEcsYUFHcEJxTyxrQkFBa0JyTyxhQUdsQjJPLG9CQUFvQjNPLGFBR3BCZ1AsaUJBQWlCaFAsYUFHakJ3UCxlQUFleFAsYUFHZjZQLGtCQUFrQjdQLGNBR25Cb1IsT0FBUSxXQUNQeEQsMEJBS0hqUCxFQUFFLFdBQ0RBLEVBQUVlLFVBQVUyUixNQUFNLFdBRWpCalQsTUFBTUMsS0FBS0UsY0FBYzRTLGVBRzFCeFMsRUFBRXlNLFFBQVE3SSxHQUFHLE9BQVEsV0FDcEJuRSxNQUFNQyxLQUFLRSxjQUFjNlMiLCJmaWxlIjoiYy1rb2gtcHJvZHVjdC1zZWFyY2gubWluLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCDCqSAyMDAwLTIwMTcgS29obGVyIENvbXBhbnkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKi9cblxudmFyIGF4S09IID0gYXhLT0ggfHwge307XG5heEtPSC5tYWluID0gYXhLT0gubWFpbiB8fCB7fTtcblxudmFyIG5vVWlTbGlkZXIgPSBub1VpU2xpZGVyIHx8IG51bGw7XG5cbmF4S09ILm1haW4ucHJvZHVjdFNlYXJjaCA9IChmdW5jdGlvbiAoKSB7XG5cdHZhciBjb21wb25lbnRDbGFzcyA9IFwiYy1rb2gtcHJvZHVjdC1zZWFyY2hcIjtcblxuXHQvLyBPcHRpb25hbCBzZWFyY2ggbmF2aWdhdGlvblxuXHR2YXIgaW5pdFNlYXJjaE5hdiA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHZhciAkc2VhcmNoQ29udHJvbHMgPSAkKFwiLmtvaC1zZWFyY2gtY29udHJvbHNcIikuZmlyc3QoKTtcblx0XHR2YXIgJHNlYXJjaFNldCA9ICRzZWFyY2hDb250cm9scy5jaGlsZHJlbihcIi5rb2gtc2VhcmNoLXNldFwiKS5maXJzdCgpO1xuXG5cdFx0dmFyICRtZW51QnV0dG9uID0gJHNlYXJjaENvbnRyb2xzLmNoaWxkcmVuKFwiLmtvaC1zZWFyY2gtc2VsZWN0XCIpLmZpcnN0KCk7XG5cdFx0JG1lbnVCdXR0b24uY2xpY2soIHsgbGlzdDogJHNlYXJjaFNldCB9LCBmdW5jdGlvbihlKSB7XG5cdFx0XHR2YXIgJGJ1dHRvbiA9ICQodGhpcyk7XG5cdFx0XHR2YXIgJGxpc3QgPSBlLmRhdGEubGlzdDtcblxuXHRcdFx0aWYgKCAkYnV0dG9uLmhhc0NsYXNzKFwib3BlblwiKSApIHtcblx0XHRcdFx0JGJ1dHRvbi5yZW1vdmVDbGFzcyhcIm9wZW5cIik7XG5cdFx0XHRcdCRsaXN0LnJlbW92ZUNsYXNzKFwib3BlblwiKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHQkYnV0dG9uLmFkZENsYXNzKFwib3BlblwiKTtcblx0XHRcdFx0JGxpc3QuYWRkQ2xhc3MoXCJvcGVuXCIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0JChkb2N1bWVudCkuY2xpY2soIHsgdGFyZ2V0OiAkbWVudUJ1dHRvbiwgbGlzdDogJHNlYXJjaFNldCB9LCBmdW5jdGlvbihlKSB7XG5cdFx0XHR2YXIgJGJ1dHRvbiA9IGUuZGF0YS50YXJnZXQ7XG5cdFx0XHR2YXIgJGxpc3QgPSBlLmRhdGEubGlzdDtcblxuXHRcdFx0aWYoICEkKGUudGFyZ2V0KS5jbG9zZXN0KCRidXR0b24pLmxlbmd0aCAmJiAhJChlLnRhcmdldCkuaXMoJGJ1dHRvbikgKSB7XG5cdFx0XHRcdGlmICggJGJ1dHRvbi5oYXNDbGFzcyhcIm9wZW5cIikgKSB7XG5cdFx0XHRcdFx0JGJ1dHRvbi5yZW1vdmVDbGFzcyhcIm9wZW5cIik7XG5cdFx0XHRcdFx0JGxpc3QucmVtb3ZlQ2xhc3MoXCJvcGVuXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0fTtcblxuXHQvLyBGaWx0ZXIgZXhwYW5kL2NvbGxhcHNlXG5cdHZhciBpbml0RmlsdGVyRXhwYW5kQ29sbGFwc2UgPSBmdW5jdGlvbiAoJGNvbXBvbmVudHMpIHtcblx0XHRpZiAoICRjb21wb25lbnRzICkge1xuXHRcdFx0JGNvbXBvbmVudHMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciAkY29tcG9uZW50ID0gJCh0aGlzKTtcblxuXHRcdFx0XHR2YXIgZmlsdGVyR3JvdXBDbGFzcyA9IFwiLmtvaC1maWx0ZXItZ3JvdXAua29oLWZpbHRlcnNcIjtcblx0XHRcdFx0dmFyIGZpbHRlckNsYXNzID0gXCIua29oLWZpbHRlclwiO1xuXG5cdFx0XHRcdHZhciAkZmlsdGVycyA9ICRjb21wb25lbnQuZmluZChmaWx0ZXJHcm91cENsYXNzKS5jaGlsZHJlbihmaWx0ZXJDbGFzcyk7XG5cdFx0XHRcdCRmaWx0ZXJzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZhciAkZmlsdGVyTmFtZSA9ICQodGhpcykuY2hpbGRyZW4oXCIua29oLWZpbHRlci1uYW1lXCIpLmZpcnN0KCk7XG5cdFx0XHRcdFx0dmFyICRmaWx0ZXJDb250ZW50ID0gJCh0aGlzKS5jaGlsZHJlbihcIi5rb2gtZmlsdGVyLWNvbnRlbnRcIikuZmlyc3QoKTtcblxuXHRcdFx0XHRcdCRmaWx0ZXJOYW1lLmNsaWNrKCB7IHRhcmdldDogJGZpbHRlckNvbnRlbnQgfSwgZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRcdFx0dmFyICR0YXJnZXQgPSBlLmRhdGEudGFyZ2V0O1xuXHRcdFx0XHRcdFx0aWYgKCAkdGFyZ2V0Lmhhc0NsYXNzKFwib3BlblwiKSApIHtcblx0XHRcdFx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcyhcIm9wZW5cIik7XG5cdFx0XHRcdFx0XHRcdCR0YXJnZXQucmVtb3ZlQ2xhc3MoXCJvcGVuXCIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCQodGhpcykuYWRkQ2xhc3MoXCJvcGVuXCIpO1xuXHRcdFx0XHRcdFx0XHQkdGFyZ2V0LmFkZENsYXNzKFwib3BlblwiKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Ly8gQWxzbywgdGhlIG1haW4gYnV0dG9uIG5lZWRzIG9uZVxuXHRcdFx0XHR2YXIgJGZpbHRlckJ1dHRvbiA9ICRjb21wb25lbnQuZmluZChcIi5rb2gtc2VhcmNoLWZpbHRlcnMtdGl0bGVcIik7XG5cdFx0XHRcdHZhciAkZmlsdGVyQ29udGVudCA9ICRjb21wb25lbnQuZmluZChcIi5rb2gtc2VhcmNoLWZpbHRlcnMtY29udGVudFwiKTtcblx0XHRcdFx0JGZpbHRlckJ1dHRvbi5jbGljayggeyB0YXJnZXQ6ICRmaWx0ZXJDb250ZW50IH0sIGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0XHR2YXIgJHRhcmdldCA9IGUuZGF0YS50YXJnZXQ7XG5cdFx0XHRcdFx0aWYgKCAkdGFyZ2V0Lmhhc0NsYXNzKFwib3BlblwiKSApIHtcblx0XHRcdFx0XHRcdCR0YXJnZXQucmVtb3ZlQ2xhc3MoXCJvcGVuXCIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdCR0YXJnZXQuYWRkQ2xhc3MoXCJvcGVuXCIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cblx0Ly8gUmFuZ2UgZmlsdGVyIHNsaWRlcnNcblx0dmFyIGluaXRSYW5nZVNsaWRlcnMgPSBmdW5jdGlvbiAoJGNvbXBvbmVudHMpIHtcblx0XHRpZiAoICRjb21wb25lbnRzICkge1xuXHRcdFx0JGNvbXBvbmVudHMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciAkY29tcG9uZW50ID0gJCh0aGlzKTtcblx0XHRcdFx0dmFyICRyYW5nZUZpbHRlcnMgPSAkY29tcG9uZW50LmZpbmQoXCIua29oLWZpbHRlci5rb2gtZmlsdGVyLXR5cGUtcmFuZ2VcIik7XG5cblx0XHRcdFx0JHJhbmdlRmlsdGVycy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHR2YXIgJHJhbmdlRmlsdGVyID0gJCh0aGlzKTtcblxuXHRcdFx0XHRcdHZhciAkc2xpZGVyQ29udGFpbmVyID0gJHJhbmdlRmlsdGVyLmZpbmQoXCIua29oLXJhbmdlLWZpbHRlclwiKS5maXJzdCgpO1xuXG5cdFx0XHRcdFx0dmFyICRyYW5nZUxhYmVscyA9ICRzbGlkZXJDb250YWluZXIuZmluZChcIi5rb2gtcmFuZ2Utc2xpZGVyLWxhYmVsc1wiKTtcblx0XHRcdFx0XHR2YXIgJHJhbmdlTWluTGFiZWwgPSAkc2xpZGVyQ29udGFpbmVyLmZpbmQoXCIua29oLXJhbmdlLXNsaWRlci1sYWJlbHMgPiAua29oLXJhbmdlLXNsaWRlci1taW5cIik7XG5cdFx0XHRcdFx0dmFyICRyYW5nZU1heExhYmVsID0gJHNsaWRlckNvbnRhaW5lci5maW5kKFwiLmtvaC1yYW5nZS1zbGlkZXItbGFiZWxzID4gLmtvaC1yYW5nZS1zbGlkZXItbWF4XCIpO1xuXG5cdFx0XHRcdFx0dmFyICRzbGlkZXIgPSAkc2xpZGVyQ29udGFpbmVyLmZpbmQoXCIua29oLXJhbmdlLXNsaWRlclwiKS5maXJzdCgpO1xuXHRcdFx0XHRcdHZhciBzbGlkZXJFbGVtZW50ID0gJHNsaWRlclswXTtcblxuXHRcdFx0XHRcdHZhciByYW5nZUxhYmVsUHJlZml4ID0gJHJhbmdlTGFiZWxzLmRhdGEoXCJsYWJlbC1wcmVmaXhcIik7XG5cdFx0XHRcdFx0dmFyIHJhbmdlTGFiZWxTdWZmaXggPSAkcmFuZ2VMYWJlbHMuZGF0YShcImxhYmVsLXN1ZmZpeFwiKTtcblx0XHRcdFx0XHR2YXIgcmFuZ2VDdXJyZW50TWluID0gJHJhbmdlTWluTGFiZWwuZGF0YShcIm1pbi12YWx1ZVwiKTtcblx0XHRcdFx0XHR2YXIgcmFuZ2VDdXJyZW50TWF4ID0gJHJhbmdlTWF4TGFiZWwuZGF0YShcIm1heC12YWx1ZVwiKTtcblx0XHRcdFx0XHR2YXIgcmFuZ2VNaW4gPSAkc2xpZGVyLmRhdGEoXCJyYW5nZS1taW5cIik7XG5cdFx0XHRcdFx0dmFyIHJhbmdlTWF4ID0gJHNsaWRlci5kYXRhKFwicmFuZ2UtbWF4XCIpO1xuXG5cdFx0XHRcdFx0Lyogbm9VSVNsaWRlciBkb2VzIG5vdCBsaWtlIGhhdmluZyByYW5nZU1pbiBhbmQgcmFuZ2VNYXggdGhlIHNhbWUsIHNvIGNoZWNrIGZvciB0aGF0ICovXG5cdFx0XHRcdFx0aWYgKCBub1VpU2xpZGVyICYmICFpc05hTihyYW5nZU1pbikgJiYgIWlzTmFOKHJhbmdlTWF4KSAmJiAocmFuZ2VNaW4gPCByYW5nZU1heCkgKSB7XG5cdFx0XHRcdFx0XHRub1VpU2xpZGVyLmNyZWF0ZShzbGlkZXJFbGVtZW50LCB7XG5cdFx0XHRcdFx0XHRcdHN0YXJ0OiBbcmFuZ2VDdXJyZW50TWluLCByYW5nZUN1cnJlbnRNYXhdLFxuXHRcdFx0XHRcdFx0XHRjb25uZWN0OiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRyYW5nZToge1xuXHRcdFx0XHRcdFx0XHRcdCdtaW4nOiByYW5nZU1pbixcblx0XHRcdFx0XHRcdFx0XHQnbWF4JzogcmFuZ2VNYXhcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0Zm9ybWF0OiB7XG5cdFx0XHRcdFx0XHRcdFx0dG86IGZ1bmN0aW9uICggdmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRmcm9tOiBmdW5jdGlvbiAoIHZhbHVlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdHNsaWRlckVsZW1lbnQubm9VaVNsaWRlci5vbigndXBkYXRlJywgZnVuY3Rpb24odmFsdWVzLCBoYW5kbGVJbmRleCl7XG5cdFx0XHRcdFx0XHRcdGlmICggaGFuZGxlSW5kZXggPT09IDAgKSB7XG5cdFx0XHRcdFx0XHRcdFx0JHJhbmdlTWluTGFiZWwuZGF0YShcIm1pbi12YWx1ZVwiLHZhbHVlc1toYW5kbGVJbmRleF0pO1xuXHRcdFx0XHRcdFx0XHRcdCRyYW5nZU1pbkxhYmVsLnRleHQocmFuZ2VMYWJlbFByZWZpeCt2YWx1ZXNbaGFuZGxlSW5kZXhdK3JhbmdlTGFiZWxTdWZmaXgpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGVsc2UgaWYgKCBoYW5kbGVJbmRleCA9PT0gMSApIHtcblx0XHRcdFx0XHRcdFx0XHQkcmFuZ2VNYXhMYWJlbC5kYXRhKFwibWF4LXZhbHVlXCIsdmFsdWVzW2hhbmRsZUluZGV4XSk7XG5cdFx0XHRcdFx0XHRcdFx0JHJhbmdlTWF4TGFiZWwudGV4dChyYW5nZUxhYmVsUHJlZml4K3ZhbHVlc1toYW5kbGVJbmRleF0rcmFuZ2VMYWJlbFN1ZmZpeCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0gLy8gZW5kIGNoZWNrcyBiZWZvcmUgaW5pdGlhbGl6aW5nIHNsaWRlclxuXHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gTGV0J3MgaGlkZSB0aGUgc2xpZGVyIGlmIGl0IGNhbid0IGJlIGluaXRpYWxpemVkIGZvciBzb21lIHJlYXNvblxuXHRcdFx0XHRcdFx0c2xpZGVyRWxlbWVudC5oaWRlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcblxuXHQvLyBRdWljayBWaWV3XG5cdHZhciBpbml0UXVpY2tWaWV3ID0gZnVuY3Rpb24gKCRjb21wb25lbnRzKSB7XG5cdFx0aWYgKCAkY29tcG9uZW50cyApIHtcblx0XHRcdCRjb21wb25lbnRzLmVhY2goIGZ1bmN0aW9uKGNvbXBvbmVudEluZGV4KSB7XG5cdFx0XHRcdHZhciAkY29tcG9uZW50ID0gJCh0aGlzKTtcblxuXHRcdFx0XHQvLyBGaW5kIHRoZSBxdWljayB2aWV3IGJsb2Nrcywgd2hpY2ggaGF2ZSB0aGUgYnV0dG9ucyBhbmQgcGFuZWxzXG5cdFx0XHRcdHZhciAkcXVpY2tWaWV3Q29udGFpbmVycyA9ICRjb21wb25lbnQuZmluZChcIi5rb2gtcHJvZHVjdC1xdWljay12aWV3XCIpO1xuXG5cdFx0XHRcdC8vIEZvciBlYWNoIHF1aWNrIHZpZXcsIG1ha2UgdGhlIHBhbmVsIG1vZGFsIGFuZCBob29rIGl0IHRvIHRoZSBidXR0b25cblx0XHRcdFx0JHF1aWNrVmlld0NvbnRhaW5lcnMuZWFjaCggZnVuY3Rpb24ocXVpY2tWaWV3SW5kZXgpIHtcblx0XHRcdFx0XHR2YXIgJGJ1dHRvbiA9ICQodGhpcykuY2hpbGRyZW4oXCIua29oLXByb2R1Y3QtcXVpY2stdmlldy1idXR0b25cIik7XG5cdFx0XHRcdFx0dmFyICRwYW5lbCA9ICQodGhpcykuY2hpbGRyZW4oXCIua29oLXByb2R1Y3QtcXVpY2stdmlldy1wYW5lbFwiKTtcblxuXHRcdFx0XHRcdC8vIENhbGN1bGF0ZSB0aGUgcmVtb2RhbCBJRCB2YWx1ZSBhbmQgaG9vayB0aGluZ3MgdXBcblx0XHRcdFx0XHR2YXIgcmVtb2RhbElEID0gXCJRdWlja1ZpZXdcIitjb21wb25lbnRJbmRleCtxdWlja1ZpZXdJbmRleDtcblxuXHRcdFx0XHRcdGluaXRBc01vZGFsKCAkYnV0dG9uLCAkcGFuZWwsIHJlbW9kYWxJRCApO1xuXG5cdFx0XHRcdFx0JHBhbmVsLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aW5pdFF1aWNrVmlld0RhdGEoICQodGhpcykgKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cblx0Ly8gVG9vbHRpcHNcblx0dmFyIGluaXRUb29sdGlwcyA9IGZ1bmN0aW9uICgkY29tcG9uZW50cykge1xuXHRcdGlmICggJGNvbXBvbmVudHMgKSB7XG5cdFx0XHQvLyBOZWVkIHRvIGluaXRpYWxpemUgdG9vbHRpcHMgaW4gbW9kYWxzIGFzIHdlbGxcblx0XHRcdHZhciAkY29tcG9uZW50TW9kYWxzID0gJCgnLnJlbW9kYWwtd3JhcHBlciA+IGRpdltkYXRhLWtvaC1jb21wb25lbnQ9XCInK2NvbXBvbmVudENsYXNzKydcIl0nKTtcblxuXHRcdFx0Ly8gTWVyZ2UgbGlzdHMgb2YgY29tcG9uZW50cyBhbmQgY29tcG9uZW50LXJlbGF0ZWQgbW9kYWxzXG5cdFx0XHR2YXIgJHRhcmdldHMgPSAkY29tcG9uZW50cy5hZGQoICRjb21wb25lbnRNb2RhbHMgKTtcblxuXHRcdFx0Ly8gTG9vcHMgdGhyb3VnaCBjb21wb25lbnRzIGFuZCBjb21wb25lbnQtcmVsYXRlZCBtb2RhbHNcblx0XHRcdCR0YXJnZXRzLmVhY2goIGZ1bmN0aW9uKGNvbXBvbmVudEluZGV4KSB7XG5cdFx0XHRcdHZhciAkY29tcG9uZW50ID0gJCh0aGlzKTtcblxuXHRcdFx0XHQvLyBTZXQgdXAgdG9vbHRpcHMgb24gYWJicmV2aWF0aW9uc1xuXHRcdFx0XHR2YXIgJGFiYnJldmlhdGlvbnMgPSAkY29tcG9uZW50LmZpbmQoXCJhYmJyW3RpdGxlXVwiKTtcblx0XHRcdFx0JGFiYnJldmlhdGlvbnMuZWFjaCggZnVuY3Rpb24oYWJickluZGV4KSB7XG5cdFx0XHRcdFx0dmFyICRhYmJyID0gJCh0aGlzKTtcblx0XHRcdFx0XHQkYWJici5xdGlwKHtcblx0XHRcdFx0XHRcdGlkOiBcImFiYnJcIitjb21wb25lbnRJbmRleCthYmJySW5kZXgsXG5cdFx0XHRcdFx0XHRjb250ZW50OiB7IGF0dHI6ICd0aXRsZScgfSxcblx0XHRcdFx0XHRcdHBvc2l0aW9uOiB7XG5cdFx0XHRcdFx0XHRcdG15OiAnYm90dG9tIGNlbnRlcicsICAvLyBQb3NpdGlvbiBteSB0b3AgbGVmdC4uLlxuXHRcdFx0XHRcdFx0XHRhdDogJ3RvcCBjZW50ZXInIC8vIGF0IHRoZSBib3R0b20gcmlnaHQgb2YuLi5cblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdFx0XHRjbGFzc2VzOiAna29oLXF0aXAtdG9vbHRpcCBrb2gtcHJvZHVjdC1zZWFyY2gtdG9vbHRpcCBxdGlwLWJvb3RzdHJhcCcsXG5cdFx0XHRcdFx0XHRcdHRpcDoge1xuXHRcdFx0XHRcdFx0XHRcdG1pbWljOiAnY2VudGVyJyxcblx0XHRcdFx0XHRcdFx0XHR3aWR0aDogMzAsXG5cdFx0XHRcdFx0XHRcdFx0aGVpZ2h0OiAxNVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdC8vIFNldCB1cCB0b29sdGlwcyBvbiBjb2xvciBzd2F0Y2hlc1xuXHRcdFx0XHR2YXIgJGNvbG9yU3dhdGNoZXMgPSAkY29tcG9uZW50LmZpbmQoXCJidXR0b24ua29oLXByb2R1Y3QtY29sb3IsIC5rb2gtYXZhaWxhYmxlLWZpbHRlcnMudi1rb2gtY29sb3JzID4gbGkgPiBhXCIpO1xuXHRcdFx0XHQkY29sb3JTd2F0Y2hlcy5lYWNoKCBmdW5jdGlvbihzd2F0Y2hJbmRleCkge1xuXHRcdFx0XHRcdHZhciAkY29sb3JTd2F0Y2ggPSAkKHRoaXMpO1xuXHRcdFx0XHRcdHZhciAkY29sb3JMYWJlbCA9ICRjb2xvclN3YXRjaC5jaGlsZHJlbihcIi5sYWJlbFwiKTtcblxuXHRcdFx0XHRcdCRjb2xvclN3YXRjaC5xdGlwKHtcblx0XHRcdFx0XHRcdGlkOiBcInN3YXRjaFwiK2NvbXBvbmVudEluZGV4K3N3YXRjaEluZGV4LFxuXHRcdFx0XHRcdFx0Y29udGVudDogeyB0ZXh0OiAkY29sb3JMYWJlbC5jbG9uZSgpIH0sXG5cdFx0XHRcdFx0XHRwb3NpdGlvbjoge1xuXHRcdFx0XHRcdFx0XHRteTogJ3RvcCBsZWZ0JywgIC8vIFBvc2l0aW9uIG15IHRvcCBsZWZ0Li4uXG5cdFx0XHRcdFx0XHRcdGF0OiAnYm90dG9tIGxlZnQnLCAvLyBhdCB0aGUgYm90dG9tIHJpZ2h0IG9mLi4uXG5cdFx0XHRcdFx0XHRcdGFkanVzdDoge1xuXHRcdFx0XHRcdFx0XHRcdHk6IDZcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0XHRcdGNsYXNzZXM6ICdrb2gtcXRpcC10b29sdGlwIGtvaC1wcm9kdWN0LXNlYXJjaC10b29sdGlwIHF0aXAtYm9vdHN0cmFwJyxcblx0XHRcdFx0XHRcdFx0dGlwOiBmYWxzZVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvLyBTZXQgdXAgc3BlY2lhbCBmYWNldCB0b29sdGlwc1xuXHRcdFx0XHR2YXIgJGZhY2V0c1dpdGhUb29sdGlwcyA9ICRjb21wb25lbnQuZmluZChcIi5rb2gtZmlsdGVyXCIpLmhhcyhcIi5rb2gtZmlsdGVyLXRvb2x0aXBzXCIpO1xuXHRcdFx0XHQkZmFjZXRzV2l0aFRvb2x0aXBzLmVhY2goIGZ1bmN0aW9uKGZhY2V0SW5kZXgpIHtcblx0XHRcdFx0XHR2YXIgJGZhY2V0ID0gJCh0aGlzKTtcblx0XHRcdFx0XHR2YXIgJGZhY2V0TmFtZSA9ICRmYWNldC5maW5kKFwiLmtvaC1maWx0ZXItbmFtZVwiKTtcblx0XHRcdFx0XHR2YXIgJGZhY2V0VG9vbHRpcCA9ICRmYWNldC5maW5kKFwiLmtvaC1maWx0ZXItdG9vbHRpcHNcIik7XG5cblx0XHRcdFx0XHQkZmFjZXROYW1lLmFwcGVuZChcIjxzcGFuIGNsYXNzPVxcXCJrb2gtdG9vbHRpcFxcXCI+PC9zcGFuPlwiKTtcblx0XHRcdFx0XHR2YXIgJHRvb2x0aXBJY29uID0gJGZhY2V0TmFtZS5jaGlsZHJlbihcIi5rb2gtdG9vbHRpcFwiKTtcblxuXHRcdFx0XHRcdCR0b29sdGlwSWNvbi5xdGlwKHtcblx0XHRcdFx0XHRcdGlkOiBcImZhY2V0VG9vbHRpcFwiK2NvbXBvbmVudEluZGV4K2ZhY2V0SW5kZXgsXG5cdFx0XHRcdFx0XHRjb250ZW50OiB7IHRleHQ6ICRmYWNldFRvb2x0aXAgfSxcblx0XHRcdFx0XHRcdHNob3c6ICdjbGljaycsXG5cdFx0XHRcdFx0XHRoaWRlOiB7IGV2ZW50OiAnY2xpY2sgdW5mb2N1cycgfSxcdC8vIEhpZGUgb24gY2xpY2sgYW55d2hlcmVcblx0XHRcdFx0XHRcdHBvc2l0aW9uOiB7XG5cdFx0XHRcdFx0XHRcdG15OiAnY2VudGVyIGxlZnQnLCAgLy8gUG9zaXRpb24gbXkgdG9wIGxlZnQuLi5cblx0XHRcdFx0XHRcdFx0YXQ6ICdjZW50ZXIgcmlnaHQnLCAvLyBhdCB0aGUgYm90dG9tIHJpZ2h0IG9mLi4uXG5cdFx0XHRcdFx0XHRcdGFkanVzdDoge1xuXHRcdFx0XHRcdFx0XHRcdHg6IDZcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0XHRcdGNsYXNzZXM6ICdrb2gtcXRpcC10b29sdGlwIGtvaC1wcm9kdWN0LXNlYXJjaC1mYWNldC10b29sdGlwIHF0aXAtYm9vdHN0cmFwJyxcblx0XHRcdFx0XHRcdFx0dGlwOiB7XG5cdFx0XHRcdFx0XHRcdFx0bWltaWM6ICdjZW50ZXInLFxuXHRcdFx0XHRcdFx0XHRcdHdpZHRoOiAzMCxcblx0XHRcdFx0XHRcdFx0XHRoZWlnaHQ6IDE1XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vIE5lZWQgdGhpcyB0byBzdG9wIHRoZSB0b29sdGlwIGljb24gZnJvbSBhbHNvIHRyaWdnZXJpbmcgdGhlIG9wZW4vY2xvc2Ugb2YgdGhlIGZpbHRlclxuXHRcdFx0XHRcdCR0b29sdGlwSWNvbi5jbGljayggZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cblx0Ly8gRHJvcGRvd25zXG5cdHZhciBpbml0RHJvcGRvd25zID0gZnVuY3Rpb24gKCRjb21wb25lbnRzKSB7XG5cdFx0aWYgKCAkY29tcG9uZW50cyApIHtcblx0XHRcdCRjb21wb25lbnRzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgJGNvbXBvbmVudCA9ICQodGhpcyk7XG5cblx0XHRcdFx0dmFyICRvcHRpb25zID0gJGNvbXBvbmVudC5maW5kKFwiLmtvaC1zZWFyY2gtc29ydGluZ1wiKTtcblx0XHRcdFx0JG9wdGlvbnMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dmFyICRvcHRpb25zQnV0dG9uID0gJCh0aGlzKS5jaGlsZHJlbihcIi5rb2gtc29ydC1ieVwiKTtcblx0XHRcdFx0XHR2YXIgJG9wdGlvbnNMaXN0ID0gJCh0aGlzKS5jaGlsZHJlbihcIi5rb2gtc29ydC1vcHRpb25zXCIpO1xuXG5cdFx0XHRcdFx0JG9wdGlvbnNCdXR0b24uY2xpY2soIHsgbGlzdDogJG9wdGlvbnNMaXN0IH0sIGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0XHRcdHZhciAkYnV0dG9uID0gJCh0aGlzKTtcblx0XHRcdFx0XHRcdHZhciAkbGlzdCA9IGUuZGF0YS5saXN0O1xuXG5cdFx0XHRcdFx0XHRpZiAoICRidXR0b24uaGFzQ2xhc3MoXCJvcGVuXCIpICkge1xuXHRcdFx0XHRcdFx0XHQkYnV0dG9uLnJlbW92ZUNsYXNzKFwib3BlblwiKTtcblx0XHRcdFx0XHRcdFx0JGxpc3QucmVtb3ZlQ2xhc3MoXCJvcGVuXCIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCRidXR0b24uYWRkQ2xhc3MoXCJvcGVuXCIpO1xuXHRcdFx0XHRcdFx0XHQkbGlzdC5hZGRDbGFzcyhcIm9wZW5cIik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdC8vIENvb2tpZSBoYW5kbGluZyB0byBzdXBwb3J0IFNpbWlpbGFyIFByb2R1Y3RzXG5cdHZhciBpbml0U2ltaWxhclByb2R1Y3RzID0gZnVuY3Rpb24gKCRjb21wb25lbnRzKSB7XG5cdFx0aWYgKCAkY29tcG9uZW50cyApIHtcblx0XHRcdCRjb21wb25lbnRzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgJGNvbXBvbmVudCA9ICQodGhpcyk7XG5cblx0XHRcdFx0dmFyICRwcm9kdWN0VGlsZXMgPSAkY29tcG9uZW50LmZpbmQoXCIua29oLXByb2R1Y3QtdGlsZVwiKTtcblxuXHRcdFx0XHQkcHJvZHVjdFRpbGVzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZhciAkcHJvZHVjdExpbmsgPSAkKHRoaXMpLmZpbmQoXCIua29oLXByb2R1Y3QtdGlsZS1jb250ZW50ID4gYVwiKTtcblxuXHRcdFx0XHRcdC8vIE9uIGNsaWNrLCBzYXZlIHRoZSBzaW1pbGFyIHByb2R1Y3RzIGlkIGxpc3QgZnJvbSB0aGUgZGF0YSBhdHRyaWJ1dGUgaW50byBhIGNvb2tpZVxuXHRcdFx0XHRcdCRwcm9kdWN0TGluay5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0dmFyIHNpbWlsYXJQcm9kdWN0cyA9ICQodGhpcykuZGF0YShcInNpbWlsYXJcIik7XG5cdFx0XHRcdFx0XHRpZiAoIHNpbWlsYXJQcm9kdWN0cyApIHtcblx0XHRcdFx0XHRcdFx0dmFyIG1pbnV0ZXMgPSA1O1xuXHRcdFx0XHRcdFx0XHR2YXIgZXhwaXJlcyA9IG5ldyBEYXRlKCk7XG5cdFx0XHRcdFx0XHRcdGV4cGlyZXMuc2V0VGltZShleHBpcmVzLmdldFRpbWUoKSArIChtaW51dGVzICogNjAgKiAxMDAwKSk7XG5cdFx0XHRcdFx0XHRcdGRvY3VtZW50LmNvb2tpZSA9IFwia29oc2ltcHJvZFwiICsgJz0nICsgc2ltaWxhclByb2R1Y3RzICsgJztleHBpcmVzPScgKyBleHBpcmVzLnRvVVRDU3RyaW5nKCkgKyAnO3BhdGg9Lyc7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdC8qIEZpbHRlcmluZy9Tb3J0aW5nIEZ1bmN0aW9uYWxpdHkgKi9cblx0dmFyIGluaXRTZWFyY2hGYWNldHMgPSBmdW5jdGlvbiAoJGNvbXBvbmVudHMpIHtcblx0XHQkY29tcG9uZW50cy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciAkY29tcG9uZW50ID0gJCh0aGlzKTtcblxuXHRcdFx0Ly8gU2V0IHVwIGNsaWNrIGV2ZW50cyBmb3IgU29ydGluZ1xuXHRcdFx0dmFyICRzb3J0QnV0dG9uID0gJGNvbXBvbmVudC5maW5kKFwiLmtvaC1zZWFyY2gtc29ydGluZyA+IC5rb2gtc29ydC1ieVwiKTtcblx0XHRcdHZhciAkc29ydE9wdGlvbnMgPSAkY29tcG9uZW50LmZpbmQoXCIua29oLXNlYXJjaC1zb3J0aW5nID4gLmtvaC1zb3J0LW9wdGlvbnNcIik7XG5cdFx0XHR2YXIgJHNvcnRPcHRpb25JdGVtcyA9ICRzb3J0T3B0aW9ucy5jaGlsZHJlbihcImxpXCIpO1xuXHRcdFx0JHNvcnRPcHRpb25JdGVtcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyICRzb3J0T3B0aW9uSXRlbSA9ICQodGhpcyk7XG5cdFx0XHRcdCRzb3J0T3B0aW9uSXRlbS5jbGljayggeyBidXR0b246ICRzb3J0QnV0dG9uLCBjb2xsZWN0aW9uOiAkc29ydE9wdGlvbnMsIGNob2ljZXM6ICRzb3J0T3B0aW9uSXRlbXMgfSwgZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRcdC8vIFNhdmUgdGhlIHNlbGVjdGVkIHNvcnRcblx0XHRcdFx0XHRzZXRBY3RpdmVTb3J0aW5nKCBlLmRhdGEuYnV0dG9uLCBlLmRhdGEuY2hvaWNlcywgJCh0aGlzKSApO1xuXHRcdFx0XHRcdC8vIENsb3NlIHRoZSBkcm9wIGRvd25cblx0XHRcdFx0XHRlLmRhdGEuYnV0dG9uLnJlbW92ZUNsYXNzKFwib3BlblwiKTtcblx0XHRcdFx0XHRlLmRhdGEuY29sbGVjdGlvbi5yZW1vdmVDbGFzcyhcIm9wZW5cIik7XG5cdFx0XHRcdFx0Ly8gRGlzcGxheSB0aGUgbmV3IHNlYXJjaCByZXN1bHRzXG5cdFx0XHRcdFx0ZGlzcGxheU5ld1Jlc3VsdHMoJGNvbXBvbmVudCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIFNldCB1cCBjbGljayBldmVudHMgZm9yIENhdGVnb3JpZXNcblx0XHRcdHZhciAkY2F0ZWdvcmllcyA9ICRjb21wb25lbnQuZmluZChcIi5rb2gtc2VhcmNoLWZpbHRlcnMgLmtvaC1maWx0ZXItZ3JvdXAua29oLWNhdGVnb3J5XCIpO1xuXHRcdFx0JGNhdGVnb3JpZXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciAkYXZhaWxhYmxlRmlsdGVycyA9ICRjYXRlZ29yaWVzLmZpbmQoXCIua29oLWF2YWlsYWJsZS1maWx0ZXJzID4gbGkgPiBhXCIpO1xuXHRcdFx0XHR2YXIgJHNlbGVjdGVkRmlsdGVycyA9ICRjYXRlZ29yaWVzLmZpbmQoXCIua29oLXNlbGVjdGVkLWZpbHRlcnNcIik7XG5cblx0XHRcdFx0Ly8gUmVtb3ZlIGZpbHRlciB3aGVuIHNlbGVjdGVkIGZpbHRlciBpcyBjbGlja2VkXG5cdFx0XHRcdHZhciAkc2VsZWN0ZWRGaWx0ZXJJdGVtcyA9ICRzZWxlY3RlZEZpbHRlcnMuY2hpbGRyZW4oXCJsaVwiKTtcblx0XHRcdFx0JHNlbGVjdGVkRmlsdGVySXRlbXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dmFyICRmaWx0ZXJJdGVtID0gJCh0aGlzKTtcblx0XHRcdFx0XHR2YXIgJGZpbHRlckl0ZW1CdXR0b24gPSAkZmlsdGVySXRlbS5jaGlsZHJlbihcImJ1dHRvbi5rb2gtc2VsZWN0ZWQtZmlsdGVyXCIpO1xuXHRcdFx0XHRcdCRmaWx0ZXJJdGVtQnV0dG9uLmNsaWNrKCB7IGZpbHRlckNvdW50OiAkc2VsZWN0ZWRGaWx0ZXJJdGVtcy5sZW5ndGgsIGZpbHRlclNldDogJHNlbGVjdGVkRmlsdGVycywgZmlsdGVySXRlbTogJGZpbHRlckl0ZW0gfSwgZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRcdFx0aWYgKCBlLmRhdGEuZmlsdGVyQ291bnQgPD0gMSApIHtcblx0XHRcdFx0XHRcdFx0ZS5kYXRhLmZpbHRlclNldC5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRlLmRhdGEuZmlsdGVySXRlbS5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGRpc3BsYXlOZXdSZXN1bHRzKCRjb21wb25lbnQpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHR2YXIgJHNob3dBbGxDYXRzID0gJGNvbXBvbmVudC5maW5kKFwiLmtvaC1zZWFyY2gtZmlsdGVycyAua29oLWZpbHRlci1ncm91cC5rb2gtY2F0ZWdvcnkgLmtvaC1maWx0ZXItZ3JvdXAtYWxsLWxpbmtcIik7XG5cdFx0XHQkc2hvd0FsbENhdHMuY2xpY2soIGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRkaXNwbGF5TmV3UmVzdWx0cygkY29tcG9uZW50KTtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBTZXQgdXAgY2xpY2sgZXZlbnRzIGZvciBGaWx0ZXJpbmdcblx0XHRcdHZhciAkZmlsdGVycyA9ICRjb21wb25lbnQuZmluZChcIi5rb2gtc2VhcmNoLWZpbHRlcnMgLmtvaC1maWx0ZXItZ3JvdXAua29oLWZpbHRlcnMgLmtvaC1maWx0ZXJcIik7XG5cdFx0XHQkZmlsdGVycy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyICRmaWx0ZXIgPSAkKHRoaXMpO1xuXHRcdFx0XHR2YXIgJHNlbGVjdGVkRmlsdGVycyA9IG51bGw7XG5cdFx0XHRcdHZhciAkc2VsZWN0ZWRGaWx0ZXJJdGVtcyA9IG51bGw7XG5cdFx0XHRcdHZhciAkYXZhaWxhYmxlRmlsdGVycyA9IG51bGw7XG5cblx0XHRcdFx0aWYgKCAkZmlsdGVyLmhhc0NsYXNzKFwia29oLWZpbHRlci10eXBlLWNoZWNrYm94XCIpICkge1xuXHRcdFx0XHRcdHZhciAkY2hlY2tib3ggPSAkZmlsdGVyLmZpbmQoXCIua29oLWNoZWNrYm94LWZpbHRlciA+IGFcIik7XG5cdFx0XHRcdFx0JGNoZWNrYm94LmNsaWNrKCBmdW5jdGlvbihlKSB7XG5cdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0aWYgKCAkKHRoaXMpLmhhc0NsYXNzKFwia29oLWNoZWNrYm94LWNoZWNrZWRcIikgKSB7XG5cdFx0XHRcdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoXCJrb2gtY2hlY2tib3gtY2hlY2tlZFwiKS5hZGRDbGFzcyhcImtvaC1jaGVja2JveC11bmNoZWNrZWRcIik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcyhcImtvaC1jaGVja2JveC11bmNoZWNrZWRcIikuYWRkQ2xhc3MoXCJrb2gtY2hlY2tib3gtY2hlY2tlZFwiKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGRpc3BsYXlOZXdSZXN1bHRzKCRjb21wb25lbnQpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYgKCAkZmlsdGVyLmhhc0NsYXNzKFwia29oLWZpbHRlci10eXBlLXJhbmdlXCIpICkge1xuXHRcdFx0XHRcdC8vIEFkZCBmaWx0ZXIgd2hlbiBzbGlkZXIgY2hhbmdlc1xuXHRcdFx0XHRcdHZhciAkc2xpZGVyQ29udGFpbmVyID0gJGZpbHRlci5maW5kKFwiLmtvaC1yYW5nZS1maWx0ZXJcIikuZmlyc3QoKTtcblx0XHRcdFx0XHR2YXIgJHJhbmdlTWluTGFiZWwgPSAkc2xpZGVyQ29udGFpbmVyLmZpbmQoXCIua29oLXJhbmdlLXNsaWRlci1sYWJlbHMgPiAua29oLXJhbmdlLXNsaWRlci1taW5cIik7XG5cdFx0XHRcdFx0dmFyICRyYW5nZU1heExhYmVsID0gJHNsaWRlckNvbnRhaW5lci5maW5kKFwiLmtvaC1yYW5nZS1zbGlkZXItbGFiZWxzID4gLmtvaC1yYW5nZS1zbGlkZXItbWF4XCIpO1xuXHRcdFx0XHRcdHZhciAkc2xpZGVyID0gJHNsaWRlckNvbnRhaW5lci5maW5kKFwiLmtvaC1yYW5nZS1zbGlkZXJcIik7XG5cdFx0XHRcdFx0dmFyIHNsaWRlckVsZW1lbnQgPSAkc2xpZGVyWzBdO1xuXHRcdFx0XHRcdGlmICggc2xpZGVyRWxlbWVudC5ub1VpU2xpZGVyICkge1xuXHRcdFx0XHRcdFx0c2xpZGVyRWxlbWVudC5ub1VpU2xpZGVyLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0XHR2YXIgZmFjZXROYW1lID0gJHNsaWRlckNvbnRhaW5lci5kYXRhKFwiZmFjZXQtbmFtZVwiKTtcblx0XHRcdFx0XHRcdFx0dmFyIG1pblZhbHVlID0gJHJhbmdlTWluTGFiZWwuZGF0YShcIm1pbi12YWx1ZVwiKTtcblx0XHRcdFx0XHRcdFx0dmFyIG1heFZhbHVlID0gJHJhbmdlTWF4TGFiZWwuZGF0YShcIm1heC12YWx1ZVwiKTtcblx0XHRcdFx0XHRcdFx0dmFyIGZhY2V0VmFsdWUgPSAobWluVmFsdWUgJiYgbWF4VmFsdWUpID8gKG1pblZhbHVlICsgXCItXCIgKyBtYXhWYWx1ZSk6IFwiXCI7XG5cdFx0XHRcdFx0XHRcdGFkZEFjdGl2ZUZpbHRlciggJGZpbHRlciwgZmFjZXROYW1lLCBmYWNldFZhbHVlLCBmYWNldFZhbHVlLCBcIjBcIiApO1xuXHRcdFx0XHRcdFx0XHRkaXNwbGF5TmV3UmVzdWx0cygkY29tcG9uZW50KTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFJlbW92ZSBmaWx0ZXIgd2hlbiBzZWxlY3RlZCBmaWx0ZXIgaXMgY2xpY2tlZFxuXHRcdFx0XHRcdCRzZWxlY3RlZEZpbHRlcnMgPSAkZmlsdGVyLmZpbmQoXCIua29oLXNlbGVjdGVkLWZpbHRlcnNcIik7XG5cdFx0XHRcdFx0JHNlbGVjdGVkRmlsdGVySXRlbXMgPSAkc2VsZWN0ZWRGaWx0ZXJzLmNoaWxkcmVuKFwibGlcIik7XG5cdFx0XHRcdFx0JHNlbGVjdGVkRmlsdGVySXRlbXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHR2YXIgJGZpbHRlckl0ZW0gPSAkKHRoaXMpO1xuXHRcdFx0XHRcdFx0dmFyICRmaWx0ZXJJdGVtQnV0dG9uID0gJGZpbHRlckl0ZW0uY2hpbGRyZW4oXCJidXR0b24ua29oLXNlbGVjdGVkLWZpbHRlclwiKTtcblx0XHRcdFx0XHRcdCRmaWx0ZXJJdGVtQnV0dG9uLmNsaWNrKCB7IGZpbHRlckNvdW50OiAkc2VsZWN0ZWRGaWx0ZXJJdGVtcy5sZW5ndGgsIGZpbHRlclNldDogJHNlbGVjdGVkRmlsdGVycywgZmlsdGVySXRlbTogJGZpbHRlckl0ZW0gfSwgZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIGUuZGF0YS5maWx0ZXJDb3VudCA8PSAxICkge1xuXHRcdFx0XHRcdFx0XHRcdGUuZGF0YS5maWx0ZXJTZXQucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0ZS5kYXRhLmZpbHRlckl0ZW0ucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZGlzcGxheU5ld1Jlc3VsdHMoJGNvbXBvbmVudCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIGlmICggJGZpbHRlci5oYXNDbGFzcyhcImtvaC1maWx0ZXItdHlwZS1jb2xvcnNcIikgKSB7XG5cdFx0XHRcdFx0JGF2YWlsYWJsZUZpbHRlcnMgPSAkZmlsdGVyLmZpbmQoXCIua29oLWF2YWlsYWJsZS1maWx0ZXJzID4gbGkgPiBhXCIpO1xuXHRcdFx0XHRcdCRzZWxlY3RlZEZpbHRlcnMgPSAkZmlsdGVyLmZpbmQoXCIua29oLXNlbGVjdGVkLWZpbHRlcnNcIik7XG5cblx0XHRcdFx0XHQvLyBBZGQgY29sb3IgZmlsdGVyXG5cdFx0XHRcdFx0JGF2YWlsYWJsZUZpbHRlcnMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHR2YXIgJGZpbHRlckxpbmsgPSAkKHRoaXMpO1xuXHRcdFx0XHRcdFx0JCgkZmlsdGVyTGluaykub24oJ2NsaWNrIHRvdWNoZW5kJywgZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRcdHZhciBmYWNldE5hbWUgPSAkZmlsdGVyTGluay5kYXRhKFwiZmFjZXQtbmFtZVwiKTtcblx0XHRcdFx0XHRcdFx0dmFyIGZhY2V0VmFsdWUgPSAkZmlsdGVyTGluay5kYXRhKFwiZmFjZXQtdmFsdWVcIik7XG5cdFx0XHRcdFx0XHRcdHZhciBmYWNldExhYmVsID0gJGZpbHRlckxpbmsuY2hpbGRyZW4oXCJzcGFuLmxhYmVsXCIpLnRleHQoKTtcblx0XHRcdFx0XHRcdFx0dmFyIGZhY2V0Q291bnQgPSBcIjBcIjtcblx0XHRcdFx0XHRcdFx0YWRkQWN0aXZlRmlsdGVyKCAkZmlsdGVyLCBmYWNldE5hbWUsIGZhY2V0VmFsdWUsIGZhY2V0TGFiZWwsIGZhY2V0Q291bnQgKTtcblx0XHRcdFx0XHRcdFx0ZGlzcGxheU5ld1Jlc3VsdHMoJGNvbXBvbmVudCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vIFJlbW92ZSBmaWx0ZXIgd2hlbiBzZWxlY3RlZCBmaWx0ZXIgaXMgY2xpY2tlZFxuXHRcdFx0XHRcdCRzZWxlY3RlZEZpbHRlcnMgPSAkZmlsdGVyLmZpbmQoXCIua29oLXNlbGVjdGVkLWZpbHRlcnNcIik7XG5cdFx0XHRcdFx0JHNlbGVjdGVkRmlsdGVySXRlbXMgPSAkc2VsZWN0ZWRGaWx0ZXJzLmNoaWxkcmVuKFwibGlcIik7XG5cdFx0XHRcdFx0JHNlbGVjdGVkRmlsdGVySXRlbXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHR2YXIgJGZpbHRlckl0ZW0gPSAkKHRoaXMpO1xuXHRcdFx0XHRcdFx0dmFyICRmaWx0ZXJJdGVtQnV0dG9uID0gJGZpbHRlckl0ZW0uY2hpbGRyZW4oXCJidXR0b24ua29oLXNlbGVjdGVkLWZpbHRlclwiKTtcblx0XHRcdFx0XHRcdCRmaWx0ZXJJdGVtQnV0dG9uLmNsaWNrKCB7IGZpbHRlckNvdW50OiAkc2VsZWN0ZWRGaWx0ZXJJdGVtcy5sZW5ndGgsIGZpbHRlclNldDogJHNlbGVjdGVkRmlsdGVycywgZmlsdGVySXRlbTogJGZpbHRlckl0ZW0gfSwgZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIGUuZGF0YS5maWx0ZXJDb3VudCA8PSAxICkge1xuXHRcdFx0XHRcdFx0XHRcdGUuZGF0YS5maWx0ZXJTZXQucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0ZS5kYXRhLmZpbHRlckl0ZW0ucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZGlzcGxheU5ld1Jlc3VsdHMoJGNvbXBvbmVudCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHQkYXZhaWxhYmxlRmlsdGVycyA9ICRmaWx0ZXIuZmluZChcIi5rb2gtYXZhaWxhYmxlLWZpbHRlcnMgPiBsaSA+IGFcIik7XG5cdFx0XHRcdFx0JHNlbGVjdGVkRmlsdGVycyA9ICRmaWx0ZXIuZmluZChcIi5rb2gtc2VsZWN0ZWQtZmlsdGVyc1wiKTtcblxuXHRcdFx0XHRcdC8vIEFkZCBsaXN0IGZpbHRlclxuXHRcdFx0XHRcdCRhdmFpbGFibGVGaWx0ZXJzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0dmFyICRmaWx0ZXJMaW5rID0gJCh0aGlzKTtcblx0XHRcdFx0XHRcdCRmaWx0ZXJMaW5rLmNsaWNrKCBmdW5jdGlvbihlKSB7XG5cdFx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdFx0dmFyIGZhY2V0TmFtZSA9ICRmaWx0ZXJMaW5rLmRhdGEoXCJmYWNldC1uYW1lXCIpO1xuXHRcdFx0XHRcdFx0XHR2YXIgZmFjZXRWYWx1ZSA9ICRmaWx0ZXJMaW5rLmRhdGEoXCJmYWNldC12YWx1ZVwiKTtcblx0XHRcdFx0XHRcdFx0dmFyIGZhY2V0TGFiZWwgPSAkZmlsdGVyTGluay5jaGlsZHJlbihcInNwYW4ubmFtZVwiKS5maXJzdCgpLnRleHQoKTtcblx0XHRcdFx0XHRcdFx0dmFyIGZhY2V0Q291bnQgPSAkZmlsdGVyTGluay5jaGlsZHJlbihcInNwYW4uY291bnRcIikuZmlyc3QoKS50ZXh0KCk7XG5cdFx0XHRcdFx0XHRcdGFkZEFjdGl2ZUZpbHRlciggJGZpbHRlciwgZmFjZXROYW1lLCBmYWNldFZhbHVlLCBmYWNldExhYmVsLCBmYWNldENvdW50ICk7XG5cdFx0XHRcdFx0XHRcdGRpc3BsYXlOZXdSZXN1bHRzKCRjb21wb25lbnQpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvLyBSZW1vdmUgZmlsdGVyIHdoZW4gc2VsZWN0ZWQgZmlsdGVyIGlzIGNsaWNrZWRcblx0XHRcdFx0XHQkc2VsZWN0ZWRGaWx0ZXJJdGVtcyA9ICRzZWxlY3RlZEZpbHRlcnMuY2hpbGRyZW4oXCJsaVwiKTtcblx0XHRcdFx0XHQkc2VsZWN0ZWRGaWx0ZXJJdGVtcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHZhciAkZmlsdGVySXRlbSA9ICQodGhpcyk7XG5cdFx0XHRcdFx0XHR2YXIgJGZpbHRlckl0ZW1CdXR0b24gPSAkZmlsdGVySXRlbS5jaGlsZHJlbihcImJ1dHRvbi5rb2gtc2VsZWN0ZWQtZmlsdGVyXCIpO1xuXHRcdFx0XHRcdFx0JGZpbHRlckl0ZW1CdXR0b24uY2xpY2soIHsgZmlsdGVyQ291bnQ6ICRzZWxlY3RlZEZpbHRlckl0ZW1zLmxlbmd0aCwgZmlsdGVyU2V0OiAkc2VsZWN0ZWRGaWx0ZXJzLCBmaWx0ZXJJdGVtOiAkZmlsdGVySXRlbSB9LCBmdW5jdGlvbihlKSB7XG5cdFx0XHRcdFx0XHRcdGlmICggZS5kYXRhLmZpbHRlckNvdW50IDw9IDEgKSB7XG5cdFx0XHRcdFx0XHRcdFx0ZS5kYXRhLmZpbHRlclNldC5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRlLmRhdGEuZmlsdGVySXRlbS5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRkaXNwbGF5TmV3UmVzdWx0cygkY29tcG9uZW50KTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0dmFyICRjbGVhckFsbEZpbHRlcnMgPSAkY29tcG9uZW50LmZpbmQoXCIua29oLXNlYXJjaC1maWx0ZXJzIC5rb2gtZmlsdGVyLWdyb3VwLmtvaC1maWx0ZXJzIC5rb2gtZmlsdGVyLWdyb3VwLWFsbC1saW5rXCIpO1xuXHRcdFx0JGNsZWFyQWxsRmlsdGVycy5jbGljayggZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGRpc3BsYXlOZXdSZXN1bHRzKCRjb21wb25lbnQsIGZhbHNlLCB0cnVlKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9O1xuXG5cdC8qIEZpbHRlcmluZy9Tb3J0aW5nIC0gR2V0IEZ1bmN0aW9ucyAqL1xuXHR2YXIgZ2V0QWN0aXZlU2VjdGlvbiA9IGZ1bmN0aW9uICgkY29tcG9uZW50KSB7XG5cdFx0dmFyIHNlY3Rpb25OYW1lID0gXCJcIjtcblx0XHRzZWN0aW9uTmFtZSA9ICgkY29tcG9uZW50LmZpbmQoXCIua29oLWRhdGEtYXR0cmlidXRlc1wiKS5kYXRhKFwia29oLXNlY3Rpb25cIikgfHwgXCJcIik7XG5cdFx0cmV0dXJuIHNlY3Rpb25OYW1lO1xuXHR9O1xuXG5cdHZhciBnZXRUeXBlID0gZnVuY3Rpb24gKCRjb21wb25lbnQpIHtcblx0XHR2YXIgdHlwZSA9IFwiXCI7XG5cdFx0dHlwZSA9ICgkY29tcG9uZW50LmZpbmQoXCIua29oLWRhdGEtYXR0cmlidXRlc1wiKS5kYXRhKFwia29oLXR5cGVcIikgfHwgXCJcIik7XG5cdFx0cmV0dXJuIHR5cGU7XG5cdH07XG5cblx0dmFyIGdldFNlYXJjaFRlcm0gPSBmdW5jdGlvbiAoJGNvbXBvbmVudCkge1xuXHRcdHZhciBzZWFyY2hUZXJtID0gXCJcIjtcblx0XHRzZWFyY2hUZXJtID0gKCRjb21wb25lbnQuZmluZChcIi5rb2gtZGF0YS1hdHRyaWJ1dGVzXCIpLmRhdGEoXCJrb2gtc2VhcmNodGVybVwiKSB8fCBcIlwiKTtcblx0XHRyZXR1cm4gc2VhcmNoVGVybTtcblx0fTtcblxuXHR2YXIgZ2V0Q3VycmVudFBhZ2UgPSBmdW5jdGlvbiAoJGNvbXBvbmVudCkge1xuXHRcdHZhciBjdXJyZW50UGFnZSA9IFwiXCI7XG5cdFx0Y3VycmVudFBhZ2UgPSAoJGNvbXBvbmVudC5maW5kKFwiLmtvaC1kYXRhLWF0dHJpYnV0ZXNcIikuZGF0YShcImtvaC1jdXJyZW50cGFnZVwiKSB8fCBcIlwiKTtcblx0XHRyZXR1cm4gY3VycmVudFBhZ2U7XG5cdH07XG5cblx0dmFyIGdldEFjdGl2ZUNhdGVnb3J5ID0gZnVuY3Rpb24gKCRjb21wb25lbnQpIHtcblx0XHR2YXIgY2F0ZWdvcnlOYW1lID0gXCJcIjtcblx0XHR2YXIgJGFjdGl2ZUNhdGVnb3J5ID0gJGNvbXBvbmVudC5maW5kKFwiLmtvaC1zZWFyY2gtZmlsdGVycyAua29oLWZpbHRlci1ncm91cC5rb2gtY2F0ZWdvcnkgLmtvaC1zZWxlY3RlZC1maWx0ZXJcIikuZmlyc3QoKTtcblx0XHRjYXRlZ29yeU5hbWUgPSAoJGFjdGl2ZUNhdGVnb3J5LmRhdGEoXCJmYWNldC12YWx1ZVwiKSB8fCBcIlwiKTtcblx0XHRyZXR1cm4gY2F0ZWdvcnlOYW1lO1xuXHR9O1xuXG5cdHZhciBnZXRBY3RpdmVGaWx0ZXJzID0gZnVuY3Rpb24gKCRjb21wb25lbnQpIHtcblx0XHR2YXIgZmFjZXROYW1lRmllbGQgPSBcImZhY2V0LW5hbWVcIjtcblx0XHR2YXIgZmFjZXRWYWx1ZUZpZWxkID0gXCJmYWNldC12YWx1ZVwiO1xuXG5cdFx0dmFyIGFjdGl2ZUZpbHRlcnMgPSB7fTtcblxuXHRcdHZhciAkZmlsdGVycyA9ICRjb21wb25lbnQuZmluZChcIi5rb2gtc2VhcmNoLWZpbHRlcnMgLmtvaC1maWx0ZXItZ3JvdXAua29oLWZpbHRlcnMgLmtvaC1maWx0ZXJcIik7XG5cdFx0JGZpbHRlcnMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgJGZpbHRlciA9ICQodGhpcyk7XG5cdFx0XHR2YXIgJHNlbGVjdGVkRmlsdGVycyA9IG51bGw7XG5cdFx0XHR2YXIgZmFjZXROYW1lID0gXCJcIjtcblx0XHRcdHZhciBmYWNldFZhbHVlID0gXCJcIjtcblxuXHRcdFx0aWYgKCAkZmlsdGVyLmhhc0NsYXNzKFwia29oLWZpbHRlci10eXBlLWNoZWNrYm94XCIpICkge1xuXHRcdFx0XHR2YXIgJGNoZWNrYm94ID0gJGZpbHRlci5maW5kKFwiLmtvaC1jaGVja2JveC1maWx0ZXIgPiBhXCIpO1xuXHRcdFx0XHRpZiAoICRjaGVja2JveC5oYXNDbGFzcyhcImtvaC1jaGVja2JveC1jaGVja2VkXCIpICkge1xuXHRcdFx0XHRcdGZhY2V0TmFtZSA9ICRjaGVja2JveC5kYXRhKGZhY2V0TmFtZUZpZWxkKTtcblx0XHRcdFx0XHRmYWNldFZhbHVlID0gJGNoZWNrYm94LmRhdGEoZmFjZXRWYWx1ZUZpZWxkKTtcblx0XHRcdFx0XHRpZiAoIGZhY2V0TmFtZSAmJiBmYWNldFZhbHVlICkge1xuXHRcdFx0XHRcdFx0YWN0aXZlRmlsdGVyc1tmYWNldE5hbWVdID0gZmFjZXRWYWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKCAkZmlsdGVyLmhhc0NsYXNzKFwia29oLWZpbHRlci10eXBlLXJhbmdlXCIpICkge1xuXHRcdFx0XHQkc2VsZWN0ZWRGaWx0ZXJzID0gJGZpbHRlci5maW5kKFwiLmtvaC1zZWxlY3RlZC1maWx0ZXJcIik7XG5cdFx0XHRcdCRzZWxlY3RlZEZpbHRlcnMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0ZmFjZXROYW1lID0gJCh0aGlzKS5kYXRhKGZhY2V0TmFtZUZpZWxkKTtcblx0XHRcdFx0XHRmYWNldFZhbHVlID0gJCh0aGlzKS5kYXRhKGZhY2V0VmFsdWVGaWVsZCk7XG5cdFx0XHRcdFx0aWYgKCBmYWNldE5hbWUgJiYgZmFjZXRWYWx1ZSApIHtcblx0XHRcdFx0XHRcdHZhciB2YWx1ZXMgPSBmYWNldFZhbHVlLnNwbGl0KC8tLyk7XG5cblx0XHRcdFx0XHRcdGFjdGl2ZUZpbHRlcnNbZmFjZXROYW1lXSA9IGFjdGl2ZUZpbHRlcnNbZmFjZXROYW1lXSB8fCB7fTtcblx0XHRcdFx0XHRcdGFjdGl2ZUZpbHRlcnNbZmFjZXROYW1lXS5NaW4gPSB2YWx1ZXNbMF07XG5cdFx0XHRcdFx0XHRhY3RpdmVGaWx0ZXJzW2ZhY2V0TmFtZV0uTWF4ID0gdmFsdWVzWzFdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmICggJGZpbHRlci5oYXNDbGFzcyhcImtvaC1maWx0ZXItdHlwZS1jb2xvcnNcIikgKSB7XG5cdFx0XHRcdCRzZWxlY3RlZEZpbHRlcnMgPSAkZmlsdGVyLmZpbmQoXCIua29oLXNlbGVjdGVkLWZpbHRlclwiKTtcblx0XHRcdFx0JHNlbGVjdGVkRmlsdGVycy5lYWNoKCBmdW5jdGlvbihpbmRleCkge1xuXHRcdFx0XHRcdGZhY2V0TmFtZSA9ICQodGhpcykuZGF0YShmYWNldE5hbWVGaWVsZCk7XG5cdFx0XHRcdFx0ZmFjZXRWYWx1ZSA9ICQodGhpcykuZGF0YShmYWNldFZhbHVlRmllbGQpO1xuXHRcdFx0XHRcdGlmICggZmFjZXROYW1lICYmIGZhY2V0VmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRhY3RpdmVGaWx0ZXJzW2ZhY2V0TmFtZV0gPSBhY3RpdmVGaWx0ZXJzW2ZhY2V0TmFtZV0gfHwge307XG5cdFx0XHRcdFx0XHRhY3RpdmVGaWx0ZXJzW2ZhY2V0TmFtZV1baW5kZXhdID0gZmFjZXRWYWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdCRzZWxlY3RlZEZpbHRlcnMgPSAkZmlsdGVyLmZpbmQoXCIua29oLXNlbGVjdGVkLWZpbHRlclwiKTtcblx0XHRcdFx0JHNlbGVjdGVkRmlsdGVycy5lYWNoKCBmdW5jdGlvbihpbmRleCkge1xuXHRcdFx0XHRcdGZhY2V0TmFtZSA9ICQodGhpcykuZGF0YShmYWNldE5hbWVGaWVsZCk7XG5cdFx0XHRcdFx0ZmFjZXRWYWx1ZSA9ICQodGhpcykuZGF0YShmYWNldFZhbHVlRmllbGQpO1xuXHRcdFx0XHRcdGlmICggZmFjZXROYW1lICYmIGZhY2V0VmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRhY3RpdmVGaWx0ZXJzW2ZhY2V0TmFtZV0gPSBhY3RpdmVGaWx0ZXJzW2ZhY2V0TmFtZV0gfHwge307XG5cdFx0XHRcdFx0XHRhY3RpdmVGaWx0ZXJzW2ZhY2V0TmFtZV1baW5kZXhdID0gZmFjZXRWYWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIGFjdGl2ZUZpbHRlcnM7XG5cdH07XG5cblx0dmFyIGdldFVybGZyb21BY3RpdmVGaWx0ZXJzID0gZnVuY3Rpb24gKCRjb21wb25lbnQpIHtcblxuXHRcdHZhciB1cmw9XCJcIjtcblx0XHR2YXIgYWN0aXZlRmlsdGVycyA9IGdldEFjdGl2ZUZpbHRlcnMoJGNvbXBvbmVudCk7XG5cdFx0JC5lYWNoKCBhY3RpdmVGaWx0ZXJzLCBmdW5jdGlvbihmYWNldE5hbWUsIGZhY2V0VmFsdWVzKSB7XG5cdFx0XHRpZiAoIGZhY2V0TmFtZSAmJiBmYWNldFZhbHVlcyApIHtcblx0XHRcdFx0aWYgKCB0eXBlb2YgZmFjZXRWYWx1ZXMgPT09ICdvYmplY3QnICkge1xuXHRcdFx0XHRcdCQuZWFjaCggZmFjZXRWYWx1ZXMsIGZ1bmN0aW9uKGluZGV4LCBmYWNldFZhbHVlKSB7XG5cdFx0XHRcdFx0XHQvLyBpZiB0aGUga2V5IGlzIE1pbiBvciBNYXgsIHRyZWF0IGFzIHJhbmdlIHNsaWRlclxuXHRcdFx0XHRcdFx0aWYgKCBpbmRleCA9PT0gXCJNaW5cIiB8fCBpbmRleCA9PT0gXCJNYXhcIiApIHtcblx0XHRcdFx0XHRcdFx0dmFyIHBhcmFtTmFtZSA9IGZhY2V0TmFtZSArIGluZGV4O1xuXHRcdFx0XHRcdFx0XHRxdWVyeVBhcmFtc1twYXJhbU5hbWVdID0gZmFjZXRWYWx1ZTtcblx0XHRcdFx0XHRcdFx0cXVlcnlQYXJhbUNvdW50ID0gcXVlcnlQYXJhbUNvdW50ICsgMTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC8vIG90aGVyd2lzZSBpdCdzIGEgbm9ybWFsIGZpbHRlclxuXHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHVybCA9IHVybCArIFwiL1wiICsgZmFjZXROYW1lICsgXCIvXCIgKyBmYWNldFZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdHVybCA9IHVybCArIFwiL1wiICsgZmFjZXROYW1lICsgXCIvXCIgKyBmYWNldFZhbHVlcztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHVybDtcblx0fVxuXG5cdHZhciBnZXRBY3RpdmVTb3J0aW5nID0gZnVuY3Rpb24gKCRjb21wb25lbnQpIHtcblx0XHR2YXIgc29ydE9wdGlvbnMgPSB7XG5cdFx0XHRvcmRlckJ5OiBcIlwiLFxuXHRcdFx0ZGlyZWN0aW9uOiBcIlwiLFxuXHRcdFx0bGFiZWxzOiB7XG5cdFx0XHRcdG9yZGVyQnk6IFwib3JkZXJCeVwiLFxuXHRcdFx0XHRkaXJlY3Rpb246IFwic29ydFwiXG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHZhciAkc29ydE9wdGlvbnMgPSAkY29tcG9uZW50LmZpbmQoXCIua29oLXNlYXJjaC1zb3J0aW5nID4gLmtvaC1zb3J0LW9wdGlvbnNcIik7XG5cdFx0c29ydE9wdGlvbnMubGFiZWxzLm9yZGVyQnkgPSAoJHNvcnRPcHRpb25zLmRhdGEoXCJzb3J0LW9yZGVyYnktbGFiZWxcIikgfHwgc29ydE9wdGlvbnMubGFiZWxzLm9yZGVyQnkpO1xuXHRcdHNvcnRPcHRpb25zLmxhYmVscy5kaXJlY3Rpb24gPSAoJHNvcnRPcHRpb25zLmRhdGEoXCJzb3J0LWRpcmVjdGlvbi1sYWJlbFwiKSB8fCBzb3J0T3B0aW9ucy5sYWJlbHMuZGlyZWN0aW9uKTtcblxuXHRcdHZhciAkYWN0aXZlU29ydCA9ICRzb3J0T3B0aW9ucy5maW5kKFwiLmtvaC1zb3J0LXNlbGVjdGVkID4gc3BhblwiKS5maXJzdCgpO1xuXHRcdHNvcnRPcHRpb25zLm9yZGVyQnkgPSAkYWN0aXZlU29ydC5kYXRhKFwic29ydC1vcmRlcmJ5XCIpO1xuXHRcdHNvcnRPcHRpb25zLmRpcmVjdGlvbiA9ICRhY3RpdmVTb3J0LmRhdGEoXCJzb3J0LWRpcmVjdGlvblwiKTtcblxuXHRcdHJldHVybiBzb3J0T3B0aW9ucztcblx0fTtcblxuXHR2YXIgc2V0QWN0aXZlU29ydGluZyA9IGZ1bmN0aW9uICgkc29ydEJ1dHRvbiwgJHNvcnRPcHRpb25zLCAkdGFyZ2V0T3B0aW9uKSB7XG5cdFx0JHNvcnRCdXR0b24udGV4dCggJHRhcmdldE9wdGlvbi5jaGlsZHJlbihcInNwYW5cIikudGV4dCgpICk7XG5cdFx0JHNvcnRPcHRpb25zLnJlbW92ZUNsYXNzKFwia29oLXNvcnQtc2VsZWN0ZWRcIik7XG5cdFx0JHRhcmdldE9wdGlvbi5hZGRDbGFzcyhcImtvaC1zb3J0LXNlbGVjdGVkXCIpO1xuXHR9O1xuXG5cdHZhciBhZGRBY3RpdmVDYXRlZ29yeSA9IGZ1bmN0aW9uICgkZmlsdGVyLCBmYWNldE5hbWUsIGZhY2V0VmFsdWUsIGZhY2V0TGFiZWwsIGZhY2V0Q291bnQpIHtcblx0XHR2YXIgJGZpbHRlckxpc3QgPSAkZmlsdGVyLmNoaWxkcmVuKFwiLmtvaC1zZWxlY3RlZC1maWx0ZXJzXCIpO1xuXHRcdGlmICggISRmaWx0ZXJMaXN0IHx8ICEkZmlsdGVyTGlzdC5sZW5ndGggKSB7XG5cdFx0XHQkZmlsdGVyTGlzdCA9ICQoJzx1bCBjbGFzcz1cImtvaC1zZWxlY3RlZC1maWx0ZXJzXCI+PC91bD4nKTtcblx0XHRcdCRmaWx0ZXJMaXN0Lmluc2VydEJlZm9yZSggJGZpbHRlci5jaGlsZHJlbihcIi5rb2gtYXZhaWxhYmxlLWZpbHRlcnNcIikgKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHQkZmlsdGVyTGlzdC5lbXB0eSgpO1xuXHRcdH1cblxuXHRcdHZhciAkZmlsdGVySXRlbUJ1dHRvbiA9ICQoJzxidXR0b24gY2xhc3M9XCJrb2gtc2VsZWN0ZWQtZmlsdGVyXCI+PC9idXR0b24+Jyk7XG5cdFx0JGZpbHRlckl0ZW1CdXR0b24uZGF0YShcImZhY2V0LW5hbWVcIixmYWNldE5hbWUpO1xuXHRcdCRmaWx0ZXJJdGVtQnV0dG9uLmRhdGEoXCJmYWNldC12YWx1ZVwiLGZhY2V0VmFsdWUpO1xuXHRcdCRmaWx0ZXJJdGVtQnV0dG9uLmFwcGVuZCgkKCc8c3BhbiBjbGFzcz1cInJlbW92ZVwiPlJlbW92ZSBGaWx0ZXI8L3NwYW4+JykpO1xuXHRcdCRmaWx0ZXJJdGVtQnV0dG9uLmFwcGVuZCgkKCc8c3BhbiBjbGFzcz1cIm5hbWVcIj4nK2ZhY2V0TGFiZWwrJzwvc3Bhbj4nKSk7XG5cdFx0JGZpbHRlckl0ZW1CdXR0b24uYXBwZW5kKCQoJzxzcGFuIGNsYXNzPVwiY291bnRcIj4nK2ZhY2V0Q291bnQrJzwvc3Bhbj4nKSk7XG5cblx0XHQkZmlsdGVyTGlzdC5hcHBlbmQoICQoXCI8bGk+PC9saT5cIikud3JhcElubmVyKCRmaWx0ZXJJdGVtQnV0dG9uKSApO1xuXHR9O1xuXG5cdHZhciBhZGRBY3RpdmVGaWx0ZXIgPSBmdW5jdGlvbiAoJGZpbHRlciwgZmFjZXROYW1lLCBmYWNldFZhbHVlLCBmYWNldExhYmVsLCBmYWNldENvdW50KSB7XG5cdFx0dmFyICRmaWx0ZXJMaXN0ID0gJGZpbHRlci5jaGlsZHJlbihcIi5rb2gtc2VsZWN0ZWQtZmlsdGVyc1wiKTtcblx0XHR2YXIgJGZpbHRlckl0ZW1CdXR0b24gPSAkKCc8YnV0dG9uIGNsYXNzPVwia29oLXNlbGVjdGVkLWZpbHRlclwiPjwvYnV0dG9uPicpO1xuXG5cdFx0aWYgKCAkZmlsdGVyLmhhc0NsYXNzKFwia29oLWZpbHRlci10eXBlLWNoZWNrYm94XCIpICkge1xuXHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcyhcImtvaC1jaGVja2JveC11bmNoZWNrZWRcIikuYWRkQ2xhc3MoXCJrb2gtY2hlY2tib3gtY2hlY2tlZFwiKTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAoICRmaWx0ZXIuaGFzQ2xhc3MoXCJrb2gtZmlsdGVyLXR5cGUtcmFuZ2VcIikgKSB7XG5cdFx0XHRpZiAoICEkZmlsdGVyTGlzdCB8fCAhJGZpbHRlckxpc3QubGVuZ3RoICkge1xuXHRcdFx0XHQkZmlsdGVyTGlzdCA9ICQoJzx1bCBjbGFzcz1cImtvaC1zZWxlY3RlZC1maWx0ZXJzXCI+PC91bD4nKTtcblx0XHRcdFx0JGZpbHRlckxpc3QuaW5zZXJ0QmVmb3JlKCAkZmlsdGVyLmZpbmQoXCIua29oLXJhbmdlLWZpbHRlclwiKSApO1xuXHRcdFx0fVxuXG5cdFx0XHQkZmlsdGVySXRlbUJ1dHRvbi5kYXRhKFwiZmFjZXQtbmFtZVwiLGZhY2V0TmFtZSk7XG5cdFx0XHQkZmlsdGVySXRlbUJ1dHRvbi5kYXRhKFwiZmFjZXQtdmFsdWVcIixmYWNldFZhbHVlKTtcblx0XHRcdCRmaWx0ZXJJdGVtQnV0dG9uLmFwcGVuZCgkKCc8c3BhbiBjbGFzcz1cInJlbW92ZVwiPlJlbW92ZSBGaWx0ZXI8L3NwYW4+JykpO1xuXHRcdFx0JGZpbHRlckl0ZW1CdXR0b24uYXBwZW5kKCQoJzxzcGFuIGNsYXNzPVwibmFtZVwiPicrZmFjZXRMYWJlbCsnPC9zcGFuPicpKTtcblx0XHRcdCRmaWx0ZXJJdGVtQnV0dG9uLmFwcGVuZCgkKCc8c3BhbiBjbGFzcz1cImNvdW50XCI+JytmYWNldENvdW50Kyc8L3NwYW4+JykpO1xuXG5cdFx0XHQkZmlsdGVyTGlzdC5hcHBlbmQoICQoXCI8bGk+PC9saT5cIikud3JhcElubmVyKCRmaWx0ZXJJdGVtQnV0dG9uKSApO1xuXHRcdH1cblx0XHRlbHNlIHsgLy8gQ29sb3JzIGFuZCBMaXN0IGFyZSB0aGUgc2FtZSBmb3IgdGhpcyBhdCB0aGUgbW9tZW50XG5cdFx0XHRpZiAoICEkZmlsdGVyTGlzdCB8fCAhJGZpbHRlckxpc3QubGVuZ3RoICkge1xuXHRcdFx0XHQkZmlsdGVyTGlzdCA9ICQoJzx1bCBjbGFzcz1cImtvaC1zZWxlY3RlZC1maWx0ZXJzXCI+PC91bD4nKTtcblx0XHRcdFx0JGZpbHRlckxpc3QuaW5zZXJ0QmVmb3JlKCAkZmlsdGVyLmZpbmQoXCIua29oLWF2YWlsYWJsZS1maWx0ZXJzXCIpICk7XG5cdFx0XHR9XG5cblx0XHRcdCRmaWx0ZXJJdGVtQnV0dG9uLmRhdGEoXCJmYWNldC1uYW1lXCIsZmFjZXROYW1lKTtcblx0XHRcdCRmaWx0ZXJJdGVtQnV0dG9uLmRhdGEoXCJmYWNldC12YWx1ZVwiLGZhY2V0VmFsdWUpO1xuXHRcdFx0JGZpbHRlckl0ZW1CdXR0b24uYXBwZW5kKCQoJzxzcGFuIGNsYXNzPVwicmVtb3ZlXCI+UmVtb3ZlIEZpbHRlcjwvc3Bhbj4nKSk7XG5cdFx0XHQkZmlsdGVySXRlbUJ1dHRvbi5hcHBlbmQoJCgnPHNwYW4gY2xhc3M9XCJuYW1lXCI+JytmYWNldExhYmVsKyc8L3NwYW4+JykpO1xuXHRcdFx0JGZpbHRlckl0ZW1CdXR0b24uYXBwZW5kKCQoJzxzcGFuIGNsYXNzPVwiY291bnRcIj4nK2ZhY2V0Q291bnQrJzwvc3Bhbj4nKSk7XG5cblx0XHRcdCRmaWx0ZXJMaXN0LmFwcGVuZCggJChcIjxsaT48L2xpPlwiKS53cmFwSW5uZXIoJGZpbHRlckl0ZW1CdXR0b24pICk7XG5cdFx0fVxuXHR9O1xuXG5cdC8qIEZpbHRlcmluZy9Tb3J0aW5nIC0gVVJMIGZ1bmN0aW9ucyAqL1xuXHR2YXIgZ2V0VVJMID0gZnVuY3Rpb24gKCRjb21wb25lbnQsIGV4Y2x1ZGVDYXRlZ29yeSwgZXhjbHVkZUZpbHRlcnMpIHtcblx0XHQvKiBVUkxzIHdpbGwgYmUgaW4gdGhlIGZvcm0gb2YgcmVzdWx0cz90eXBlPXByb2R1Y3Qmc2VhcmNoPXNob3dlciZjdXJyZW50cGFnZT0xXG5cdFx0ICZvcmRlckJ5PXtuYW1lfHByaWNlfSZzb3J0PXthc2N8ZGVzY30gKi9cblx0XHR2YXIgdXJsID0gXCJcIjtcblx0XHR2YXIgcXVlcnlQYXJhbXMgPSB7fTtcblx0XHR2YXIgcXVlcnlQYXJhbUNvdW50ID0gMDtcblxuXHRcdHZhciB1cmxSb290ID0gJGNvbXBvbmVudC5maW5kKFwiLmtvaC1kYXRhLWF0dHJpYnV0ZXNcIikuZGF0YShcImtvaC11cmwtcm9vdFwiKTtcblx0XHR1cmwgPSB1cmxSb290O1xuXG5cdFx0LyogSWYgdGhlIGNhdGVnb3J5IGlzIGV4Y2x1ZGVkLCB0aGVuIHRoZSBmaWx0ZXJzIGFuZCBxdWVyeSBzdHJpbmcgcGFyYW1ldGVycyBhbmQgc29ydCBzaG91bGQgYWxzbyBiZSBleGNsdWRlZCAqL1xuXHRcdGlmICggIWV4Y2x1ZGVDYXRlZ29yeSApIHtcblx0XHRcdHZhciBjYXRlZ29yeU5hbWUgPSBnZXRBY3RpdmVDYXRlZ29yeSgkY29tcG9uZW50KTtcblx0XHRcdGlmICggY2F0ZWdvcnlOYW1lICkge1xuXHRcdFx0XHR1cmwgPSB1cmwgKyBcIi9DYXRlZ29yeS9cIiArIGNhdGVnb3J5TmFtZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCAhZXhjbHVkZUZpbHRlcnMgKSB7XG5cdFx0XHRcdHZhciB1cmxGaWx0ZXJzID0gZ2V0VXJsZnJvbUFjdGl2ZUZpbHRlcnMoJGNvbXBvbmVudCk7XG5cdFx0XHRcdHVybCA9IHVybCArIHVybEZpbHRlcnM7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBzb3J0T3B0aW9ucyA9IGdldEFjdGl2ZVNvcnRpbmcoJGNvbXBvbmVudCk7XG5cdFx0XHRpZiAoIHNvcnRPcHRpb25zICYmIHNvcnRPcHRpb25zLm9yZGVyQnkgJiYgc29ydE9wdGlvbnMuZGlyZWN0aW9uICkge1xuXHRcdFx0XHRxdWVyeVBhcmFtc1tzb3J0T3B0aW9ucy5sYWJlbHMub3JkZXJCeV0gPSBzb3J0T3B0aW9ucy5vcmRlckJ5O1xuXHRcdFx0XHRxdWVyeVBhcmFtQ291bnQgPSBxdWVyeVBhcmFtQ291bnQgKyAxO1xuXG5cdFx0XHRcdHF1ZXJ5UGFyYW1zW3NvcnRPcHRpb25zLmxhYmVscy5kaXJlY3Rpb25dID0gc29ydE9wdGlvbnMuZGlyZWN0aW9uO1xuXHRcdFx0XHRxdWVyeVBhcmFtQ291bnQgPSBxdWVyeVBhcmFtQ291bnQgKyAxO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZhciB0eXBlID0gZ2V0VHlwZSgkY29tcG9uZW50KTtcblx0XHRpZiAoIHR5cGUgKSB7XG5cdFx0XHR1cmwgPSB1cmwgKyBcIj9cIiArXCJ0eXBlPVwiKyB0eXBlO1xuXHRcdH1cblxuXHRcdHZhciBzZWFyY2hUZXJtID0gZ2V0U2VhcmNoVGVybSgkY29tcG9uZW50KTtcblx0XHRpZiAoIHNlYXJjaFRlcm0gKSB7XG5cdFx0XHR1cmwgPSB1cmwgKyBcIiZcIiArXCJzZWFyY2g9XCIrIHNlYXJjaFRlcm07XG5cdFx0fVxuXG5cdFx0dmFyIGN1cnJlbnRQYWdlID0gZ2V0Q3VycmVudFBhZ2UoJGNvbXBvbmVudCk7XG5cdFx0aWYgKCBjdXJyZW50UGFnZSApIHtcblx0XHRcdHVybCA9IHVybCArIFwiJlwiICtcImN1cnJlbnRwYWdlPVwiKyBjdXJyZW50UGFnZTtcblx0XHR9XG5cblx0XHRpZiAoIHF1ZXJ5UGFyYW1Db3VudCA+IDApIHtcblx0XHRcdHVybCA9IHVybCArIFwiJlwiO1xuXG5cdFx0XHQkLmVhY2goIHF1ZXJ5UGFyYW1zLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG5cdFx0XHRcdHVybCA9IHVybCArIGtleSArIFwiPVwiICsgdmFsdWUgKyBcIiZcIjtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyByZW1vdmUgdGhlIHRyYWlsaW5nICYgaWYgd2UgYWRkZWQgb25lXG5cdFx0XHR1cmwgPSB1cmwucmVwbGFjZSgvJiQvLCBcIlwiKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdXJsO1xuXHR9O1xuXG5cdHZhciBkaXNwbGF5TmV3UmVzdWx0cyA9IGZ1bmN0aW9uICgkY29tcG9uZW50LCBleGNsdWRlQ2F0ZWdvcnksIGV4Y2x1ZGVGaWx0ZXJzKSB7XG5cdFx0dmFyIGN1cnJlbnRVcmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcblxuXHRcdHZhciB0YXJnZXRVcmwgPSBnZXRVUkwoJGNvbXBvbmVudCwgZXhjbHVkZUNhdGVnb3J5LCBleGNsdWRlRmlsdGVycyk7XG5cblx0XHRpZiAoIHRhcmdldFVybCAhPT0gY3VycmVudFVybCApIHtcblx0XHRcdHNhdmVTY3JvbGxQb3NpdGlvbigpO1xuXHRcdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSB0YXJnZXRVcmw7XG5cdFx0fVxuXHR9O1xuXG5cdC8qIEhlbHBlciBGdW5jdGlvbnMgKi9cblx0dmFyIGluaXRBc01vZGFsID0gZnVuY3Rpb24gKCAkYnV0dG9uLCAkcGFuZWwsIHJlbW9kYWxJRCApIHtcblx0XHQkcGFuZWwuZGF0YSggXCJyZW1vZGFsLWlkXCIsIHJlbW9kYWxJRCApO1xuXHRcdCRwYW5lbC5wcmVwZW5kKCc8YnV0dG9uIGRhdGEtcmVtb2RhbC1hY3Rpb249XCJjbG9zZVwiIGNsYXNzPVwicmVtb2RhbC1jbG9zZVwiPjwvYnV0dG9uPicpO1xuXHRcdCRwYW5lbC5hdHRyKFwiZGF0YS1rb2gtY29tcG9uZW50XCIsY29tcG9uZW50Q2xhc3MpO1xuXHRcdCRwYW5lbC5hZGRDbGFzcyhjb21wb25lbnRDbGFzcytcIi1tb2RhbFwiKTtcblxuXHRcdHZhciAkcmVtb2RhbFBhbmVsID0gJHBhbmVsLnJlbW9kYWwoe1xuXHRcdFx0aGFzaFRyYWNraW5nOiB0cnVlLFxuXHRcdFx0Y2xvc2VPbkNhbmNlbDogdHJ1ZSxcblx0XHRcdGNsb3NlT25Fc2NhcGU6IHRydWUsXG5cdFx0XHRjbG9zZU9uT3V0c2lkZUNsaWNrOiB0cnVlLFxuXHRcdFx0bW9kaWZpZXI6ICcnXG5cdFx0fSk7XG5cblx0XHQvLyBNYWtlIHRoZSBidXR0b24gYWxsIGJ1dHRvbi15IGFuZCBjbGljay15XG5cdFx0JGJ1dHRvbi5kYXRhKCBcInJlbW9kYWwtdGFyZ2V0XCIsIHJlbW9kYWxJRCApO1xuXHRcdCRidXR0b24uY2xpY2soIHsgdGFyZ2V0OiAkcmVtb2RhbFBhbmVsIH0sIGZ1bmN0aW9uKGUpIHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR2YXIgJHRhcmdldCA9IGUuZGF0YS50YXJnZXQ7XG5cdFx0XHQkdGFyZ2V0Lm9wZW4oKTtcblx0XHR9KTtcblx0fTtcblxuXHR2YXIgaW5pdFF1aWNrVmlld0RhdGEgPSBmdW5jdGlvbiAoICRwYW5lbCApIHtcblxuXHRcdHZhciAkcHJpbWFyeUJhbm5lciA9ICRwYW5lbC5jaGlsZHJlbihcIi5rb2gtcHJvZHVjdC1pbWFnZVwiKTtcblxuXHRcdHZhciAkcHJvZHVjdENvbnRlbnQgPSAkcGFuZWwuY2hpbGRyZW4oXCIua29oLXByb2R1Y3QtY29udGVudFwiKTtcblx0XHR2YXIgJHByb2R1Y3RTS1UgPSAkcHJvZHVjdENvbnRlbnQuY2hpbGRyZW4oXCIua29oLXByb2R1Y3Qtc2t1XCIpO1xuXHRcdHZhciAkcHJvZHVjdFByaWNlcyA9ICRwcm9kdWN0Q29udGVudC5jaGlsZHJlbihcIi5rb2gtcHJvZHVjdC1wcmljZXNcIik7XG5cblx0XHR2YXIgJGNvbG9yQ29sbGVjdGlvbnMgPSAkcHJvZHVjdENvbnRlbnQuY2hpbGRyZW4oXCIua29oLXByb2R1Y3QtY29sb3JzXCIpO1xuXHRcdCRjb2xvckNvbGxlY3Rpb25zLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyICRjb2xvckNvbGxlY3Rpb24gPSAkKHRoaXMpO1xuXG5cdFx0XHR2YXIgJHNlbGVjdGVkQ29sb3JMYWJlbCA9ICRjb2xvckNvbGxlY3Rpb24uY2hpbGRyZW4oXCIua29oLXNlbGVjdGVkLWNvbG9yXCIpLmZpbmQoXCIudmFsdWVcIik7XG5cblx0XHRcdHZhciAkY29sb3JWYXJpYW50cyA9ICRjb2xvckNvbGxlY3Rpb24uZmluZChcIi5rb2gtcHJvZHVjdC12YXJpYW50XCIpO1xuXHRcdFx0JGNvbG9yVmFyaWFudHMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciAkY29sb3JWYXJpYW50ID0gJCh0aGlzKTtcblxuXHRcdFx0XHR2YXIgcHJvZHVjdERhdGEgPSB7XG5cdFx0XHRcdFx0aW1hZ2VVUkw6ICRjb2xvclZhcmlhbnQuZGF0YShcImtvaC1pbWFnZVwiKSxcblx0XHRcdFx0XHRza3U6ICRjb2xvclZhcmlhbnQuZGF0YShcImtvaC1za3VcIiksXG5cdFx0XHRcdFx0cHJpY2VzOiAkY29sb3JWYXJpYW50LmRhdGEoXCJrb2gtcHJpY2VcIiksXG5cdFx0XHRcdFx0Y29sb3JOYW1lOiAkY29sb3JWYXJpYW50LmRhdGEoXCJrb2gtY29sb3JcIilcblx0XHRcdFx0fTtcblxuXHRcdFx0XHR2YXIgcHJvZHVjdEZpZWxkcyA9IHtcblx0XHRcdFx0XHRiYW5uZXI6ICRwcmltYXJ5QmFubmVyLFxuXHRcdFx0XHRcdHNrdTogJHByb2R1Y3RTS1UsXG5cdFx0XHRcdFx0cHJpY2VzOiAkcHJvZHVjdFByaWNlcyxcblx0XHRcdFx0XHRjb2xvcjogJHNlbGVjdGVkQ29sb3JMYWJlbFxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdCRjb2xvclZhcmlhbnQuY2hpbGRyZW4oXCIua29oLXByb2R1Y3QtY29sb3JcIikuY2xpY2soIHsgdmFyaWFudFNldDogJGNvbG9yVmFyaWFudHMsIHZhcmlhbnQ6ICRjb2xvclZhcmlhbnQsIHByb2R1Y3Q6IHByb2R1Y3REYXRhLCBmaWVsZHM6IHByb2R1Y3RGaWVsZHMgfSwgZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRcdHZhciAkdmFyaWFudCA9IGUuZGF0YS52YXJpYW50O1xuXHRcdFx0XHRcdHZhciAkdmFyaWFudFNldCA9IGUuZGF0YS52YXJpYW50U2V0O1xuXG5cdFx0XHRcdFx0dmFyIHByb2R1Y3REYXRhID0gZS5kYXRhLnByb2R1Y3Q7XG5cdFx0XHRcdFx0dmFyIHByb2R1Y3RGaWVsZHMgPSBlLmRhdGEuZmllbGRzO1xuXG5cdFx0XHRcdFx0cHJvZHVjdEZpZWxkcy5iYW5uZXIuZmluZChcImltZ1wiKS5hdHRyKFwic3JjXCIsIHByb2R1Y3REYXRhLmltYWdlVVJMKTtcblx0XHRcdFx0XHRwcm9kdWN0RmllbGRzLnNrdS50ZXh0KHByb2R1Y3REYXRhLnNrdSk7XG5cdFx0XHRcdFx0cHJvZHVjdEZpZWxkcy5wcmljZXMuZmluZChcIi5rb2gtY3VycmVudC1wcmljZSA+IC52YWx1ZVwiKS50ZXh0KHByb2R1Y3REYXRhLnByaWNlcy5jdXJyZW50KTtcblx0XHRcdFx0XHRwcm9kdWN0RmllbGRzLnByaWNlcy5maW5kKFwiLmtvaC1wcmV2aW91cy1wcmljZSA+IC52YWx1ZVwiKS50ZXh0KHByb2R1Y3REYXRhLnByaWNlcy5wcmV2aW91cyk7XG5cdFx0XHRcdFx0cHJvZHVjdEZpZWxkcy5wcmljZXMuZmluZChcIi5rb2gtZGlzY291bnRlZC1wcmljZSA+IC52YWx1ZVwiKS50ZXh0KHByb2R1Y3REYXRhLnByaWNlcy5kaXNjb3VudGVkKTtcblx0XHRcdFx0XHRwcm9kdWN0RmllbGRzLmNvbG9yLnRleHQocHJvZHVjdERhdGEuY29sb3JOYW1lKTtcblxuXHRcdFx0XHRcdCR2YXJpYW50U2V0LnJlbW92ZUNsYXNzKFwia29oLXNlbGVjdGVkLXZhcmlhbnRcIik7XG5cdFx0XHRcdFx0JHZhcmlhbnQuYWRkQ2xhc3MoXCJrb2gtc2VsZWN0ZWQtdmFyaWFudFwiKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fTtcblxuXHR2YXIgbG9hZFNjcm9sbFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuXHRcdHZhciBzY3JvbGxQb3NpdGlvbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJrb2hQYWdlU2Nyb2xsXCIpO1xuXHRcdGF4S09ILnV0aWxzLmRlYnVnTG9nKFwiU2Nyb2xsIHNldCB0byBcIitzY3JvbGxQb3NpdGlvbik7XG5cdFx0JCh3aW5kb3cpLnNjcm9sbFRvcChzY3JvbGxQb3NpdGlvbik7XG5cdFx0c2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShcImtvaFBhZ2VTY3JvbGxcIik7XG5cdH07XG5cblx0dmFyIHNhdmVTY3JvbGxQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgc2Nyb2xsUG9zaXRpb24gPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG5cdFx0c2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcImtvaFBhZ2VTY3JvbGxcIiwgc2Nyb2xsUG9zaXRpb24pO1xuXHR9O1xuXG5cdC8vIEJhY2sgdG8gdG9wIGJ1dHRvblxuXHR2YXIgaW5pdEJhY2tUb3BCdXR0b24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHRvcEJ1dHRvbiA9ICQoXCIua29oLXNlYXJjaC10b3AgYnV0dG9uXCIpO1xuXHRcdGlmICgkKHRvcEJ1dHRvbikubGVuZ3RoICkge1xuXHRcdFx0dmFyIHRvcFRhcmdldCA9ICQoXCIuYy1rb2gtcHJvZHVjdC1zZWFyY2g6Zmlyc3RcIik7XG5cdFx0XHQkKHRvcEJ1dHRvbikuY2xpY2soZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0O1xuXHRcdFx0XHRpZiAoJCh0b3BUYXJnZXQpLmxlbmd0aCkge1xuXHRcdFx0XHRcdCQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtzY3JvbGxUb3A6ICQodG9wVGFyZ2V0KS5vZmZzZXQoKS50b3AgLTgwIH0sIDI1MCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcblxuXHQvLyBCYWNrIHRvIHRvcCBmYWRlaW5cblx0dmFyIGluaXRCYWNrVG9wRGlzdGFuY2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHRvcEJ1dHRvbiA9ICQoXCIua29oLXNlYXJjaC10b3AgYnV0dG9uXCIpO1xuXHRcdGlmICgkKHRvcEJ1dHRvbikubGVuZ3RoICkge1xuXHRcdFx0dmFyIHRvcERpc3RhbmNlID0gJChcIi5jLWtvaC1wcm9kdWN0LXNlYXJjaDpmaXJzdFwiKS5vZmZzZXQoKS50b3A7XG5cdFx0XHQkKGRvY3VtZW50KS5zY3JvbGwoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciB5ID0gJCh0aGlzKS5zY3JvbGxUb3AoKTtcblx0XHRcdFx0aWYgKHkgPiB0b3BEaXN0YW5jZSkge1xuXHRcdFx0XHRcdCQodG9wQnV0dG9uKS5mYWRlSW4oKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKHRvcEJ1dHRvbikuZmFkZU91dCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cblx0Ly8gQ2F0ZWdvcnkgbGluayBnZW5lcmF0aW9uXG5cdHZhciBpbml0Q2F0Z29yeUxpbmtzID0gZnVuY3Rpb24gKCRjb21wb25lbnRzKSB7XG5cdFx0Ly8gZGV0ZXJtaW5lIGN1cnJlbnQgc2VhcmNoIHBhcmFtZXRlcnNcblx0XHR2YXIgJHNlYXJjaFRlcm0gPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpO1xuXHRcdC8vIGZpbmQgY2F0ZWdvcnkgbGlua3Ncblx0XHR2YXIgJGNhdGVnb3J5TGlua3MgPSAkKFwiLmtvaC1jYXRlZ29yeSAua29oLWF2YWlsYWJsZS1maWx0ZXJzIGxpIGFcIik7XG5cblx0XHR2YXIgJGNvbXBvbmVudCA9ICQoJGNvbXBvbmVudHNbMF0pO1xuXHRcdHZhciB1cmxGaWx0ZXJzID0gZ2V0VXJsZnJvbUFjdGl2ZUZpbHRlcnMoJGNvbXBvbmVudCk7XG5cblx0XHQkY2F0ZWdvcnlMaW5rcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyICRjYXRlZ29yeU5hbWUgIFx0XHQ9ICQodGhpcykuZGF0YShcImZhY2V0LW5hbWVcIik7XG5cdFx0XHR2YXIgJGNhdGVnb3J5VmFsdWUgXHRcdD0gJCh0aGlzKS5kYXRhKFwiZmFjZXQtdmFsdWVcIik7XG5cdFx0XHR2YXIgJGNhdGVnb3J5VVJMID0gJy9yZXN1bHRzLycgKyAkY2F0ZWdvcnlOYW1lICsgJy8nICsgJGNhdGVnb3J5VmFsdWUgKyB1cmxGaWx0ZXJzICsgJz8nICsgJHNlYXJjaFRlcm07XG5cdFx0XHQkKHRoaXMpLmF0dHIoJ2hyZWYnLCRjYXRlZ29yeVVSTCk7XG5cdFx0fSk7XG5cdH07XG5cblx0Ly8gU3BlYyBUb2dnbGVcblx0dmFyIGluaXRTcGVjVG9nZ2xlID0gZnVuY3Rpb24gKCkge1xuXHRcdHZhciBzcGVjVG9nZ2xlID0gJChcIi5rb2gtc3BlYy10b2dnbGVcIik7XG5cdFx0aWYgKCQoc3BlY1RvZ2dsZSkubGVuZ3RoICkge1xuXHRcdFx0c3BlY1RvZ2dsZS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0JCh0aGlzKS5jbGljayhmdW5jdGlvbihlKSB7XG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdDtcblx0XHRcdFx0XHQkKHRoaXMpLm5leHQoKS50b2dnbGUoKTtcblx0XHRcdFx0XHQkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdC8vIFRyaWdnZXIgYXJ0aWNsZSB2aWRlb3Ncblx0dmFyIGluaXRBcnRpY2xlVmlkZW9zID0gZnVuY3Rpb24gKCRjb21wb25lbnRzKSB7XG5cdFx0aWYgKCAkY29tcG9uZW50cyApIHtcblx0XHRcdCRjb21wb25lbnRzLmVhY2goIGZ1bmN0aW9uKGNvbXBvbmVudEluZGV4KSB7XG5cdFx0XHRcdHZhciAkY29tcG9uZW50ID0gJCh0aGlzKTtcblxuXHRcdFx0XHR2YXIgJHZpZGVvTGlua3MgPSAkY29tcG9uZW50LmZpbmQoXCIua29oLXByb2R1Y3QtYXJ0aWNsZS52LWtvaC12aWRlbyBhXCIpO1xuXG5cdFx0XHRcdCR2aWRlb0xpbmtzLmVhY2goIGZ1bmN0aW9uKHZpZGVvSW5kZXgpIHtcblx0XHRcdFx0XHR2YXIgJHZpZGVvTGluayA9ICQodGhpcyk7XG5cdFx0XHRcdFx0dmFyIHZpZGVvVVJMID0gJHZpZGVvTGluay5hdHRyKFwiaHJlZlwiKTtcblx0XHRcdFx0XHR2YXIgYXBpVVJMID0gJHZpZGVvTGluay5kYXRhKFwiYXBpXCIpO1xuXG5cdFx0XHRcdFx0aWYgKCB2aWRlb1VSTCApIHtcblx0XHRcdFx0XHRcdC8vIEFkZCBkaXZzIHRvIGJlIHZpZGVvIG1vZGFsc1xuXHRcdFx0XHRcdFx0dmFyICR2aWRlb1BhbmVsID0gJCgnPGRpdiBjbGFzcz1cImtvaC12aWRlby1wYW5lbFwiPjxpZnJhbWUgd2lkdGg9XCI1NjBcIiBoZWlnaHQ9XCIzMTVcIiBzcmM9XCInK3ZpZGVvVVJMKydcIiBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+PC9kaXY+Jyk7XG5cdFx0XHRcdFx0XHQkdmlkZW9QYW5lbC5pbnNlcnRBZnRlcigkdmlkZW9MaW5rKTtcblxuXHRcdFx0XHRcdFx0dmFyIHJlbW9kYWxJRCA9IFwiVmlkZW9cIitjb21wb25lbnRJbmRleCt2aWRlb0luZGV4O1xuXHRcdFx0XHRcdFx0dmFyICR2aWRlb1BhbmVsID0gJGNvbXBvbmVudC5maW5kKFwiLmtvaC12aWRlby1wYW5lbFwiKTtcblx0XHRcdFx0XHRcdGluaXRBc01vZGFsKCAkdmlkZW9MaW5rLCAkdmlkZW9QYW5lbCwgcmVtb2RhbElEICk7XG5cdFx0XHRcdFx0XHQkdmlkZW9QYW5lbC5vbignb3BlbmVkJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHZhciAkZW1iZWRkZWRWaWRlbyA9ICQodGhpcykuZmluZChcImlmcmFtZVwiKTtcblx0XHRcdFx0XHRcdFx0cmVzaXplUmVzcG9uc2l2ZVZpZGVvKCRlbWJlZGRlZFZpZGVvKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdCR2aWRlb0xpbmsuY2xpY2soIGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCBhcGlVUkwgKSB7XG5cdFx0XHRcdFx0XHQkLmdldCggYXBpVVJMLCBmdW5jdGlvbiggZGF0YSApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCBkYXRhICYmIGRhdGEuaXRlbXMgJiYgZGF0YS5pdGVtc1swXSAmJiBkYXRhLml0ZW1zWzBdLnNuaXBwZXQgKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHZpZGVvVGl0bGUgPSBkYXRhLml0ZW1zWzBdLnNuaXBwZXQudGl0bGU7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCB2aWRlb1RpdGxlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0JHZpZGVvTGluay5jaGlsZHJlbihcIi5rb2gtdmlkZW8tdGl0bGVcIikudGV4dCggdmlkZW9UaXRsZSApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcblxuXHR2YXIgcmVzaXplUmVzcG9uc2l2ZVZpZGVvID0gZnVuY3Rpb24gKCAkdmlkZW9FbGVtZW50ICkge1xuXHRcdHZhciBlbWJlZFRhZ3MgPSBcImlmcmFtZSwgb2JqZWN0LCBlbWJlZFwiO1xuXHRcdHZhciBhc3BlY3RSYXRpbyA9ICR2aWRlb0VsZW1lbnQuZGF0YSgnYXNwZWN0cmF0aW8nKTtcblx0XHR2YXIgbWF4V2lkdGggPSAkdmlkZW9FbGVtZW50LmRhdGEoJ21heHdpZHRoJyk7XG5cblx0XHRpZiAoICFhc3BlY3RSYXRpbyB8fCAhbWF4V2lkdGggKSB7XG5cdFx0XHRtYWtlVmlkZW9SZXNwb25zaXZlKCAkdmlkZW9FbGVtZW50ICk7XG5cdFx0XHRhc3BlY3RSYXRpbyA9ICR2aWRlb0VsZW1lbnQuZGF0YSgnYXNwZWN0cmF0aW8nKTtcblx0XHRcdG1heFdpZHRoID0gJHZpZGVvRWxlbWVudC5kYXRhKCdtYXh3aWR0aCcpO1xuXHRcdH1cblxuXHRcdHZhciAkcGFyZW50ID0gJHZpZGVvRWxlbWVudC5jbG9zZXN0KCc6bm90KCcrZW1iZWRUYWdzKycpJyk7XG5cblx0XHR2YXIgcmVzcG9uc2l2ZVdpZHRoID0gMzIwOyAvLyBpbiBjYXNlIHdlIGNhbid0IGZpbmQgYSBwYXJlbnQsIHNldCB0byBzbWFsbGVzdCBwb3NzaWJsZSBzY3JlZW4gd2lkdGhcblx0XHRpZiAoICRwYXJlbnQgKSB7XG5cdFx0XHRyZXNwb25zaXZlV2lkdGggPSAkcGFyZW50LndpZHRoKCk7XG5cdFx0fVxuXHRcdC8vIERvbid0IGV4Y2VlZCB0aGUgb3JpZ2luYWwgd2lkdGggKGkuZS4gZG9uJ3Qgc2NhbGUgdXAsIG9ubHkgZG93bilcblx0XHRyZXNwb25zaXZlV2lkdGggPSBNYXRoLm1pbihyZXNwb25zaXZlV2lkdGgsIG1heFdpZHRoKTtcblxuXHRcdCR2aWRlb0VsZW1lbnQud2lkdGgoIHJlc3BvbnNpdmVXaWR0aCApO1xuXHRcdCR2aWRlb0VsZW1lbnQuaGVpZ2h0KCByZXNwb25zaXZlV2lkdGggKiBhc3BlY3RSYXRpbyApO1xuXHR9O1xuXG5cdC8qIERlZmluZXMgZnVuY3Rpb25zIGV4cG9zZWQgdGhyb3VnaCBmb290ZXJNYW5hZ2VyIG9iamVjdCAqL1xuXHRyZXR1cm4ge1xuXHRcdGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciAkY29tcG9uZW50cyA9ICQoXCIuXCIrY29tcG9uZW50Q2xhc3MpO1xuXG5cdFx0XHQvKiBJbml0aWFsaXplIFNlYXJjaCBOYXZpZ2F0aW9uICovXG5cdFx0XHRpbml0U2VhcmNoTmF2KCRjb21wb25lbnRzKTtcblxuXHRcdFx0LyogSW5pdGlhbGl6ZSBGaWx0ZXJzIEV4cGFuZC9Db2xsYXBzZSAqL1xuXHRcdFx0aW5pdEZpbHRlckV4cGFuZENvbGxhcHNlKCRjb21wb25lbnRzKTtcblxuXHRcdFx0LyogSW5pdGlhbGl6ZSBSYW5nZSBTbGlkZXJzICovXG5cdFx0XHRpbml0UmFuZ2VTbGlkZXJzKCRjb21wb25lbnRzKTtcblxuXHRcdFx0LyogSW5pdGlhbGl6ZSBRdWljayBWaWV3ICovXG5cdFx0XHRpbml0UXVpY2tWaWV3KCRjb21wb25lbnRzKTtcblxuXHRcdFx0LyogSW5pdGlhbGl6ZSBUb29sdGlwcyAqL1xuXHRcdFx0aW5pdFRvb2x0aXBzKCRjb21wb25lbnRzKTtcblxuXHRcdFx0LyogSW5pdGlhbGl6ZSBEcm9wZG93bnMgKi9cblx0XHRcdGluaXREcm9wZG93bnMoJGNvbXBvbmVudHMpO1xuXG5cdFx0XHQvKiBTZXQgdXAgYWxsIHRoZSBmaWx0ZXJzIGFuZCBzb3J0aW5nIGFuZCBzdWNoICovXG5cdFx0XHRpbml0U2VhcmNoRmFjZXRzKCRjb21wb25lbnRzKTtcblxuXHRcdFx0LyogU2V0IHVwIENsaWNrIEV2ZW50cyBmb3IgUHJvZHVjdCBUaWxlcyAqL1xuXHRcdFx0aW5pdFNpbWlsYXJQcm9kdWN0cygkY29tcG9uZW50cyk7XG5cblx0XHRcdC8qIEluaXRpYWxpemUgQmFjayB0byBUb3AgQnV0dG9uICovXG5cdFx0XHRpbml0QmFja1RvcEJ1dHRvbigkY29tcG9uZW50cyk7XG5cblx0XHRcdC8qIFNob3cvSGlkZSBCYWNrIHRvIFRvcCBCdXR0b24gKi9cblx0XHRcdGluaXRCYWNrVG9wRGlzdGFuY2UoJGNvbXBvbmVudHMpO1xuXG5cdFx0XHQvLyBDYXRlZ29yeSBsaW5rIGdlbmVyYXRpb25cblx0XHRcdGluaXRDYXRnb3J5TGlua3MoJGNvbXBvbmVudHMpO1xuXG5cdFx0XHQvLyBTcGVjIFRvZ2dsZVxuXHRcdFx0aW5pdFNwZWNUb2dnbGUoJGNvbXBvbmVudHMpO1xuXG5cdFx0XHQvLyBBcnRpY2xlIHZpZGVvc1xuXHRcdFx0aW5pdEFydGljbGVWaWRlb3MoJGNvbXBvbmVudHMpO1xuXG5cdFx0fSxcblx0XHRvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdGxvYWRTY3JvbGxQb3NpdGlvbigpO1xuXHRcdH1cblx0fTtcbn0pKCk7XG5cbiQoZnVuY3Rpb24gKCkge1xuXHQkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0XHQvLyBleGVjdXRlcyB3aGVuIEhUTUwtRG9jdW1lbnQgaXMgbG9hZGVkIGFuZCBET00gaXMgcmVhZHlcblx0XHRheEtPSC5tYWluLnByb2R1Y3RTZWFyY2guaW5pdGlhbGl6ZSgpO1xuXHR9KTtcblxuXHQkKHdpbmRvdykub24oXCJsb2FkXCIsIGZ1bmN0aW9uKCkge1xuXHRcdGF4S09ILm1haW4ucHJvZHVjdFNlYXJjaC5vbkxvYWQoKTtcblx0fSk7XG59KTtcbiJdfQ==
