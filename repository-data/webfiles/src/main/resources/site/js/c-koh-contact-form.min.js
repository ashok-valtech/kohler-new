/*
 * Copyright © 2000-2017 Kohler Company. All Rights Reserved.
 */
var axKOH=axKOH||{};axKOH.main=axKOH.main||{},axKOH.main.componentManager=axKOH.main.componentManager||{},axKOH.main.componentManager.contactForm=function(){var componentClass="c-koh-contact-form",initComponents=function(){var $components=$("."+componentClass);$components.each(function(componentIndex){var $component=$(this),$contactForm=$component.find("form"),$contactToggle=$component.find(".koh-contact-toggle").children("input"),$contactPhotos=$contactForm.find(".koh-contact-photo"),$captchaError=($contactForm.find("#newsletter"),$contactForm.find(".koh-contact-captcha .error-message")),$countrySelector=$contactForm.find(".country").children("select"),$stateSelector=$contactForm.find(".state").children("select");$contactToggle.change(function(){var toggleChoice=$(this).val();"yes"===toggleChoice?($(".koh-contact-fields").hide(),$(".koh-contact-fields.v-yes").show()):($(".koh-contact-fields").hide(),$(".koh-contact-fields.v-no").show()),$contactForm.each(function(){$(this)[0].reset()})}),!function(e){e.fn.niceSelect=function(t){function s(t){t.after(e("<div></div>").addClass("nice-select").addClass(t.attr("class")||"").addClass(t.attr("disabled")?"disabled":"").attr("tabindex",t.attr("disabled")?null:"0").html('<span class="current"></span><ul class="list"></ul>'));var s=t.next(),n=t.find("option"),i=t.find("option:selected");s.find(".current").html(i.data("display")||i.text()),n.each(function(t){var n=e(this),i=n.data("display");s.find("ul").append(e("<li></li>").attr("data-value",n.val()).attr("data-display",i||null).addClass("option"+(n.is(":selected")?" selected":"")+(n.is(":disabled")?" disabled":"")).html(n.text()))})}if("string"==typeof t)return"update"==t?this.each(function(){var t=e(this),n=e(this).next(".nice-select"),i=n.hasClass("open");n.length&&(n.remove(),s(t),i&&t.next().trigger("click"))}):"destroy"==t?(this.each(function(){var t=e(this),s=e(this).next(".nice-select");s.length&&(s.remove(),t.css("display",""))}),0==e(".nice-select").length&&e(document).off(".nice_select")):console.log('Method "'+t+'" does not exist.'),this;this.hide(),this.each(function(){var t=e(this);t.next().hasClass("nice-select")||s(t)}),e(document).off(".nice_select"),e(document).on("click.nice_select",".nice-select",function(t){var s=e(this);e(".nice-select").not(s).removeClass("open"),s.toggleClass("open"),s.hasClass("open")?(s.find(".option"),s.find(".focus").removeClass("focus"),s.find(".selected").addClass("focus")):s.focus()}),e(document).on("click.nice_select",function(t){0===e(t.target).closest(".nice-select").length&&e(".nice-select").removeClass("open").find(".option")}),e(document).on("click.nice_select",".nice-select .option:not(.disabled)",function(t){var s=e(this),n=s.closest(".nice-select");n.find(".selected").removeClass("selected"),s.addClass("selected");var i=s.data("display")||s.text();n.find(".current").text(i),n.prev("select").val(s.data("value")).trigger("change")}),e(document).on("keydown.nice_select",".nice-select",function(t){var s=e(this),n=e(s.find(".focus")||s.find(".list .option.selected"));if(32==t.keyCode||13==t.keyCode)return s.hasClass("open")?n.trigger("click"):s.trigger("click"),!1;if(40==t.keyCode){if(s.hasClass("open")){var i=n.nextAll(".option:not(.disabled)").first();i.length>0&&(s.find(".focus").removeClass("focus"),i.addClass("focus"))}else s.trigger("click");return!1}if(38==t.keyCode){if(s.hasClass("open")){var l=n.prevAll(".option:not(.disabled)").first();l.length>0&&(s.find(".focus").removeClass("focus"),l.addClass("focus"))}else s.trigger("click");return!1}if(27==t.keyCode)s.hasClass("open")&&s.trigger("click");else if(9==t.keyCode&&s.hasClass("open"))return!1});var n=document.createElement("a").style;return n.cssText="pointer-events:auto","auto"!==n.pointerEvents&&e("html").addClass("no-csspointerevents"),this}}(jQuery),$(".c-koh-contact-form select").niceSelect(),$countrySelector.change(function(e){var selectedCountry=$(e.target).next(".nice-select").find(".selected").text();$stateSelector.removeAttr("disabled").parent().removeClass("disabled"),$stateSelector.attr("name").length>0&&$.get("/api/dealerlookup/"+selectedCountry,function(data){$stateSelector.html(data),$(".c-koh-contact-form select").niceSelect("update")}),$(".c-koh-contact-form select").niceSelect("update")}),$contactPhotos.each(function(){function readURL(input){if(input.files&&input.files[0]){var photoPreview=$photoInput.parent().find(".preview");photoPreview.html("");var reader=new FileReader;reader.onload=function(e){var img=$("<img />");img.attr("style","height:41px;"),img.attr("src",e.target.result),photoPreview.append(img)},reader.readAsDataURL(input.files[0])}}var $photoInput=$(this).find("input[type=file]");$photoInput.parsley().on("field:success",function(){var inputID=$photoInput.attr("id"),inputTarget="#"+inputID,inputValue=document.getElementById(inputID);readURL(inputValue),$(inputTarget).parent().find(".koh-photo-remove").show(),$contactForm.find("#terms").prop("required",!0)})}),$contactForm.parsley({errorClass:"error",classHandler:function(el){return el.$element.closest("div")},errorsWrapper:'<div class="error-message"></div>',errorTemplate:"<span></span>"}),window.Parsley.addValidator("textfield",{requirementType:"regexp",validateString:function(value,requirement){return/^[0-9A-Za-z _@',\-]+$/i.test(value)},messages:{en:"Invalid characters detected.","pt-br":"Caracteres inválidos detectados"}}),window.Parsley.addValidator("textarea",{requirementType:"regexp",validateString:function(value,requirement){return/^[0-9A-Za-z _@',.!_\/$\-]+$/i.test(value)},messages:{en:"Invalid characters detected.","pt-br":"Caracteres inválidos detectados"}}),window.Parsley.addValidator("filesize",{validateString:function(_value,maxSize,parsleyInstance){var files=parsleyInstance.$element[0].files;return 1!=files.length||files[0].size<=1024*maxSize*1024},requirementType:"integer",messages:{en:"Photo cannot be larger than %s MB","pt-br":"Foto não pode ser maior que %s MB"}}),window.Parsley.addValidator("filetype",{requirementType:"string",validateString:function(value,requirement,parsleyInstance){var file=parsleyInstance.$element[0].files;if(0==file.length)return!0;var allowedMimeTypes=requirement.replace(/\s/g,"").split(",");return-1!==allowedMimeTypes.indexOf(file[0].type)},messages:{en:"Photo must be a JPG, GIF, PNG or BMP","pt-br":"A foto deve ser JPG, GIF, PNG or BMP"}}),$(this).on("click",".koh-photo-remove",function(e){var prevInput=$(this).parent().find("input[type=file]").attr("id"),prevID=$("#"+prevInput),prevImg=$(this).parent().find(".preview img"),totalImg=$(".koh-contact-photo.parsley-success").length;$(this).hide(),prevID.parsley().reset(),prevID.val(""),prevImg.remove(),1>=totalImg&&$contactForm.find("#terms").prop("required",!1)}),$contactForm.on("submit",function(e){if($(this).parent().hasClass("v-yes")){var response=grecaptcha.getResponse(widgetId1);0==response.length&&(e.preventDefault(),$captchaError.show())}if($(this).parent().hasClass("v-no")){var response=grecaptcha.getResponse(widgetId2);0==response.length&&(e.preventDefault(),$captchaError.show())}return e.isDefaultPrevented()?!1:!0})})};return{initialize:function(){initComponents()},onLoad:function(){}}}();var verifyCallback=function(response){$(".koh-contact-captcha .error-message").hide()},widgetId1,widgetId2,captchaKey=$("#captchaKey").val(),onloadCallback=function(){widgetId1=grecaptcha.render("recaptcha1",{sitekey:captchaKey,callback:verifyCallback}),widgetId2=grecaptcha.render("recaptcha2",{sitekey:captchaKey,callback:verifyCallback})};$(function(){$(document).ready(function(){axKOH.main.componentManager.contactForm.initialize()}),$(window).load(function(){axKOH.main.componentManager.contactForm.onLoad()})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImMta29oLWNvbnRhY3QtZm9ybS5qcyJdLCJuYW1lcyI6WyJheEtPSCIsIm1haW4iLCJjb21wb25lbnRNYW5hZ2VyIiwiY29udGFjdEZvcm0iLCJjb21wb25lbnRDbGFzcyIsImluaXRDb21wb25lbnRzIiwiJGNvbXBvbmVudHMiLCIkIiwiZWFjaCIsImNvbXBvbmVudEluZGV4IiwiJGNvbXBvbmVudCIsInRoaXMiLCIkY29udGFjdEZvcm0iLCJmaW5kIiwiJGNvbnRhY3RUb2dnbGUiLCJjaGlsZHJlbiIsIiRjb250YWN0UGhvdG9zIiwiJGNhcHRjaGFFcnJvciIsIiRjb3VudHJ5U2VsZWN0b3IiLCIkc3RhdGVTZWxlY3RvciIsImNoYW5nZSIsInRvZ2dsZUNob2ljZSIsInZhbCIsImhpZGUiLCJzaG93IiwicmVzZXQiLCJlIiwiZm4iLCJuaWNlU2VsZWN0IiwidCIsInMiLCJhZnRlciIsImFkZENsYXNzIiwiYXR0ciIsImh0bWwiLCJuZXh0IiwibiIsImkiLCJkYXRhIiwidGV4dCIsImFwcGVuZCIsImlzIiwiaGFzQ2xhc3MiLCJsZW5ndGgiLCJyZW1vdmUiLCJ0cmlnZ2VyIiwiY3NzIiwiZG9jdW1lbnQiLCJvZmYiLCJjb25zb2xlIiwibG9nIiwib24iLCJub3QiLCJyZW1vdmVDbGFzcyIsInRvZ2dsZUNsYXNzIiwiZm9jdXMiLCJ0YXJnZXQiLCJjbG9zZXN0IiwicHJldiIsImtleUNvZGUiLCJuZXh0QWxsIiwiZmlyc3QiLCJsIiwicHJldkFsbCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsImNzc1RleHQiLCJwb2ludGVyRXZlbnRzIiwialF1ZXJ5Iiwic2VsZWN0ZWRDb3VudHJ5IiwicmVtb3ZlQXR0ciIsInBhcmVudCIsImdldCIsInJlYWRVUkwiLCJpbnB1dCIsImZpbGVzIiwicGhvdG9QcmV2aWV3IiwiJHBob3RvSW5wdXQiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiaW1nIiwicmVzdWx0IiwicmVhZEFzRGF0YVVSTCIsInBhcnNsZXkiLCJpbnB1dElEIiwiaW5wdXRUYXJnZXQiLCJpbnB1dFZhbHVlIiwiZ2V0RWxlbWVudEJ5SWQiLCJwcm9wIiwiZXJyb3JDbGFzcyIsImNsYXNzSGFuZGxlciIsImVsIiwiJGVsZW1lbnQiLCJlcnJvcnNXcmFwcGVyIiwiZXJyb3JUZW1wbGF0ZSIsIndpbmRvdyIsIlBhcnNsZXkiLCJhZGRWYWxpZGF0b3IiLCJyZXF1aXJlbWVudFR5cGUiLCJ2YWxpZGF0ZVN0cmluZyIsInZhbHVlIiwicmVxdWlyZW1lbnQiLCJ0ZXN0IiwibWVzc2FnZXMiLCJlbiIsInB0LWJyIiwiX3ZhbHVlIiwibWF4U2l6ZSIsInBhcnNsZXlJbnN0YW5jZSIsInNpemUiLCJmaWxlIiwiYWxsb3dlZE1pbWVUeXBlcyIsInJlcGxhY2UiLCJzcGxpdCIsImluZGV4T2YiLCJ0eXBlIiwicHJldklucHV0IiwicHJldklEIiwicHJldkltZyIsInRvdGFsSW1nIiwicmVzcG9uc2UiLCJncmVjYXB0Y2hhIiwiZ2V0UmVzcG9uc2UiLCJ3aWRnZXRJZDEiLCJwcmV2ZW50RGVmYXVsdCIsIndpZGdldElkMiIsImlzRGVmYXVsdFByZXZlbnRlZCIsImluaXRpYWxpemUiLCJvbkxvYWQiLCJ2ZXJpZnlDYWxsYmFjayIsImNhcHRjaGFLZXkiLCJvbmxvYWRDYWxsYmFjayIsInJlbmRlciIsInNpdGVrZXkiLCJjYWxsYmFjayIsInJlYWR5IiwibG9hZCJdLCJtYXBwaW5ncyI6Ijs7O0FBS0EsR0FBSUEsT0FBUUEsU0FDWkEsT0FBTUMsS0FBT0QsTUFBTUMsU0FDbkJELE1BQU1DLEtBQUtDLGlCQUFtQkYsTUFBTUMsS0FBS0MscUJBR3pDRixNQUFNQyxLQUFLQyxpQkFBaUJDLFlBQWMsV0FDekMsR0FBSUMsZ0JBQWlCLHFCQUdqQkMsZUFBaUIsV0FFcEIsR0FBSUMsYUFBY0MsRUFBRSxJQUFJSCxlQUd4QkUsYUFBWUUsS0FBTSxTQUFTQyxnQkFDMUIsR0FBSUMsWUFBYUgsRUFBRUksTUFFZkMsYUFBZ0JGLFdBQVdHLEtBQUssUUFDaENDLGVBQWlC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ZEosVUFBWUosV0FBV1csT0FBTyxjQUM3QkMsUUFBWUgsV0FDWkksU0FBYUwsaUJBSWYzSCxHQUFFLFdBQ0RBLEVBQUV3QyxVQUFVeUYsTUFBTSxXQUVqQnhJLE1BQU1DLEtBQUtDLGlCQUFpQkMsWUFBWTZILGVBR3pDekgsRUFBRXlGLFFBQVF5QyxLQUFLLFdBRWR6SSxNQUFNQyxLQUFLQyxpQkFBaUJDLFlBQVk4SCIsImZpbGUiOiJjLWtvaC1jb250YWN0LWZvcm0ubWluLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuICogQ29weXJpZ2h0IMKpIDIwMDAtMjAxNyBLb2hsZXIgQ29tcGFueS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cclxuICovXHJcblxyXG4vLyBKYXZhc2NyaXB0IE5hbWVzcGFjaW5nIHNldHVwXHJcbnZhciBheEtPSCA9IGF4S09IIHx8IHt9O1xyXG5heEtPSC5tYWluID0gYXhLT0gubWFpbiB8fCB7fTtcclxuYXhLT0gubWFpbi5jb21wb25lbnRNYW5hZ2VyID0gYXhLT0gubWFpbi5jb21wb25lbnRNYW5hZ2VyIHx8IHt9O1xyXG5cclxuLy8gUmVwbGFjZSBcImNvbXBvbmVudE5hbWVcIiB3aXRoIHNvbWV0aGluZyByZXByZXNlbnRpbmcgd2hpY2ggY29tcG9uZW50IHRoaXMgaXNcclxuYXhLT0gubWFpbi5jb21wb25lbnRNYW5hZ2VyLmNvbnRhY3RGb3JtID0gKGZ1bmN0aW9uICgpIHtcclxuXHR2YXIgY29tcG9uZW50Q2xhc3MgPSBcImMta29oLWNvbnRhY3QtZm9ybVwiO1xyXG5cclxuXHQvLyBNYWluIGluaXQgZnVuY3Rpb247IGNvbnRhaW5zIHRoZSBtYWluIGxvb3AgdGhyb3VnaCBjb21wb25lbnQgaW5zdGFuY2VzXHJcblx0dmFyIGluaXRDb21wb25lbnRzID0gZnVuY3Rpb24oKSB7XHJcblx0XHQvLyBGaW5kIGFsbCBpbnN0YW5jZXMgb2YgdGhlIGNvbXBvbmVudCBvbiB0aGUgcGFnZVxyXG5cdFx0dmFyICRjb21wb25lbnRzID0gJChcIi5cIitjb21wb25lbnRDbGFzcyk7XHJcblxyXG5cdFx0Ly8gRm9yIGVhY2ggY29tcG9uZW50IGluc3RhbmNlLCBpbml0aWFsaXplIGl0XHJcblx0XHQkY29tcG9uZW50cy5lYWNoKCBmdW5jdGlvbihjb21wb25lbnRJbmRleCkge1xyXG5cdFx0XHR2YXIgJGNvbXBvbmVudCA9ICQodGhpcyk7IC8vIHRoZSBzaW5nbGUgY29tcG9uZW50IGluc3RhbmNlIHdlJ3JlIGN1cnJlbnRseSBvcGVyYXRpbmcgb25cclxuXHJcblx0XHRcdHZhciAkY29udGFjdEZvcm1cdFx0PSAkY29tcG9uZW50LmZpbmQoXCJmb3JtXCIpO1xyXG5cdFx0XHR2YXIgJGNvbnRhY3RUb2dnbGVcdD0gJGNvbXBvbmVudC5maW5kKFwiLmtvaC1jb250YWN0LXRvZ2dsZVwiKS5jaGlsZHJlbihcImlucHV0XCIpO1xyXG5cdFx0XHR2YXIgJGNvbnRhY3RQaG90b3NcdD0gJGNvbnRhY3RGb3JtLmZpbmQoXCIua29oLWNvbnRhY3QtcGhvdG9cIik7XHJcblx0XHRcdHZhciAkY29udGFjdFRlcm1zXHRcdD0gJGNvbnRhY3RGb3JtLmZpbmQoXCIjbmV3c2xldHRlclwiKTtcclxuXHRcdFx0dmFyICRjYXB0Y2hhRXJyb3IgICA9ICRjb250YWN0Rm9ybS5maW5kKFwiLmtvaC1jb250YWN0LWNhcHRjaGEgLmVycm9yLW1lc3NhZ2VcIik7XHJcblxyXG5cdFx0XHR2YXIgJGNvdW50cnlTZWxlY3RvciBcdD0gJGNvbnRhY3RGb3JtLmZpbmQoXCIuY291bnRyeVwiKS5jaGlsZHJlbihcInNlbGVjdFwiKTtcclxuXHRcdFx0dmFyICRzdGF0ZVNlbGVjdG9yIFx0XHQ9ICRjb250YWN0Rm9ybS5maW5kKFwiLnN0YXRlXCIpLmNoaWxkcmVuKFwic2VsZWN0XCIpO1xyXG5cclxuXHJcblxyXG5cclxuXHRcdFx0Ly8gU2hvdyBkaWZmZXJlbnQgZm9ybXMgb24gc2VsZWN0aW9uXHJcblx0XHRcdCRjb250YWN0VG9nZ2xlLmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0dmFyIHRvZ2dsZUNob2ljZSA9ICQodGhpcykudmFsKCk7XHJcblx0XHRcdFx0aWYgKHRvZ2dsZUNob2ljZSA9PT0gXCJ5ZXNcIikge1xyXG5cdFx0XHRcdFx0JChcIi5rb2gtY29udGFjdC1maWVsZHNcIikuaGlkZSgpO1xyXG5cdFx0XHRcdFx0JChcIi5rb2gtY29udGFjdC1maWVsZHMudi15ZXNcIikuc2hvdygpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQkKFwiLmtvaC1jb250YWN0LWZpZWxkc1wiKS5oaWRlKCk7XHJcblx0XHRcdFx0XHQkKFwiLmtvaC1jb250YWN0LWZpZWxkcy52LW5vXCIpLnNob3coKTtcclxuXHRcdFx0XHR9XHJcblxyXG4gICAgICAgICRjb250YWN0Rm9ybS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAkKHRoaXMpWzBdLnJlc2V0KCk7XHJcbiAgICAgICAgfSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHJcblxyXG5cdFx0XHQvKiAgalF1ZXJ5IE5pY2UgU2VsZWN0IC0gdjEuMFxyXG5cdCAgICBodHRwczovL2dpdGh1Yi5jb20vaGVybmFuc2FydG9yaW8vanF1ZXJ5LW5pY2Utc2VsZWN0XHJcblx0ICAgIE1hZGUgYnkgSGVybsOhbiBTYXJ0b3JpbyAgKi9cclxuXHRcdFx0IWZ1bmN0aW9uKGUpe2UuZm4ubmljZVNlbGVjdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBzKHQpe3QuYWZ0ZXIoZShcIjxkaXY+PC9kaXY+XCIpLmFkZENsYXNzKFwibmljZS1zZWxlY3RcIikuYWRkQ2xhc3ModC5hdHRyKFwiY2xhc3NcIil8fFwiXCIpLmFkZENsYXNzKHQuYXR0cihcImRpc2FibGVkXCIpP1wiZGlzYWJsZWRcIjpcIlwiKS5hdHRyKFwidGFiaW5kZXhcIix0LmF0dHIoXCJkaXNhYmxlZFwiKT9udWxsOlwiMFwiKS5odG1sKCc8c3BhbiBjbGFzcz1cImN1cnJlbnRcIj48L3NwYW4+PHVsIGNsYXNzPVwibGlzdFwiPjwvdWw+JykpO3ZhciBzPXQubmV4dCgpLG49dC5maW5kKFwib3B0aW9uXCIpLGk9dC5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpO3MuZmluZChcIi5jdXJyZW50XCIpLmh0bWwoaS5kYXRhKFwiZGlzcGxheVwiKXx8aS50ZXh0KCkpLG4uZWFjaChmdW5jdGlvbih0KXt2YXIgbj1lKHRoaXMpLGk9bi5kYXRhKFwiZGlzcGxheVwiKTtzLmZpbmQoXCJ1bFwiKS5hcHBlbmQoZShcIjxsaT48L2xpPlwiKS5hdHRyKFwiZGF0YS12YWx1ZVwiLG4udmFsKCkpLmF0dHIoXCJkYXRhLWRpc3BsYXlcIixpfHxudWxsKS5hZGRDbGFzcyhcIm9wdGlvblwiKyhuLmlzKFwiOnNlbGVjdGVkXCIpP1wiIHNlbGVjdGVkXCI6XCJcIikrKG4uaXMoXCI6ZGlzYWJsZWRcIik/XCIgZGlzYWJsZWRcIjpcIlwiKSkuaHRtbChuLnRleHQoKSkpfSl9aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpcmV0dXJuXCJ1cGRhdGVcIj09dD90aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLG49ZSh0aGlzKS5uZXh0KFwiLm5pY2Utc2VsZWN0XCIpLGk9bi5oYXNDbGFzcyhcIm9wZW5cIik7bi5sZW5ndGgmJihuLnJlbW92ZSgpLHModCksaSYmdC5uZXh0KCkudHJpZ2dlcihcImNsaWNrXCIpKX0pOlwiZGVzdHJveVwiPT10Pyh0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLHM9ZSh0aGlzKS5uZXh0KFwiLm5pY2Utc2VsZWN0XCIpO3MubGVuZ3RoJiYocy5yZW1vdmUoKSx0LmNzcyhcImRpc3BsYXlcIixcIlwiKSl9KSwwPT1lKFwiLm5pY2Utc2VsZWN0XCIpLmxlbmd0aCYmZShkb2N1bWVudCkub2ZmKFwiLm5pY2Vfc2VsZWN0XCIpKTpjb25zb2xlLmxvZygnTWV0aG9kIFwiJyt0KydcIiBkb2VzIG5vdCBleGlzdC4nKSx0aGlzO3RoaXMuaGlkZSgpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7dC5uZXh0KCkuaGFzQ2xhc3MoXCJuaWNlLXNlbGVjdFwiKXx8cyh0KX0pLGUoZG9jdW1lbnQpLm9mZihcIi5uaWNlX3NlbGVjdFwiKSxlKGRvY3VtZW50KS5vbihcImNsaWNrLm5pY2Vfc2VsZWN0XCIsXCIubmljZS1zZWxlY3RcIixmdW5jdGlvbih0KXt2YXIgcz1lKHRoaXMpO2UoXCIubmljZS1zZWxlY3RcIikubm90KHMpLnJlbW92ZUNsYXNzKFwib3BlblwiKSxzLnRvZ2dsZUNsYXNzKFwib3BlblwiKSxzLmhhc0NsYXNzKFwib3BlblwiKT8ocy5maW5kKFwiLm9wdGlvblwiKSxzLmZpbmQoXCIuZm9jdXNcIikucmVtb3ZlQ2xhc3MoXCJmb2N1c1wiKSxzLmZpbmQoXCIuc2VsZWN0ZWRcIikuYWRkQ2xhc3MoXCJmb2N1c1wiKSk6cy5mb2N1cygpfSksZShkb2N1bWVudCkub24oXCJjbGljay5uaWNlX3NlbGVjdFwiLGZ1bmN0aW9uKHQpezA9PT1lKHQudGFyZ2V0KS5jbG9zZXN0KFwiLm5pY2Utc2VsZWN0XCIpLmxlbmd0aCYmZShcIi5uaWNlLXNlbGVjdFwiKS5yZW1vdmVDbGFzcyhcIm9wZW5cIikuZmluZChcIi5vcHRpb25cIil9KSxlKGRvY3VtZW50KS5vbihcImNsaWNrLm5pY2Vfc2VsZWN0XCIsXCIubmljZS1zZWxlY3QgLm9wdGlvbjpub3QoLmRpc2FibGVkKVwiLGZ1bmN0aW9uKHQpe3ZhciBzPWUodGhpcyksbj1zLmNsb3Nlc3QoXCIubmljZS1zZWxlY3RcIik7bi5maW5kKFwiLnNlbGVjdGVkXCIpLnJlbW92ZUNsYXNzKFwic2VsZWN0ZWRcIikscy5hZGRDbGFzcyhcInNlbGVjdGVkXCIpO3ZhciBpPXMuZGF0YShcImRpc3BsYXlcIil8fHMudGV4dCgpO24uZmluZChcIi5jdXJyZW50XCIpLnRleHQoaSksbi5wcmV2KFwic2VsZWN0XCIpLnZhbChzLmRhdGEoXCJ2YWx1ZVwiKSkudHJpZ2dlcihcImNoYW5nZVwiKX0pLGUoZG9jdW1lbnQpLm9uKFwia2V5ZG93bi5uaWNlX3NlbGVjdFwiLFwiLm5pY2Utc2VsZWN0XCIsZnVuY3Rpb24odCl7dmFyIHM9ZSh0aGlzKSxuPWUocy5maW5kKFwiLmZvY3VzXCIpfHxzLmZpbmQoXCIubGlzdCAub3B0aW9uLnNlbGVjdGVkXCIpKTtpZigzMj09dC5rZXlDb2RlfHwxMz09dC5rZXlDb2RlKXJldHVybiBzLmhhc0NsYXNzKFwib3BlblwiKT9uLnRyaWdnZXIoXCJjbGlja1wiKTpzLnRyaWdnZXIoXCJjbGlja1wiKSwhMTtpZig0MD09dC5rZXlDb2RlKXtpZihzLmhhc0NsYXNzKFwib3BlblwiKSl7dmFyIGk9bi5uZXh0QWxsKFwiLm9wdGlvbjpub3QoLmRpc2FibGVkKVwiKS5maXJzdCgpO2kubGVuZ3RoPjAmJihzLmZpbmQoXCIuZm9jdXNcIikucmVtb3ZlQ2xhc3MoXCJmb2N1c1wiKSxpLmFkZENsYXNzKFwiZm9jdXNcIikpfWVsc2Ugcy50cmlnZ2VyKFwiY2xpY2tcIik7cmV0dXJuITF9aWYoMzg9PXQua2V5Q29kZSl7aWYocy5oYXNDbGFzcyhcIm9wZW5cIikpe3ZhciBsPW4ucHJldkFsbChcIi5vcHRpb246bm90KC5kaXNhYmxlZClcIikuZmlyc3QoKTtsLmxlbmd0aD4wJiYocy5maW5kKFwiLmZvY3VzXCIpLnJlbW92ZUNsYXNzKFwiZm9jdXNcIiksbC5hZGRDbGFzcyhcImZvY3VzXCIpKX1lbHNlIHMudHJpZ2dlcihcImNsaWNrXCIpO3JldHVybiExfWlmKDI3PT10LmtleUNvZGUpcy5oYXNDbGFzcyhcIm9wZW5cIikmJnMudHJpZ2dlcihcImNsaWNrXCIpO2Vsc2UgaWYoOT09dC5rZXlDb2RlJiZzLmhhc0NsYXNzKFwib3BlblwiKSlyZXR1cm4hMX0pO3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpLnN0eWxlO3JldHVybiBuLmNzc1RleHQ9XCJwb2ludGVyLWV2ZW50czphdXRvXCIsXCJhdXRvXCIhPT1uLnBvaW50ZXJFdmVudHMmJmUoXCJodG1sXCIpLmFkZENsYXNzKFwibm8tY3NzcG9pbnRlcmV2ZW50c1wiKSx0aGlzfX0oalF1ZXJ5KTtcclxuXHJcblx0XHRcdCQoJy5jLWtvaC1jb250YWN0LWZvcm0gc2VsZWN0JykubmljZVNlbGVjdCgpO1xyXG5cclxuXHRcdFx0JGNvdW50cnlTZWxlY3Rvci5jaGFuZ2UoZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgLy8gKioqKioqKiBIYWNrICoqKioqKioqKlxyXG4gICAgICAgIC8vIHRoZSBjdXN0b20gc2VsZWN0IHBsdWdpbiBpcyBydW5uaW5nIHNsb3cgZW5vdWdoIHRoYXQgdGhlIGpxdWVyeSBpcyBmaW5kaW5nIG1vcmUgdGhhbiBvbmUgXCJzZWxlY3RlZFwiIGl0ZW0uXHJcbiAgICAgICAgLy8ganEgaXMgcGFzc2luZyB0aGUgdGV4dCBvZiBib3RoIGl0ZW1zIHRvIHRoZSBhcGkuIHRoaXMgaGFjayBqdXN0IGdyYWJzIHRoZSBsYXN0IGl0ZW0gaW4gdGhlIGFycmF5LlxyXG5cclxuXHJcblx0XHRcdFx0dmFyIHNlbGVjdGVkQ291bnRyeSA9ICQoZS50YXJnZXQpLm5leHQoJy5uaWNlLXNlbGVjdCcpLmZpbmQoXCIuc2VsZWN0ZWRcIikudGV4dCgpO1xyXG5cdFx0XHRcdCRzdGF0ZVNlbGVjdG9yLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKS5wYXJlbnQoKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICBpZigkc3RhdGVTZWxlY3Rvci5hdHRyKCduYW1lJykubGVuZ3RoID4gMCl7XHJcblx0XHRcdFx0JC5nZXQoIFwiL2FwaS9kZWFsZXJsb29rdXAvXCIrIHNlbGVjdGVkQ291bnRyeSwgZnVuY3Rpb24oIGRhdGEgKSB7XHJcblx0XHRcdFx0XHQkc3RhdGVTZWxlY3Rvci5odG1sKGRhdGEpO1xyXG4gICAgICAgICAgJCgnLmMta29oLWNvbnRhY3QtZm9ybSBzZWxlY3QnKS5uaWNlU2VsZWN0KCd1cGRhdGUnKTtcclxuXHRcdFx0XHR9KTtcclxuICAgICAgfVxyXG4gICAgICAkKCcuYy1rb2gtY29udGFjdC1mb3JtIHNlbGVjdCcpLm5pY2VTZWxlY3QoJ3VwZGF0ZScpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIFBob3RvIGZpZWxkcyBwcmV2aWV3XHJcblx0XHRcdCRjb250YWN0UGhvdG9zLmVhY2goZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdHZhciAkcGhvdG9JbnB1dCA9ICQodGhpcykuZmluZChcImlucHV0W3R5cGU9ZmlsZV1cIik7XHJcblx0XHRcdFx0ZnVuY3Rpb24gcmVhZFVSTChpbnB1dCkge1xyXG5cdFx0XHRcdFx0aWYgKGlucHV0LmZpbGVzICYmIGlucHV0LmZpbGVzWzBdKSB7XHJcblx0XHRcdFx0XHRcdHZhciBwaG90b1ByZXZpZXcgPSAkcGhvdG9JbnB1dC5wYXJlbnQoKS5maW5kKFwiLnByZXZpZXdcIik7XHJcblx0XHRcdFx0XHRcdHBob3RvUHJldmlldy5odG1sKFwiXCIpO1xyXG5cdFx0XHRcdFx0XHR2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuXHRcdFx0XHRcdFx0cmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdFx0XHRcdFx0dmFyIGltZyA9ICQoXCI8aW1nIC8+XCIpO1xyXG5cdFx0XHRcdFx0XHRcdGltZy5hdHRyKFwic3R5bGVcIiwgXCJoZWlnaHQ6NDFweDtcIik7XHJcblx0XHRcdFx0XHRcdFx0aW1nLmF0dHIoXCJzcmNcIiwgZS50YXJnZXQucmVzdWx0KTtcclxuXHRcdFx0XHRcdFx0XHRwaG90b1ByZXZpZXcuYXBwZW5kKGltZyk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0cmVhZGVyLnJlYWRBc0RhdGFVUkwoaW5wdXQuZmlsZXNbMF0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQkcGhvdG9JbnB1dC5wYXJzbGV5KCkub24oJ2ZpZWxkOnN1Y2Nlc3MnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHZhciBpbnB1dElEID0gJHBob3RvSW5wdXQuYXR0cignaWQnKTtcclxuXHRcdFx0XHRcdHZhciBpbnB1dFRhcmdldCA9ICcjJyArIGlucHV0SUQ7XHJcblx0XHRcdFx0XHR2YXIgaW5wdXRWYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlucHV0SUQpO1xyXG5cdFx0XHRcdFx0cmVhZFVSTChpbnB1dFZhbHVlKTtcclxuXHRcdFx0XHRcdCQoaW5wdXRUYXJnZXQpLnBhcmVudCgpLmZpbmQoJy5rb2gtcGhvdG8tcmVtb3ZlJykuc2hvdygpO1xyXG5cdFx0XHRcdFx0JGNvbnRhY3RGb3JtLmZpbmQoJyN0ZXJtcycpLnByb3AoJ3JlcXVpcmVkJyx0cnVlKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBGb3JtIHZhbGlkYXRpb25cclxuXHRcdFx0JGNvbnRhY3RGb3JtLnBhcnNsZXkoe1xyXG4gICAgICAgIGVycm9yQ2xhc3M6IFwiZXJyb3JcIixcclxuICAgICAgICBjbGFzc0hhbmRsZXI6IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIFx0cmV0dXJuIGVsLiRlbGVtZW50LmNsb3Nlc3QoJ2RpdicpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3JzV3JhcHBlcjogJzxkaXYgY2xhc3M9XCJlcnJvci1tZXNzYWdlXCI+PC9kaXY+JyxcclxuICAgICAgICBlcnJvclRlbXBsYXRlOiAnPHNwYW4+PC9zcGFuPidcclxuICAgIFx0fSk7XHJcblxyXG5cdFx0XHR3aW5kb3cuUGFyc2xleS5hZGRWYWxpZGF0b3IoJ3RleHRmaWVsZCcsIHtcclxuXHRcdCAgICByZXF1aXJlbWVudFR5cGU6ICdyZWdleHAnLFxyXG5cdFx0ICAgIHZhbGlkYXRlU3RyaW5nOiBmdW5jdGlvbih2YWx1ZSwgcmVxdWlyZW1lbnQpIHtcclxuXHRcdCAgICAgIHJldHVybiAvXlswLTlBLVphLXogX0AnLFxcLV0rJC9pLnRlc3QodmFsdWUpXHJcblx0XHQgICAgfSxcclxuXHRcdCAgICBtZXNzYWdlczoge1xyXG5cdFx0ICAgICAgZW46ICdJbnZhbGlkIGNoYXJhY3RlcnMgZGV0ZWN0ZWQuJyxcclxuXHRcdFx0XHRcdCdwdC1icic6ICdDYXJhY3RlcmVzIGludsOhbGlkb3MgZGV0ZWN0YWRvcydcclxuXHRcdCAgICB9XHJcblx0XHQgIH0pO1xyXG5cclxuXHRcdFx0d2luZG93LlBhcnNsZXkuYWRkVmFsaWRhdG9yKCd0ZXh0YXJlYScsIHtcclxuXHRcdCAgICByZXF1aXJlbWVudFR5cGU6ICdyZWdleHAnLFxyXG5cdFx0ICAgIHZhbGlkYXRlU3RyaW5nOiBmdW5jdGlvbih2YWx1ZSwgcmVxdWlyZW1lbnQpIHtcclxuXHRcdCAgICAgIHJldHVybiAvXlswLTlBLVphLXogX0AnLC4hXy8kXFwtXSskL2kudGVzdCh2YWx1ZSlcclxuXHRcdCAgICB9LFxyXG5cdFx0ICAgIG1lc3NhZ2VzOiB7XHJcblx0XHQgICAgICBlbjogJ0ludmFsaWQgY2hhcmFjdGVycyBkZXRlY3RlZC4nLFxyXG5cdFx0XHRcdFx0J3B0LWJyJzogJ0NhcmFjdGVyZXMgaW52w6FsaWRvcyBkZXRlY3RhZG9zJ1xyXG5cdFx0ICAgIH1cclxuXHRcdCAgfSk7XHJcblxyXG5cdFx0XHR3aW5kb3cuUGFyc2xleS5hZGRWYWxpZGF0b3IoJ2ZpbGVzaXplJywge1xyXG5cdFx0XHQgIHZhbGlkYXRlU3RyaW5nOiBmdW5jdGlvbihfdmFsdWUsIG1heFNpemUsIHBhcnNsZXlJbnN0YW5jZSkge1xyXG5cdFx0XHQgICAgdmFyIGZpbGVzID0gcGFyc2xleUluc3RhbmNlLiRlbGVtZW50WzBdLmZpbGVzO1xyXG5cdFx0XHQgICAgcmV0dXJuIGZpbGVzLmxlbmd0aCAhPSAxICB8fCBmaWxlc1swXS5zaXplIDw9IG1heFNpemUgKiAxMDI0ICogMTAyNDtcclxuXHRcdFx0ICB9LFxyXG5cdFx0XHQgIHJlcXVpcmVtZW50VHlwZTogJ2ludGVnZXInLFxyXG5cdFx0XHQgIG1lc3NhZ2VzOiB7XHJcblx0XHRcdCAgICBlbjogJ1Bob3RvIGNhbm5vdCBiZSBsYXJnZXIgdGhhbiAlcyBNQicsXHJcblx0XHRcdFx0XHQncHQtYnInOiAnRm90byBuw6NvIHBvZGUgc2VyIG1haW9yIHF1ZSAlcyBNQidcclxuXHRcdFx0ICB9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0d2luZG93LlBhcnNsZXkuYWRkVmFsaWRhdG9yKCdmaWxldHlwZScsIHtcclxuXHRcdFx0XHRyZXF1aXJlbWVudFR5cGU6ICdzdHJpbmcnLFxyXG5cdFx0XHRcdHZhbGlkYXRlU3RyaW5nOiBmdW5jdGlvbiAodmFsdWUsIHJlcXVpcmVtZW50LCBwYXJzbGV5SW5zdGFuY2UpIHtcclxuXHRcdFx0XHRcdHZhciBmaWxlID0gcGFyc2xleUluc3RhbmNlLiRlbGVtZW50WzBdLmZpbGVzO1xyXG5cdFx0XHRcdFx0aWYgKGZpbGUubGVuZ3RoID09IDApIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR2YXIgYWxsb3dlZE1pbWVUeXBlcyA9IHJlcXVpcmVtZW50LnJlcGxhY2UoL1xccy9nLCBcIlwiKS5zcGxpdCgnLCcpO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGFsbG93ZWRNaW1lVHlwZXMuaW5kZXhPZihmaWxlWzBdLnR5cGUpICE9PSAtMTtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdG1lc3NhZ2VzOiB7XHJcblx0XHRcdFx0XHRlbjogJ1Bob3RvIG11c3QgYmUgYSBKUEcsIEdJRiwgUE5HIG9yIEJNUCcsXHJcblx0XHRcdFx0XHQncHQtYnInOiAnQSBmb3RvIGRldmUgc2VyIEpQRywgR0lGLCBQTkcgb3IgQk1QJ1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBSZW1vdmUgcGhvdG9cclxuXHRcdFx0JCh0aGlzKS5vbignY2xpY2snLCAnLmtvaC1waG90by1yZW1vdmUnLCBmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0dmFyIHByZXZJbnB1dCA9ICQodGhpcykucGFyZW50KCkuZmluZChcImlucHV0W3R5cGU9ZmlsZV1cIikuYXR0cignaWQnKTtcclxuXHRcdFx0XHR2YXIgcHJldklEIFx0XHQ9ICQoJyMnICsgcHJldklucHV0KTtcclxuXHRcdFx0XHR2YXIgcHJldkltZyBcdD0gJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcucHJldmlldyBpbWcnKTtcclxuXHRcdFx0XHR2YXIgdG90YWxJbWdcdD0gJCgnLmtvaC1jb250YWN0LXBob3RvLnBhcnNsZXktc3VjY2VzcycpLmxlbmd0aDtcclxuXHRcdFx0XHQkKHRoaXMpLmhpZGUoKTtcclxuXHRcdFx0XHRwcmV2SUQucGFyc2xleSgpLnJlc2V0KCk7XHJcblx0XHRcdFx0cHJldklELnZhbCgnJyk7XHJcblx0XHRcdFx0cHJldkltZy5yZW1vdmUoKTtcclxuXHRcdFx0XHRpZiAodG90YWxJbWcgPD0gMSkge1xyXG5cdFx0XHRcdFx0JGNvbnRhY3RGb3JtLmZpbmQoJyN0ZXJtcycpLnByb3AoJ3JlcXVpcmVkJyxmYWxzZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdCRjb250YWN0Rm9ybS5vbignc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0XHRpZiAoJCh0aGlzKS5wYXJlbnQoKS5oYXNDbGFzcygndi15ZXMnKSkge1xyXG5cdFx0XHRcdFx0dmFyIHJlc3BvbnNlID0gZ3JlY2FwdGNoYS5nZXRSZXNwb25zZSh3aWRnZXRJZDEpO1xyXG5cdFx0XHRcdFx0aWYocmVzcG9uc2UubGVuZ3RoID09IDApIHtcclxuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0XHQkY2FwdGNoYUVycm9yLnNob3coKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCQodGhpcykucGFyZW50KCkuaGFzQ2xhc3MoJ3Ytbm8nKSkge1xyXG5cdFx0XHRcdFx0dmFyIHJlc3BvbnNlID0gZ3JlY2FwdGNoYS5nZXRSZXNwb25zZSh3aWRnZXRJZDIpO1xyXG5cdFx0XHRcdFx0aWYocmVzcG9uc2UubGVuZ3RoID09IDApIHtcclxuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0XHQkY2FwdGNoYUVycm9yLnNob3coKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKGUuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHR9KTtcclxuXHR9O1xyXG5cclxuXHQvKiBEZWZpbmVzIGZ1bmN0aW9ucyBleHBvc2VkIHRocm91Z2ggbWFuYWdlciBvYmplY3QgKi9cclxuXHRyZXR1cm4ge1xyXG5cdFx0aW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRpbml0Q29tcG9uZW50cygpO1xyXG5cdFx0fSxcclxuXHRcdG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG5cdFx0fVxyXG5cdH07XHJcbn0pKCk7XHJcblxyXG52YXIgdmVyaWZ5Q2FsbGJhY2sgPSBmdW5jdGlvbihyZXNwb25zZSkge1xyXG5cdCQoXCIua29oLWNvbnRhY3QtY2FwdGNoYSAuZXJyb3ItbWVzc2FnZVwiKS5oaWRlKCk7XHJcbn07XHJcbnZhciB3aWRnZXRJZDE7XHJcbnZhciB3aWRnZXRJZDI7XHJcbnZhciBjYXB0Y2hhS2V5ID0gJCgnI2NhcHRjaGFLZXknKS52YWwoKTtcclxudmFyIG9ubG9hZENhbGxiYWNrID0gZnVuY3Rpb24oKSB7XHJcblx0d2lkZ2V0SWQxID0gZ3JlY2FwdGNoYS5yZW5kZXIoJ3JlY2FwdGNoYTEnLCB7XHJcblx0XHQnc2l0ZWtleScgOiBjYXB0Y2hhS2V5LFxyXG5cdFx0J2NhbGxiYWNrJyA6IHZlcmlmeUNhbGxiYWNrXHJcbiAgfSk7XHJcblx0d2lkZ2V0SWQyID0gZ3JlY2FwdGNoYS5yZW5kZXIoJ3JlY2FwdGNoYTInLCB7XHJcblx0XHQnc2l0ZWtleScgOiBjYXB0Y2hhS2V5LFxyXG5cdFx0J2NhbGxiYWNrJyA6IHZlcmlmeUNhbGxiYWNrXHJcbiAgfSk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuXHQkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuXHRcdC8vIGV4ZWN1dGVzIHdoZW4gSFRNTC1Eb2N1bWVudCBpcyBsb2FkZWQgYW5kIERPTSBpcyByZWFkeVxyXG5cdFx0YXhLT0gubWFpbi5jb21wb25lbnRNYW5hZ2VyLmNvbnRhY3RGb3JtLmluaXRpYWxpemUoKTtcclxuXHR9KTtcclxuXHJcblx0JCh3aW5kb3cpLmxvYWQoZnVuY3Rpb24oKSB7XHJcblx0XHQvLyBleGVjdXRlcyBhZnRlciB0aGUgd2luZG93IGlzIGZ1bGx5IGxvYWRlZCwgaW5jbHVkaW5nIGFsbCBpbWFnZXMsIGV0Yy5cclxuXHRcdGF4S09ILm1haW4uY29tcG9uZW50TWFuYWdlci5jb250YWN0Rm9ybS5vbkxvYWQoKTtcclxuXHR9KTtcclxufSk7XHJcbiJdfQ==
